2008-12-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Minor changes.
	* am/guile.m4: Remove useless checks for functions.
	* configure.ac: Minor changes.
	* lib/users.l, radtest/input.l: Refer to current buffer
	through YY_CURRENT_BUFFER.
	* m4/*: Remove.

2008-12-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Version 1.6.1

	Update .gitignores

	Rewrite test suite using new server mode.
	* tests/findport.c: Remove.
	* tests/Makefile.am: Remove findport.
	* radiusd/radiusd.c: New option --select-free-ports.
	* tests/atlocal.in (make_raddb): Do not use findport.
	(start_server): Start the server in `select-free-ports' mode.
	(begin_server): Get actual ports servers listen on from the port
	files they create.
	* tests/begin.at: Add keyword start-server.
	* tests/proxy/Makefile.am, tests/raddb/Makefile.am (CLEANFILES):
	Add ports.
	* tests/proxy/client.conf.in, tests/proxy/realms.in: Use {}
	to mark macros.
	* tests/raddb/client.conf.in, tests/raddb/realms.in: Likewise.
	* tests/proxy/config.in (option): Remove exec-program-user.
	(auth,acct): Remove port statements.
	* tests/raddb/config.in: Likewise.

	Bugfix.
	* lib/list.c (grad_list_destroy): Zero *plist before actually
	freeing its
	contents. This makes list destroying an atomical operation. In
	particular,
	it is important when destroying _grad_debug_list.

2008-12-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fix compilation with gcc >= 4.3.0.
	* configure.ac, radiusd/Makefile.am: Explicitly disable aliasing
	if using gcc
	* radiusd/rewrite.y: Bugfix: make fmain static.

	Bugfixes.
	* lib/numtostr.c: Bugfix.
	* README-hacking: Fix typo.

2008-12-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update .gitignores

	Update .gitignores

	Switch to Git repository

2008-12-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Remove obsolete directives

	Bugfixes
	* configure.ac, NEWS: Version 1.6
	* lib/getgr.c, lib/getpw_r.c, lib/numtostr.c: include string.h.
	* radiusd/rewrite.y (bi_gsub,bi_sub): Add typecasts.
	* scripts/mktypes.c (print_number): Return also numeric
	representation.
	(main): Define GRAD_VERSION_NUMBER.
	* tests/raddb/auth.scm: Replace L_INFO with GRAD_LOG_INFO.
	* radscm/radiusd.scm4, radscm/ttl.scm: Likewise.

	scripts/radius.m4: New file.

	Namespace normalization.
	* include/radius/list.h: Rename struct list/iterator to grad_list/
	grad_iterator
	* include/radius/radius.h: Rename L_ log macros to GRAD_LOG_
	All uses updated.

	Fix minor bug

2008-12-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Bugfixes.
	* lib/radpdu.c (decode_vsa): Fix bail-out condition.
	* lib/slist.c (grad_slist_head): Bigfix.
	* lib/users.y: Use INT_BUFSIZE_BOUND, not INT_STRLEN_BOUND.
	* lib/util.c: Likewise.

2008-12-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Minor changes.
	* bootstrap: Replace with the gnulib version.
	* bootstrap.conf: Read local configuration file.
	* configure.ac: Add AC_CONFIG_MACRO_DIR
	* lib/client.c: Minor change
	* lib/raddb.c (grad_read_raddb_file): Remove leftover fprintf.
	* radiusd/log.c (radiusd_logger): Check if loc->line != NULL.
	* m4/.cvsignore: Update.

2008-08-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	* NEWS, configure.ac: Version 1.5.91
	* include/radius/radius.h (grad_recompute_timeout): New function.
	* lib/client.c (grad_client_send0): Fix send-and-wait loop.
	* lib/util.c (grad_recompute_timeout): New function.
	* radiusd/config.y (typestr): New entries.
	(_get_value): Handle CFG_UNSIGNED, CFG_SIZE_T, and CFG_INTEGER.
	* radiusd/rpp.c (recompute_timeout): Replace by extern
	grad_recompute_timeout.

2008-06-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	* lib/Makefile.am (libgnuradius_la_SOURCES): Add deflog.c (moved
	from libradextra_a_SOURCES.
	* lib/logger.c (_grad_logger): Initialize with
	grad_default_logger.
	(grad_log, grad_log_req, grad_log_loc): Do nothing if
	_grad_logger is NULL.

	* lib/Makefile.am (libgnuradius_la_SOURCES): Add deflog.c (moved
	from libradextra_a_SOURCES.
	* lib/logger.c (_grad_logger): Initialize with
	grad_default_logger.
	(grad_log, grad_log_req, grad_log_loc): Do nothing if
	_grad_logger is NULL.

2008-05-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	(grad_list_insert_sorted): Update list->count.

2008-03-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	* include/radiusd.h (struct channel): Redesign union id;
	* radiusd/log.c (log_to_channel): LM_SYSLOG branch: fix
	inconsistencies. Call openlog to properly initialize syslog.
	This also allows to set a preconfigured syslog tag.
	(channel_free): Free chan->id.sl.tag.
	(register_channel): Initialize syslog data.
	(channel_syslog_handler): Take an optional 4th argument - syslog
	tag.
	* configure.texi, NEWS: Update.

2008-02-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	* radscm/radsession.in: Bugfix. Use #f, not nil.
	* lib/slist.c (grad_slist_coalesce): Use c89

	* NEWS: Update.
	* README: Remove references to --with-include-path and
	--with-include-path.
	* bootstrap: Place auxiliary files in build-aux
	* bootstrap.conf: Update.

	* THANKS: Update.

	Fixes proposed by Jakub Bogusz:

	* configure.ac: Version 1.15.90.
	(AC_CONFIG_AUX_DIR): Change to build-aux
	(INCLUDEPATH): Remove.
	(M4): use build-aux
	Use AC_SEARCH_LIBS instead of AC_CHECK_LIB
	(RA_RADIUSD_LDADD,LIBRADEXTRA,LIBGNURADIUS): Use relative
	references to .la files rather than -L/-l options in order to
	prevent relative directories from being referenced in installed
	.la files.
	* radiusd/Makefile.am (AM_CPPFLAGS): Define RADIUS_LIBDIR
	* radiusd/dynload.c (dynload_stmt_term): Search in RADIUS_LIBDIR,
	not RADIUS_DATADIR.
	* sql/Makefile.am (moddir): Install under pkglibdir.
	* radscm/Makefile.am (libradscm_la_LIBADD): Add GUILE_LIBS.

2007-12-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	* bootstrap.conf: Do not use --source-base in
	gnulib_tool_option_extras, to avoid triggering gnulib bootstrap
	bug.
	* configure.ac, NEWS: Version 1.15.90.
	* Makefile.am (distuninstallcheck_listfiles): Fix rule.
	* include/radiusd.h (struct request.srv_addr): New field.
	(struct request_class.decode): Change signature.
	(request_create,radius_auth_req_decode)
	(radius_acct_req_decode,snmp_req_decode): Change signature.
	* raddb/dict/standard (GNU-Server-Address,GNU-Server-Port): New
	attributes.
	* radiusd/radius.c (radius_auth_req_decode)
	(radius_acct_req_decode): Change signature. Add
	GNU-Server-Address, GNU-Server-Port to the request.
	* radiusd/radiusd.c (udp_input_handler): Update call to
	request_create.
	* radiusd/request.c (request_create): Change signature. Update
	call to decode.
	* radiusd/rpp.c (rpp_comparator): Fix declaration.
	(struct rpp_request.srv_addr): New member.
	(struct rpp_request.addr): Rename to clt_addr.
	(rpp_request_handler): update call to request_create.
	* radiusd/snmpserv.c (snmp_req_decode): Change signature.
	* radiusd/sql.c: Include radscm.h conditionally.
	* tests/scheme-acct.at: Ignore GNU-Server-Address and
	GNU-Server-Port attributes.

2007-11-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	(rad_sql_mlc_close): Pass NAS-IP-Address

2007-11-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	(rpp_request_handler): Move call to scheme_redirect_output to
	scheme.c:catch_body.

	Switch to Guile 1.8

	Require Guile v. 1.8.0 at least.

	(_get_type): Fix typo (ipx instead of ip).

	(grad_ut_setent,grad_utmp_putent,grad_radwtmp_putent): First
	arg is const char *.

	(grad_attr_name_to_dict,grad_value_name_to_value): First arg is
	const char *.

	(grad_attr_name_to_dict,grad_value_name_to_value): First arg is
	const char *.

	(grad_md5_calc): input is const char *.

	(grad_md4_calc): in is const char *.

	(disp_sql_query,disp_sql_getpwd,disp_sql_exec):  Query is const
	char *.

2007-07-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	(scheme_gc_interval,scheme_task_timeout): Remove externs

2007-06-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Final update for GPLv3

2007-06-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Remove obsolete files

	Relicense under GPLv3 (snmplib under LGPLv3)

2007-06-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	(AT_SKIP_TEST): New macro
	(AT_CHECK): Skip test if the necessary prerequisites are not met.

	Bug fixes

	Display configuration summary

2007-06-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	 Fix typo

	Fix configuration tables.

	(CFG_UNSIGNED,CFG_SIZE_T): New macros
	cfg_get_unsigned,cfg_get_size_t,cfg_get_uint32_t): New functions

	(LIBGNURADIUS): Split extra libraries off to LIBRADEXTRA

2007-06-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fix include path

2007-06-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	* bootstrap.conf: Avoid dirname
	* configure.ac (RADIUS_INCLUDE_PATH): Add gnu
	* include/gettext.h: Remove
	* inclide/radlib.h: New file
	* include/Makefile.am: Update
	* lib/argp_basename.c: Remove
	* lib/Makefile.am: Move intl.c to libradextra_a_SOURCES, remove
	argp_basename.c
	* lib/ascend.c, lib/avl.c, lib/client.c, lib/cryptpass.c,
	lib/debug.c, lib/deflog.c, lib/dict.c, lib/envar.c, lib/intl.c,
	lib/iputil.c, lib/leakdetect.c, lib/logger.c, lib/nas.c,
	lib/printutmp.c, lib/radargp.c, lib/raddb.c, lib/radpaths.c,
	lib/radpdu.c, lib/radsrv.c, lib/radutmp.c, lib/realms.c,
	lib/slist.c, lib/sysdep.c, lib/users.l, lib/users.y, lib/util.c:
	Include radlib.h instead of common.h

	Do not use asprintf

	*** empty log message ***

	*** empty log message ***

	*** empty log message ***

2007-06-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	Update

	Move gnulib functions into a separate library. Rewrite
	libgnuradius to avoid depending on gnulib (only asprintf
	dependency is pending). Rewrite debugging system.

	Remove .po from the CVS. We will get them right from the TP site.

2007-05-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	(shmem_free): Reset tempfd and offset
	(stat_done): Reset server_stat

	(snmpserv_after_config_hook): Re-initialize  stat subsystem.

	(radiusd_signal_init): Do not install special hanlders for SIGFPE,
	SIGSEGV, SIGILL, SIGBUS

	(wild_match): Rewrite. Support character classes and improve
	execution time.

	Export gnu_*

	(libgnuradius_la_SOURCES): Add argp_basename.c

	New file

	(radius-sql-run-query): New function

	(sql_run_query): New function

	Define GNULIB_ARGP_EXTERN_BASENAME. Raise version number to 1.4.1

	Do not import error, xalloc-die and dirname.

2006-11-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	(debug): Rename to GRAD_DEBUG
	(debug_on): Rename to GRAD_DEBUG_LEVEL

	Raise version number to 1.4

	Update

2006-11-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	Update

2006-10-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	Vietnamese translation

2006-09-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	*** empty log message ***

	Update

	*** empty log message ***

	(global): Add rpl_*

	Use gnulib; Add check for ld --version-script

	(SUBDIRS): Remove intl

	Mark generated file as read-only for Emacs and vim

	Remove pofilter.c

	(getline): Rename to get_conf_line

	Update

	(sqllog): Takes literal string as its second argument.

	(_pam_init_radius_client): Set logger function.

	Update

	(channel_format_prefix)
	(channel_format_suffix): Replace by a single function
	log_format_hook. All uses updated
	(sqllog): Takes literal string as its second argument.
	Fixes IDEF1590.

	(return_value): Add terminating null character.

	Fix description of mlc_realm_query,mlc_user_query.

2005-11-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(obstack_grow_escaped): Bugfix

2005-10-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(strerror): Rewritten in ANSI C

	(argp_program_bug_address): Use PACKAGE_BUGREPORT

	Inconditionally declare both globals.

	Include radargp

	Export argp_ (Temporarly!)

	Use library versioning

	Define library version variables
	(--with-included-argp): Remove option
	Always use included copy of argp/getopt

	(radiusd_sql_checkgroup): Bugfix. Thanks Jose Alves for helping
	to track the bug.

	Add Jose Alves

2005-08-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Namespace normalization

	Version script for libgnuradius

	(libgnuradius_la_LDFLAGS): Use version script

	Raised version number to 1.3.91

2005-08-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	New option --quiet

	(log_set_to_console): Changed declaration

	(grad_client_send0): Fixed invocation of grad_client_recv.

2005-07-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(ARITH): New macro.

	(pidfile_status): Fixed arithmetical expression syntax.

2005-07-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated to use modified rewrite interfaces

	(argcv_quoted_length_n): New function.
	(argcv_quoted_length): Entry point to argcv_quoted_length_n
	(argcv_quote_copy_n): New function.
	(argcv_quote_copy): Entry point to argcv_quote_copy_n

	(grad_string_t,grad_datum_t): New data types.
	(grad_avp_t): Rewritten using grad_datum_t

	(Datatype): Renamed to grad_data_type_t
	(Datum): Removed
	(grad_value_t): New data type
	(rewrite_interpret,rewrite_eval,rewrite_invoke)
	(radscm_datum_to_scm): Changed declarations.
	(grad_value_free): New function

	Protect from multiple inclusion

2005-06-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Largely improved

	Synch with mailutils repo.

	Updated

	(sfn_exec_nowait): Updated to use new radius_eval_avp semantics.

	(grad_avl_find): Updated to use new radius_eval_avp semantics.

	(radius_eval_avp): Handle macro substitution
	(traditional translation) as well.

	(RAD_EXEC_WAIT,RAD_EXEC_XLAT): Removed.
	(radius_eval_avp): Changed prototype.

	Updated

	Added to the repository

	Updated

2005-06-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fixed longstanding bug: use of optarg instead

	(TESTSUITE_AT): Add ext-acct.at. Sorted files.

	(EXTRA_DIST,CLEANFILES): Add acct.bin.in

	(RA_ALL_KEYWORDS): Add ext-acct.

	Bugfix: cmp actually had no effect.

	(make_raddb): Set executable bit on created .bin files

	Removed

	Fixed longstanding bug: use of optarg instead of the parameter
	arg.

	Minor formatting fix

	(rad_acct_ext): Evaluate pair before passing it
	to radius_exec_program.
	Wait for the external program to terminate.
	Fixed return value;

	Raised version number to 1.3.90

	Raised version number to 1.3.90

	Updated

	(execwaitr): New profile

	(debug): Add exec to the debugging level

	(execwaitr): New test

	(mtx_bin): Fix a bug in implicit type coercion
	(bi_qprn): Bugfix: make sure there are always two hex digits.

	(pair_set_value): Add type checking.

	(exec_program_wait): Do not translate return value from the
	rewrite call.

	(radius_exec_program): Changed semantics of the last argument.

	(sfn_exec_nowait): Do not translate return value from the
	rewrite call.

	(grad_obstack_grow_backslash_num,grad_obstack_grow_backslash):
	Rewritten

	Use modified grad_obstack_grow_backslash_num

	(argcv_scan): Fix the behavior in case of
	unbalancedquotes. Synchronize with the mailutils repo.

	(grad_obstack_grow_backslash_num): Changed proto

	(RAD_EXEC_WAIT,RAD_EXEC_XLAT): New constants

2005-06-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(radius_eval_avp): New finction.
	(radius_eval_avl): Rewritten using radius_eval_avp().

	(exec_program_wait): Evaluate the pair before executing it.

	(sfn_exec_nowait): Evaluate the pair before executing it.

	define __OPTIMIZE__ to 1

	(radius_eval_avp): New function

	Added Eric Olson. Switched to UTF-8

2005-05-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Changed FSF postal address

2005-04-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(channel_format_prefix,channel_format_suffix): Minor fix to
	compensate for the stupidity of gcc 3.3.4

	(hints_setup): Fixed coredump on missing User-Name pair.

	Raised version number to 1.3.1

2005-03-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(Scheme-Procedure,Exec-Program-Wait): Updated definitions

	Added missing semicolons before the closing braces in rule
	actions. Required by recent bison versions.

	(scheme_eval_avl): New function

	(exec_program_wait): New function
	(hints_setup): Process eventual Exec-Program-Wait and
	Scheme-Procedure attributes

	(sfn_scheme): Rewritten using scheme_eval_avl
	(sfn_exec_wait): Rewritten using exec_program_wait

	(Exec-Program-Wait,Scheme-Procedure): Allow usage in hints RHS

	(scheme_eval_avl,exec_program_wait): New function

2005-01-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed minor bug

	(acct): Use acct modifier.

	(create_instance): Convert framed IP and NAS IP to host order.

2005-01-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed sectioning. Reverted to @appendix

2005-01-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Template for web documentation index

	Use @unnumbered instead of @appendix

	Rewritten to use gendocs.sh

	Added Ukrainian translation

	Ukrainian translation

2005-01-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added Stephen Bleazard. Reordered in lexicographic order.

	Properly protect `define' from expansion by m4. Reported by
	Stephen Bleazard

	(temp_space_size,bi_time,bi_strftime): New functions.

	(radius_respond): Run hints_setup() before
	calling rad_auth_check_username(). This will allow to transform
	usernames before checking for validity. Proposed in a response
	to Georges Arnould request.

	(grad_decode_pdu): Fixed debugging output to print IP addresses
	in host order

	(grad_envar_parse_argcv_internal): Bugfix. Incorrectly parsed
	explicit assignments.

	Fix typo

2004-12-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Ukrainian translation. Unofficial (so far).

2004-11-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(do_mysql_query): Actually disconnect only if mysql returned
	CR_SERVER_GONE_ERROR

	Minor comment

	Raised version number to 1.3

	FSF directory entry

2004-11-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

2004-11-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Rewritten in XHTML 1.0

	Updated

	(rpp_lookup_pid): Bugfix. The function was not
	signal-safe due to calls to malloc/free (from
	grad_iterator.*). This caused grief on BSD systems. Rewritten
	using grad_list_locate, which is reentrant.

	(grad_server_send_reply,grad_server_send_challenge): Issue
	warnings to L_DEBUG if DEBUG_ONLY is enabled.

2004-11-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Added new files

	List of radius requests and their numbers

	Some useful functions

	A wrapper for debugging radiusd from Emacs

	Updated

	 (scheme_eval_unspecified_expr): New function.

	(auth_failure): Removed useless variable. Use
	scheme_eval_unspecified_expr() instead of
	scheme_eval_boolean_expr(). Provide a default branch.

	(scheme_eval_unspecified_expr): New function.

	Updated

	(radius_verify_digest): Minor fix: do not copy garbage bytes
	from the memory area after rawdata.

	(parse_dict_attr): Fixed memory overrun. The bug
	was pretty long-standing: it was introduced with revision 1.10
	(2001-07-26).

	(rw_mach_destroy): Fix memory leak: pmatch was not freed.

	(pipe_read, pipe_write): Set errno = ETIMEDOUT if select
	returned 0.

2004-11-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Untabify

	 Updated copyright date

	Added comment

	Allow to set LEAK_DETECT from the command line.

	Updated

	(rad_postgres_exec): Several bugfixes.

	Do not allocate any memory. Use only static buffers.

	(grad_iterator_attach,grad_iterator_detach): New
	functions.
	(grad_iterator_create,grad_iterator_destroy): Use the new
	functions.
	(grad_list_iterate): Use the new functions. This is to make sure
	grad_list_iterate does not allocate any memory (especially
	important for radiusd/log.c)

	Updated

2004-10-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(grad_decode_pdu): Fixed debugging output

	(hints_setup): Removed local variable request_pairs.

2004-10-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Minor fix

	Mark as Rewrite source for Emacs

	Added rewrite-mode.el

	Major Emacs mode for editing Rewrite sources

	Do not use obsolete L_SET constant

	grad_lock_file): Apply exclusive locks

	If the file is opened for append,
	seek to eof right before writing to it. Lock the
	file *before* the seek.
	Improved diagnostics.

2004-10-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rpp_kill): Call rpp_check_pid() instead
	of simply removing the child.
	(rpp_check_pid): New function.

	When terminating a child send
	SIGTERM first and mark it as RS_TERMINATED. On the next iteration,
	if the child is still up, send it a SIGKILL.

	(RS_TERMINATED): New state
	(rpp_check_pid): New function

	texi2html does not understand
	'/@/' separators. Compensate for it.
	Fixed rule for generating plain text output

	Raised version number to 1.2.96

2004-10-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rad_sql_retrieve_sessions): Fill in login as orig_login

	(_request_iterator): Remove request after
	killing a hung-ip child. Issue critical error if the pid about
	to be killed is not registered in rpp.

2004-09-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(pipe_write, pipe_read): Fixed timeout calculation.
	Improved debugging diagnostics. Set errno on errors.
	(rpp_fd_read,rpp_fd_write): Improved debugging diagnostics
	(_rpp_slay): Take an additional argument describing why the
	function is called. Corrected notice message. All callers updated.

	Print IP addresses in debugging messages in dotted-quad notation.

	Updated version number to 1.2.95

2004-09-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	[!WITH_READLINE]: Bugfix

	(unix_pass): Bugfix

2004-09-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Test PQstatus before disconnecting on PGRES_FATAL_ERROR.

	(rpp_start_process): Redirect stdout to stderr

	(radius_exec_command): Close all descriptors except stderr.

	(create_instance): Fall back to .login if .orig_login is empty

	(rad_sql_retrieve_sessions): Fill in .orig_login

2004-09-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Added ca

	Updated

	Translators comment

	Compile only if WITH_READLINE is defined

	Removed stray #define

2004-09-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Check the output file

	Minor fixes

	Updated

	(radius_exec_program): Do not dup p[1] if it
	equals 1
	(radius_run_filter): Process "left-side" pipe first. Avoid
	duplcating descriptors if they already have desired values

	Do not use descriptors 0 and 1: user procedures and/or some
	libraries may attempt to write to stdout.

	(rad_postgres_query): Included proposition of Oleg Gawriloff.

2004-09-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(make_raddb): Bugfix

	Disconnect if PQexec returns NULL.

	(from_base64): Assume right to left ordering of the input.

2004-09-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(radiusd_request_free): Fixed memory leak.

	Removed include <config.h>: out of place in installed header.

	(make_raddb): Bugfix

2004-09-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added to the repository

	Moved from ../../radiusd/testsuite/raddb

	New files

	Add CLEANFILES

	New autotest-based test suite

	Switched to autotest

	Support for binary strings

	(sql_check_config): Check if at least one sql interface is
	available.

	New option --show-defaults

	(asn_decode_string): Fix datatype of count

2004-09-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(hash_size): removed debugging entries

	Updated

	(rpp_fd_read): Exit from padding loop if
	pipe_read fails.
	Added more debugging info.

	(scheme_boot,catch_body): The proper place
	for setting preconfig hook is in catch_body(), otherwise
	radiusd forgets about its default loading paths
	($sharedir/VERSION/scheme).

	(disp_sql_interface_index): name==NULL means checking for
	available default sql interface.

	Set non-zero defaults for master read/write timeouts.

	Use improved VSA declaration syntax

	Added support for BEGIN VENDOR ... END and BEGIN-VENDOR
	... END-VENDOR blocks

	(radiusd_setup): Call crypt_set_format if available.

	Check for crypt_set_format

2004-08-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(unix_expiration,unix_pass)[EMBEDDED_EXPIRATION_INFO]: Account
	for the old method of keeping password aging info in /etc/passwd.

2004-08-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(snmp_var_decode): Initialize var

	Split grad_request_t into two structures: a generic radius
	request structure
	grad_request_t and a server-specific structure radiusd_request_t

	Updated

	Namespace cleanup

	NAS Simulator in PHP

2004-08-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	Added Sergei Sinkovsky.

	Remove spurious global

	Conditional compilation of radiusd

	Further namespace cleanup

	New files

	Added php directory

	Renamed --without-server to --disable-server.
	Added --enable-php and --with-php-moddir options.

2004-08-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added support for loadable modules.

	Added sqlmod.sh

	Program for creating sql/modlist.h

	Reset %load-path before reconfiguring

	(radiusd_setup): Call dynload_init

	Added dynload.c

	Loadable module support

	Added new prototypes.

	Added support for loadable modules.
	(struct sql_connection.cfg): New member.

	Added support for loadable modules. New
	option --with-sql allows to list SQL modules to be used.

2004-08-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Allow single quotes around any identifier

2004-08-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed improper initialization of radutmp_path.

	(rt_eval_expr) <radtest_node_getopt>: Disable
	getopt diagnostics. Return even unrecognized options
	in OPTVAR.
	<radtest_node_argcount>: Return actual number of arguments, not
	counting $0.

	Use single quotes for quoting the reserved keywords, as described
	in the docs.

	A couple of minor fixes.

	(struct cfg_stmt acct_stmt): Bugfix. "forward" was setting auth
	forwarding, not acct.

2004-08-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Updated

	Move <BASE> inside <HEAD></HEAD> block

	Webdoc rules updated.

2004-08-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Implemented boolean shortcut evaluation.
	Keep the value of the last evaluated expression in $_ variable.

	Fixed processing of command line variable assignments.
	Assign empty string to $0 if no file is given in the command
	line.

	Added missing `or' and `and' keywords

	New features: end-of-line after
	`if' condition is optional.
	Unary plus operation.
	Empty pairlists.

2004-08-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	further improvements

	Updated

	Further improved error handling.
	Allow arbitrary number of newlines between branches
	of a case statement.

	Updated

	New declarations

	Improved error handling

	(grad_readline_init): Always initialize _interactive.

2004-08-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Prepend SCHEMEDIR to %load-path

	Removed lint-related MAINTAINER_MODE part

	(.scm.scm4): Do not run `cd $(libdir)`, as $(libdir) may not
	exist at the build time.

	Updated

	Minor fix

	Updated. Raised version number to 1.2.94

	*** empty log message ***

	Reorganized contrib structure. Added recent contributions

	Moved to web-radact

2004-07-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	(Conversion Between Data Types): Document conversions of operands
	in unary operations.

	(gnu format): Changed default time representation to %c.

	(rt_eval_expr): Implemented default typecast rules for unary
	operations.

2004-07-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Implemented AWK-like typecast rules.

	(RTV_MAX): New define

	Check if the literal is a request name and return NUMBER if so.

2004-07-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Add NOEDIT macro. Couple of minor fixes

	Include radscripts.m4 at the first line. Add NOEDIT macro. Remove
	RCS keywords.

	(NOEDIT): New macro.

	Minor fixes.

	Fixed error messages

	(proxy_send_request): Fixed semantics of queue->retries (it
	should be named 'attempts' instead).

	Added radtest.texi

	New file

2004-07-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Use functions.

	Bugfixes

	Added new keywords

	Updated

	Cleanup

	Implemented functions.

2004-07-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Use 'case'

	(radtest_parse_options): grad_argp_parse
	resets program_invocation_name. Use argp_parse instead.

	Added 'case' and 'in' keywords.
	Temporarily removed bracket counting code.

	Implemented 'case' statement.
	Improved memory allocation functions.

	Implemented 'case' statement.

	Minor syntax cleanup

	(grad_list_item): be robust if list==NULL

	Added missing prototypes

	Updated

	Rewritten from scratch.

	(main,parse_opt): -f (--file) stops argument
	processing.
	Removed legacy assignment syntax (--name=value).
	(radtest_parse_options): New function.

	New keywords 'set', 'shift', 'getopt'
	Support for 'here document' syntax
	Attempt to diagnose unbalanced brackets.

	New statements 'set', 'shift', 'getopt'

2004-07-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	New option --dry-run

	Lots of improvements/fixes.

	new keywords 'not', 'input'. Make '!' a synonim for 'not'.

	New statement 'input'. Minor changes to loop syntax.

2004-07-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added missing gettext markers

	Bugfix

	Implemented loops

	Allow to quote the keywords

	Improved

	Added new keywords. Handle variable name completion.

	Updated

	Rewritten

	Rewritten from scratch.

	Minor formatting fix.

	Added runtime.c

	New file.

	New option --readline

	(checkrad_xlat): Bugfix

	(grad_argp_parse): Minor fix.

2004-07-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Minor change

	Call radtest with --no-interactive

	Use new readline wrappers

	(run_log_hook): Added explanatory comment

	Synchronise with changes to grad_symtab_iterate.

	(radius_xlate): Changed declaration

	(grad_xlat_keyword): Changed declaration

	(dict_symbol_ptr): New function
	(dict_attr_lookup): Use dict_symbol_ptr
	(attrval_cmp): Changed declaration
	(grad_dictionary_iterate,grad_dictionary_value_iterate): New
	funtions

	(grad_request_code_name): Removed
	(grad_next_matching_code_name): New function
	(grad_first_matching_code_name): New function
	(grad_request_code_to_string): Renamed to
	grad_request_code_to_name
	(grad_string_to_request_code): Renamed to
	grad_request_name_to_code

	 Use grad_request_code_to_name

	(grad_symtab_iterate): Changed declaration.

	(grad_utent_compile_form): New prototype

	(dict_iterator_fp,dict_value_iterator_fp): New data types
	(grad_dictionary_iterate,grad_dictionary_value_iterate): New
	functions.

	Added readline-related prototypes

	Automatic generation of the list of symbols-followers requires
	a closer interaction between yacc+flex+readline. Vielleicht das
	nachste Mal...

	Final update before removal

	Minor changes

	Updated

	Added comptab.awk

	Added custom I/O routines and completion capabilities.

	Removed invocations of prompt().

	Added completion.c, completion.skel

	(radiusd_LDADD): Added libradextra.a

	Added readline.c

	Added to the repository

2004-07-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Minor fix

	Updated

	Removed support for Guile 1.4.x

	Stylistic changes

	Use the improved send/expect syntax

	Allow symbolic request names in send and expect clauses

	(auth_code_str): Renamed to grad_request_code_name
	(auth_code_abbr): Renamed to grad_request_code_to_string
	(grad_string_to_request_code): New function.

2004-06-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(wait-input): Bugfix

	(radiusd_collect_children): New function.
	(radiusd_cleanup): Rewritten.
	(radiusd_restart): Call radiusd_collect_children on SIGCHLD

	(user_find_sym): Assume nothing was found for lu.state == LU_begin

	Reversed changes made 2004-05-07.
	(rpp_remove_pid,rpp_status_changed): New functions.
	(rpp_remove): Changed prototype.
	(pipe_read,pipe_write): Recompute the timeout before entering
	select().

	(timersub): New macro

	(rpp_remove_pid,rpp_status_changed): New functions.
	(rpp_remove): Removed

2004-06-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

2004-06-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Added extra dependencies

	Fixed typo

	Updated

	Removed explicite rules for
	gnuradius.scm and radiusd.scm, they caused too
	much confusion for different "make"s.
	(.scm4.scm): New rule

	Renamed from *.scm.in to *.scm4

	Updated

	(main,init_symbols): Set predefined variable SOURCEIP to the
	source IP address we've bound to.
	(print_pairs): Rewritten

	Send NAS-IP-Address pair

	(gnuradius.scm,radiusd.scm): Do not use $<

	(grad_ip_iptostr): Allow for buf==NULL. This is mainly for use
	from the gdb.

	(_dict_value): Append new items to the end of the list.

2004-06-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Documented string quoting in macro substitutions

	Added Charles Sprickman

	(attr_to_str): Perform dictionary value lookup for integer
	attributes if escape is set.

	(grad_format_pair): Check if AP_TRANSLATE bit
	is set before calling grad_value_lookup(). This should spare
	some cicles.

	(_dict_value): Raise AP_TRANSLATE bit on the attribute properties.

	New flag AP_TRANSLATE

2004-06-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Run restore_nas_ip

	(main,parse_opt): Use 5th argument to
	grad_argp_parse to get the index of first non-optional
	argument.
	Added missing gettext markers.

	(M4_DEFINES): Removed GETOPT

	Replace '%G' with 'now()'

	(rewrite): Load nas-ip.rw

	Added nas-ip.rw

	Removed nas_ip.rw

	Moved to raddb/nas-ip.rw

	Removed work-around for autoconf 2.53
	Removed check for /bin/getopt: it is no longer used.
	Raised version number to 1.2.93

	Updated. Brought back options to radauth

2004-06-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(radiusd_sql_acct): Fixed issuing improper diagnostics.

	(ttl-message): Ignore interrupts during select.
	New option -debug turns on debugging output.

	Updated

	(_ascend_parse_ip): Bugfix: port specification after
	protocol type is optional. Thanks Erik Olson
	<erik@evodialer.com> for noticing.

2004-06-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added profile for locked accounts.

	Minor fixes: add an alternative group_query
	statement, add default auth_success_query and auth_failure_query
	statements.

	(ttl-message): Fixed check for overall packet length. It should
	not be less than 4.

	(rscm_add_load_path): Remove guile 1.14 code.

	Minor fix

	(auth_failure): Minor fix.

	Minor fix. Added authfail table

2004-06-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	recognize the new keywords.

	(rule_eval_rewrite): New function. Used
	by hints_eval_compat() and huntgroup_access(). It provides a
	uniform way of evaluating Rewrite-Function attributes. Notices,
	that in contrast to previous versions, the function allows
	to have several Rewrite-Function attributes in both LHS and
	RHS.

2004-05-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(groupcmp): Bugfix

	Updated

	(rad_auth_check_username): Bugfix:
	was sending request pairs back to the NAS
	(sfn_scheme): Improved iteration over the attribute list.

2004-05-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Minor fix

	(groupcmp): Check getpwnam first, to avoid performing useless
	SQL requests.

	Escape a macro substitution only if
	a. it is immediately preceeded by a quote (either single or
	double)
	b. it is written as %C\{} or %R\{}

2004-05-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	(snmp_check,finger_check): Fixed coredumps due to improper use
	of grad_free.

2004-05-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Minor change

	(print_acct_toggle): Forward declaration.

	New queries: auth_success_query and auth_failure_query.
	(rad_sql_init): Renamed to radiusd_sql_config
	(rad_sql_cleanup) Renamed to radiusd_sql_cleanup
	(rad_sql_acct): Renamed to radiusd_sql_acct
	(rad_sql_pass): Renamed to radiusd_sql_pass
	(rad_sql_checkgroup-rad_sql_checkgroup): Renamed to
	radiusd_sql_checkgroup
	(rad_sql_reply_attr_query): Renamed to
	radiusd_sql_reply_attr_query
	(rad_sql_check_attr_query): Renamed to
	radiusd_sql_check_attr_query
	(radiusd_sql_auth_result_query): New function. Execute
	auth_failure_query or auth_success_query.

	(sfn_validate): Depending on the result of
	rad_check_password call execute an appropriate SQL query.
	Invoke authentication trigger is rad_check_password returned
	auth_fail.

	New attribute Auth-Failure-Trigger

	Removed #ifdef USE_SQL.

	Prefixed global functions with radiusd_.

	Raised version number to 1.2.92

	Updated

	Added to the repository

	Updated

	Include rendition.texi. Added a new node 'GNU configuration'.

2004-05-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rad_sql_retrieve_sessions): Get four fields from the database.

	[!USE_SERVER_GUILE] (scheme_eval_boolean_expr): Define the
	function.

	(struct check_instance): Keep nas ip address. All functions
	updated accordingly

	(mlc_user_query): Fixed

	Uniformly protect header files from re-inclusion.

2004-05-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(scheme_safe_exec): Optionally return
	the Scheme result of the function. All handlers updated
	accordingly.
	(scheme_eval_boolean_expr): New function.

	Implemented Guile check.

	(grad_envar_assign): New function. All functions reorganized to
	better accomodate it

	Updated invocations of grad_read_raddb_file()

	Properly handle quotes starting at the middle of an argument
	(e.g. port="val")

	(grad_read_raddb_file): Accept an additional argument: a list
	of delimiters.

	(grad_read_raddb_file): Changed declaration

	(scheme_eval_boolean_expr): New decl

	(METHOD_GUILE): New define

	(pipe_write,pipe_read): Do not continue on EINTR.

	(struct check_instance.stack): New member;
	All callers updated accordingly.
	(checkrad_xlat_new, checkrad_xlat_old): New functions
	(ext_check): Initial implementation.

	Sync with the recent changes in mailutils repository

2004-05-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(util_xlate): New function (for future use).

	(radius_exec_command): New function (for future use).

	(radiusd_daemon): Fixed the comment

	Initialize program_invocation_name and
	program_invocation_short_name if necessary

	Export SQL_AUTH and SQL_ACCT

	Rewritten as Guile module

	Raised version number to 1.2.91

2004-05-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(tsh_run_function): Bugfix. Empty line caused coredumps.

	[!USE_SERVER_GUILE]: Bugfix

	(radius_exec_command): New prototype

	(write_detail): Bugfix: improper use of free().

	New variable RADIUS_INCLUDE_PATH keeps the include path and is
	exported to all Makefile.am

2004-04-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Include sys/types.h

	Changed initialization of RADSCM_BUILT_SOURCES_LIST

2004-04-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(_dict_property): Allow + and - operations on properties.

	 Documented new features

	Updated

	(grad_nas_lookup_ip): Select the closest match.

	(grad_ip_getnetaddr): Fix ipaddr by ANDing it with the netmask

2004-04-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added "detail-file-name" statements.

	(bi_nas_name, bi_nas_short_name)
	(bi_nas_full_name)
	(bi_gethostbyaddr, bi_gethostbyname): New functions.

	(auth_detail_template,acct_detail_template): New globals
	(auth_stmt,acct_stmt): Added detail-file-name keyword to set
	the above.

	(rad_auth_init): Updated call to write_detail().

	(write_detail): Updated prototype.

	(mkdir_path):
	(check_acct_dir): Rewritten using mkdir_path().
	(write_detail): Construct detailed log file name
	from the configuration file template.

2004-04-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	(grad_debug_p): Bugfix allowing it to work with a separate
	build directory.

	Updated

	Quote $PROCESS when echoing to prevent it from pathname expansion.

2004-04-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(detach_sql_connection): Call sql_conn_destroy()
	to deallocate the connection. This fixes serious memory leak.
	(sql_conn_destroy): Call disp_sql_disconnect() only if
	conn->connected is set.
	(rad_sql_checkgroup): Fix potential memory leak (did not reclaim
	obstack memory if sql_cache_retrieve() returned NULL.

	(finger_check): Fixed potential memory leak.

	(grad_parser_lex_init): Fixed potential memory leak.

	Provide extensive debugging features.

	Minor formatting change.

2004-04-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(arglist_to_scm): Bugfix.
	Use scm_long2num() to convert IP addresses

2004-04-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(catch_body): Removed call to scheme_debug.
	Enabling debugging that early makes guile coredump. Sigh.

	Updated

	(yylex): Recognize tokens starting with dash as strings

	(ttl-init): Modified to match new invocation conventions.

	(tsh_query_nas): Bugfix

	(scheme_call_proc): New function
	(scheme_try_auth,scheme_auth,scheme_acct): Rewritten using
	scheme_call_proc().
	(guile_stmt): New statement "eval"
	(scheme_cfg_load_module): Changed semantics of	extra arguments
	to "load-module". They mean arguments to module-init function.

	(rad_cfg_listen_auth)
	(rad_cfg_listen_acct): Bugfixes

	Bugfix

	Updated

	Added docstrings

	Removed unused declarations

	Removed support for Guile 1.4

	Reorganized. Main points:
	** Use additional catch when trying to load scheme files
	or modules
	** Allow any number of additional parameters to load-module
	statement. Such parameters are supposed to be valid Scheme
	expressions and are executed in order, after loading the
	module.
	** Turn on scheme debugging by default

	Rewritten as module

2004-04-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added to the repository

	Set GUILE_LOAD_PATH envvar

	(grad_scm_init): Load rscm_hash_init()

	Use grad_uint32_t

	Fixed misplaced '#if defined(USE_SQL)'

	 Added auth-type MS-CHAP

	Added 'fixme' comment

	(rad-dict-value->name): Throw exception on errors.

	Modified

	Added new exports

	(catch_body): Always load "radiusd" module.
	(scheme_try_auth): New function.
	(guile_stmt): Added load-module statement

	(rad_check_password): Changed declaration.
	If an unknown Auth-Type is supplied, try to load extension module.

	Added example of load-module statement.

	Modified assignement to RADSCM_PKGDATA so
	that all further changes will go to radscm/Makefile.am

2004-04-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(sql_auth_avail_p): New function

	Updated

	(common_init): Moved the call to system_acct_init() to a
	postconfig hook, which is executed only in daemon mode.

	(rad_check_password): Inconsistencies in SQL configuration are
	now catched earlier.

	(fix_check_pairs): Catch SQL configuration inconsistencies.

	Example of 'acct/system no' and several other fixes.

2004-04-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Correctly handle accounting enable/disable records.

	(rad_sql_mlc_enabled_p): New function

	(common_init): Call system_acct_init()
	(acct_stmt): Added "system" statement.

	(fix_check_pairs): Check the use of Simultaneous-Use attribute.

	(radius_mlc_enabled_p): New interface
	(mlc_after_config_hook): Removed. The functionality is moved
	to mlc_init(), so that it is possible to check for the proper use
	 of Simultaneous-Use.

	(reload_data): Reload sql configuration before
	dictionaries and matching rules. This is necessary for proper
	consistency checking (Simultaneous-Use vs. mlc)

	Allow for disabling system accounting

	(P_ACCT_DISABLED,P_ACCT_ENABLED): New macros

	(acct_system): New extern
	(system_acct_init, radutmp_mlc_enabled_p): New declaration
	(mlc_register_method): New declaration

	Updated

	(client_lookup_ip): More debugging info.

	(request_handle,_request_iterator): Restored
	"replace the least recently used request" approach, originally
	introduced by Clement Gerouville (see the ChangeLog entry for
	2001-10-19).

2004-03-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Documented new builtin functions

	Auth-Type values Mysql and Pam moved to compat

	(fix_check_pairs): Minor fix

	Added extensive debugging

	The Auth-Type values Mysql and Pam moved here.

	Added nas_ip.rw

	New builtin functions for accessing request fields.

	Raised version number to 1.2.3

	Updated

	Formatting changes

	Updated

	Allow MLC method to be configurable

	(mlc_stop_query): Fixed

	New prototypes

	(mlc_stmt): New external

	Sample mlc statement

2004-03-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(STMT_QUERY_P): Bugfix. Returned false for auth_query

	(rad_cfg_user):Bugfix

	(struct SQL_cfg): Removed leftover auth_query and group_query

2004-03-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	(hints_setup): A rewrite function might have
	installed the new User-Name. Take care not to discard it.

	Added Ascend-IP-TOS-Precedence.

	Minor fix

2004-03-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Minor fix

	Added CHAP test

	(chap): New user for testing CHAP authentication

	 (CHAP-Password): Removed 'E' marker.

2004-02-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fixed copyright and modification dates

	Updated

	(rewrite_stmt_term): Oops, removed spurious initialization
	of regcomp_flags

	Documented `rewrite' statement.

	Documented DATADIR

	(Built-in Functions): Documented gettext interfaces

	Updated

	(proxy_send): Minor rewording of the comment.

	(input): Bugfix.
	(pushstr): Use const for the first argument.
	(rewrite_stmt_term): Initialize regcomp_flags to zero.
	Added interfaces to gettext functions.

2004-02-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(Expressions): Argument count mismatch is now an error

	(struct radutmp): Fixed types of
	nas_address, framed_address and realm_address.

	(mtx_call): Treat argument count mismatch as an error.

	(proxy_send): Add a Realm-Name pair.

	(radius_mlc_user,radius_mlc_collect_realm)
	(radius_mlc_user,radius_mlc_realm): Changed declarations

	(sfn_realmuse): Update call to radius_mlc_realm();
	(sfn_simuse): Update call to radius_mlc_user().

	(radutmp_mlc_collect_user,radutmp_mlc_collect_realm): Changed
	declarations

	(Realm-Name): New attribute.

	(enum radius_sql_query): New data type.
	(SQL_cfg): Store the queries in an array.

	(radutmp_mlc_collect_user)
	(radutmp_mlc_collect_realm)
	(radius_mlc_user,radius_mlc_realm): Changed prototypes.

	(acct_start_query): Store Realm-Name
	(mlc_user_query,mlc_realm_query,mlc_stop_query): New queries

	(calls): Add new field 'realm_name'

2004-02-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Further namespace cleanup

	*** empty log message ***

	Use MLC interface

	Added mlc.c

	New file. Interface for multiple login checking.

	Update

	Added to the repository

	Further namespace cleanup

	Adopted new include structure

	Moved to include/radius

2004-02-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Further namespace cleanup;
	Autodetect 32-bit unsigned integer;
	Use memset() instead of bzero (except rx.[ch]);
	Removed PVAR macro: we assume ANSI C.

	Removed m4/Makefile

	Removed m4

	Updated

	Added new RFCs

	Reluctantly added dict/microsoft

	New file (arriere, diable!)

	Use new NAS iteration approach

	Rewritten using general purpose lists

	(struct nas): Removed 'next'.
	(grad_nas_next): Removed
	(grad_nas_iterator): New function
	' include/radius.h

2004-02-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Removed extra include

	Updated copylefts

	Updated

	Removed erroneous AM_INSTALLCHECK_STD_OPTIONS_EXEMPT

	Further namespace cleanup

2004-02-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Added to the repository

2004-02-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Modified to use gnuradius module

	(radscm_init): Renamed to grad_scm_init

	(radscm_init): New function

	Rewritten

	Removed

	Updated

	(catch_body): Renamed radscm_init to grad_scm_init.

	(grad_decode_pdu): Removed insertion of NAS-IP-Address (introduced
	2002-07-01). See TODO, though.

	Modified RA_CHECK_GUILE to suite new Guile interface.

2004-01-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Removed RADIUS_MODULE_ and calls to initlog()

	Removed debug.sh and debugmod.m4

	Removed libdebug.la and obsolete rules.

	Updated

	(main): Register logger function

	(vlog): Renamed to radiusd_logger.

	Removed obsolete rules

	(grad_default_logger,grad_set_logger): New functions

	Rewritten. Debugging module info is now kept
	in a linked list, so `make debugmod' is no longer necessary.

	(noinst_LTLIBRARIES): Removed

	Removed

	(initlog,vlog,debug_module): Removed
	(grad_logger_fp): New typedef
	(grad_set_logger,grad_app_logger,grad_debug_p): New functions
	(debug_on,debug): Rewritten using grad_debug_p

	Debugmod is no longer necessary

	(debugmod rule): Removed

2004-01-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Minor formatting fixes

	Quoted the defun

	Support --help and --version

	Exempt radauth from std-options check

	Support --version option

	(radsession rule): Minor update

	Set write permissions on raddb and proxy subdirectories

	added distclean-local to remove eventually created raddb/ and
	proxy/ subdirectories

	(AC_PREREQ): Raised to 2.59
	(AC_CHECK_HEADERS): check for socket.h
	 Added checks for various data types

	(distuninstallcheck_listfiles): Override the variable

	(LIBLIST): Fixed

2004-01-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Bugfix

	Updated

	Excempt radscm from std-options check

	rm before ln

	Placeholder for new version

	Preparational work to move from librad to shared installable
	libgnuradius. Cleanup in function name space.

2004-01-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(parse_opt): Fixed legacy syntax of specifying the number of
	records to display.

2004-01-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	Err, fixed 2003-12-08 entry

2003-12-24  uid65697  <uid65697>

	*** empty log message ***

	Updated

	(confirm): Initialize s

	Test propagation of VSA attributes.

	(vsa-propagation): New profile

	Added final newline

	Added PROPERTY declaration for Cisco-AVPair

	(radiusd_cleanup): Added missing gettext marker.

	Added translators comment

	Added translators comments

	Fixed indentation

	Updated

	Updated

	Added to the repository

	Added MSGID_BUGS_ADDRESS

	(rad_reset_signal): Removed ARG_UNUSED qualifier

	Minor change

	Updated

	Updated

	Another test commit

2003-12-23  uid65697  <uid65697>

	Test commit

	Updated

2003-12-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Updated

	Added update-dict.awk

	(update-dictionary): New rule

	Updated

	Minor change

	Document new dictionary statements

	Added detailed node listing

	(dump_matching_rules): Bugfix.

	Rewritten

	Minor change.

	 Rewritten using ALIAS statements.

	All real declarations moved to raddb/standard.
	This file contains only $INCLUDE statements and eventual user
	customizations.

	Removed

	Changed the way attributes are stored.
	Implemented new keywords ALIAS and PROPERTY.

	(struct dict_attr.next): Removed

	 Updated rule for creating raddict.h

	Added to the repository

2003-12-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Documented test shell mode.

	(tsh_timespan): Minor fix: the second argument specifies the
	ordinal number of the day of week.

	Updated

	Minor change

	Document radiusd-user statement

	(log_change_owner): New function

	Use new RT_ names

	(auth_codes, auth_codes_abbr): Use names defined in RFC 3575.

	Added rfc3575.txt

	New file

	Use default_log_prefix

	(exec_user, radiusd_user): New globals
	Implemented "radiusd-user" config statement, proposed by
	Maurice.

	(fix_check_pairs): Prohibit use of Auth-Type =
	System with radiusd-user.

	(radius_get_user_id,radius_switch_to_user): New functions

	(RADIUS_USER): New data type
	(exec_user): Removed global
	(exec_user, radiusd_user): New globals
	(radius_get_user_ids,log_change_owner): New function

	Changed constant names to match RFC3575:
		RT_AUTHENTICATION_REQUEST => RT_ACCESS_REQUEST
		RT_AUTHENTICATION_ACK => RT_ACCESS_ACCEPT
		RT_AUTHENTICATION_REJECT => RT_ACCESS_REJECT

	Added example of radiusd-user statement.

	Raised version number to 1.1.95
	Check for setegid,setregid,setresgid

	Added Gerald Coon.

2003-11-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Document new features.

	Use new prefix format. Provide functions for generating
	backward-compatible logs.

	Removed suffix hook

	(bi_request_code_string,bi_quote_string,bi_unquote_string):
	New builtin functions.

	(run_log_hook): Changed first parameter of
	the logging hook from string to integer representing the
	request code.

	(auth_codes_abbr): Added more request codes.

	Use new argcv_get syntax.

	Updated from the mailutils repository (with certain additions).

2003-11-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Minor fix

	Initial version of Catalan localization

	Updated

	(radius_respond): Check the username validity
	before hints_setup().
	Increase accounting request counter upon receiving each accounting
	request.

	(rad_auth_check_username): New function

	(avp_null_string): Renamed to avp_null_string_p.

	Updated

	(compare): Return -1 if rewrite_invoke fails.

	Implement global hooks

	(default_log_prefix): Rewritten
	(default_log_suffix): New function.

	Declare global hooks.

	(_realm_mem_free): Fixed memory leak.

	(sfn_simuse): Fixed improper radlog invocation

2003-11-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	An attempt to make log messages as configurable as reasonable:
	a user is allowed to specify "prefix" and "suffix" hooks. Both
	hooks are rewrite functions of three arguments (request type,
	nas name and request id), returning a string that would be
	displayed before and after the actual message. Theoretically,
	this should allow a user to tailor the messages to his/her
	liking.

	(rewrite_invoke): Changed prototype
	declaration.
	(rewrite_check_function): Removed.

	Rewritten

	Use default_log_prefix logging hook

	Rewritten using new hooks approach.

	User-defined per-channel prefix and suffix hooks

	(compare): Change invocation of rewrite_invoke()

	Use new vlog().

	Use new vlog().
	(rad_print_request): Removed.
	(radlog_req): Rewritten.

	(nas_request_to_nas,nas_request_to_name): Use
	const where appropriate.

	 (rewrite_invoke): Changed prototype
	declaration.
	(rewrite_check_function): Removed.

	(nas_request_to_nas,nas_request_to_name): Use
	const where appropriate.
	(struct channel.prefix_hook,suffix_hook): New members
	(vlog): Changed prototype declaration.

	Example of prefix-hook and suffix-hook statements.

	Test for case-insensitive realm names.

	(ignorecase): New test realm.

2003-11-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(realms file): Document ignorecase option.

	Raised version number to 1.1.94

	Removed useless assertions

	(doauth,doacct): Removed defines

	(sfn_validate): Do not log user password with account/password
	expired messages.

	(ip_gethostaddr,p_strtoip,ip_getnetaddr,ip_addr_in_net_p):
	Use const keyword wherever appropriate

	(sql_check_config): Be more robust against eventual errors.

	(realm_lookup_name): Allow new keyword "ignorecase". Proposed
	by Maurice.

	Updated

	(librad_la_LIBADD): Use LTLIBOBJS directly.

2003-11-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(Framed-Route): Fixed additivity. Reported by Mehmet Avcioglu
	<mehmet@activecom.net>

	Updated

	(check_codesize): Fixed a *gross* bug

	Updated

	(rewrite_before_config_hook): Fixed memory leak: code_init()
	must be called here.

	Updated version number

	Updated

	Rewritten expiration handling.

	Removed rewrite

	(enum auth_status): New data type.

	Detect struct passwd.pw_expire and pw_check
	Raised version number to 1.1.93

2003-11-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Synchronize with the recent changes to struct nas.

	Removed

	Removed

	Added to the repository

	(auth_log_hook): New global

	Set auth_log_hook variable.

	(auth_log): Run user-defined logging hook and
	display its return along with the diagnostic message.

	(AM_CPPFLAGS): Define RADIUS_DATADIR

	Synchronize with the recent changes to structs nas and client.

	(ip_getnetaddr,ip_addr_in_net_p): New functions

	(rewrite_check_function): New function.

	(struct client) New member netdef, replaces
	ipaddr.
	(auth_log_hook): New global

	(struct netdef): Declaration moved from radiusd.h
	(struct nas): New member netdef, instead of ipaddr

	Use AC_CONFIG_HEADERS

2003-11-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Modified. Thanks Gerald for the suggestion.

2003-11-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Use AC_TRY_LINK_FUNC

	(register_channel): Minor change in diagnostics

	(set_nonblocking): Fix typo

	Honor absolute filenames. Change proposed by Maurice.

	Changed wording of the AUTH_NOUSER
	diagnostics, now it reads "No such user".

	(common_init): Call acct_init().

	(acct_init): New function.

	Do not request -lz when testing for MySQL

2003-11-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Documented rule tracing mode.

	Rewrote shadow suite support.

	[!HAVE_DECL_CRYPT]: Provide declaration of crypt().

	Rewrote auto-detection of shadow suite. Removed unused options.

	Bugfix

	Removed not ready translations

	changed copyright holder to Free Software Foundation.

	changed copyright holder to Free Software Foundation.
	Report missing libraries using
	AC_MSG_FAILURE. Added -lz requisite to check for libmysqlclient

2003-11-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Documented new features.

	Added conditional snmp block.

	(default_radiusd_version): Fix parsing of the capablities
	containing equal sign

	Determine SNMP port.

2003-11-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(snmp_stmt_begin,snmp_cfg_listen): Allow boolean argument for
	'listen'

	(rad_cfg_listen_auth,auth_stmt_begin)
	(rad_cfg_listen_acct,acct_stmt_begin): Allow boolean argument
	for 'listen'.

	(radius_run_filter): Open log in append mode. Thanks Maurice
	for the patch.

	Allow empty block statements.

	Added testcase for Log-Mode-Mask bug

	(sfn_validate): Fixed the bug introduced 2003-11-02

2003-11-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Two more bugfixes. Thanks Maurice for pointing

	Bugfix.

	(_dict_attribute): Bugfix.

	Updated

	(radiusd_postconfig_hook): Bugfix.

	(proxy_lookup_realm): Fixed handling of flags.
	Specifying auth alone is enough to require proxying
	authentications requests only.

	(input_select): Pause and return if no fds are available.

	(rad_auth_init): Changed 2nd arg to write_detail.
	(sfn_init): Return MSG_ACCESS_DENIED if an invalid username was
	specified.

	(write_detail): Minor change.

2003-11-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	(debug_print_mtxlist): Fixed coredumps.

	(radtest_send): Decrypt the returned pair list.

	 Added Tunnel-Password pair test.

	Added test for proxying Tunnel-Password pair.

	New test user 'tunnel'

	Added dict.tunnel

	Provide for proper recoding of the encrypted attributes.

	(Tunnel-Password): Marked with P

	(encrypt_tunnel_password)
	(crypt_tunnel_password): Fixed to comply to RFC 2868. Thanks
	Maurice.

	(rad_clt_decrypt_pairlist): New function.
	(rad_clt_recv): Save the pointer to the shared secret in the
	returned RADIUS_REQ.

	(struct radius_req): New member remote_auth.
	Keeps the authenticator used to forward the request to the
	remote host.
	(rad_clt_decrypt_pairlist): New function.

	Updated

	Updated

	Updated calls to radius_decrypt_request_pairs()

	(radius_send_reply): Encrypt the reply.

	(sfn_init): Decrypt the remote server reply before further
	processing.

	(radius_decrypt_request_pairs): Changed proto.

	(rad_clt_encrypt_pairlist): New function.

2003-11-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rw_attrs0): Handle both AP_ENCRYPT bits

	(attr_to_str): Handle both AP_ENCRYPT bits

	(radius_decrypt_request_pairs)
	(radius_destroy_pairs,_extract_pairs): Handle both AP_ENCRYPT
	bits.

	(proxy_request_recode): Changed declaration.
	Handle both AP_ENCRYPT bits.
	(proxy_receive): Recode server reply pairs.

	Updated calls to proxy_request_recode()

	(sfn_validate): Be more picky about selecting
	the new state.
	(req_decrypt_password): Handle both AP_ENCRYPT bits.

	(Tunnel-Password): Mark with T

	(User-Password,CHAP-Password): Mark with E.

	(_dict_attribute): Handle new flags 'E' and 'T'.
	Removed handling or non-existing bit AP_REQ_CMP (however, 'c'
	flag is still recognized for compatibility. It's a no-op now).
	' lib/dict.c

	Rewritten to match both rfc 2138 and 2868.
	(encrypt_text,decrypt_text)
	(encrypt_tunnel_password,decrypt_tunnel_password): New functions.

	(_encode_pairlist): Decode attributes that have AP_ENCRYPT
	bits set.

	(proxy_request_recode): Changed prototype.

	(AP_ENCRYPT_RFC2138,AP_ENCRYPT_RFC2868): New defines.

	Minor change

2003-10-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(radius_send_reply): Bugfix

	Updated

	Raised version number to 1.1.92

	(tolower,toupper): New builtin functions.

	Initialize auth_reject_malformed_names flag.

	(radius_send_reply): Increase relevant statistics counters.

	(rad_auth_init): Send access-reject depending on the value of
	auth_reject_malformed_names.

	Added attributes from rfc2869.

	(auth_reject_malformed_names): New global

	Added new keywords.

	Added Maurice Makaay

	Updated

	Updated

	Updated calls to huntgroup_access().
	Improved "no huntgroup access" diagnostics.

	Updated calls to huntgroup_access().

	(huntgroup_access): Changed proto.

	Fixed 1st argument to socket()

	(common_init): Fixed order of calling the initialization
	functions.

	(radius_auth_req_decode)
	(radius_acct_req_decode): Removed improperly placed calls to
	forward_request.
	(radius_respond): Call forward_request().

	Recode the request if the remote server is listed in
	raddb/clients.

	(read_realms_entry): Fixed wording and priority of the diagnostic
	message.

	(read_raddb_file): Bugfix: loc.line was incremented twice
	per line.

	(_dict_attribute): New flag 'l'. Turns onlogging of an internal
	attribute.

	(proxy_request_recode): New function.
	(forward_request): Changed proto.

	(proxy_request_recode): New function

	Updated

	Updated

	(write_detail): Ignore attributes with AP_INTERNAL bit set.

	(_dict_attribute) Raise AP_INTERNAL flag for internal attributes.

	(AP_INTERNAL): New define. Marks internal attributes.

	(common_init): Call forward_init().

	(radius_auth_req_decode,radius_acct_req_decode): Request
	forwarding.

	Removed "retransmit" realms.

	Added forward.c

	New file

	(rad_cfg_forward_auth,rad_cfg_forward_acct,forward_init,forward_request):
	New functions.

	 Sample "forward" statements.

2003-10-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Do not load "rewrite".

	(proxy_send_request): Modified to handle
	"retransmit" realms. This fixes a memory leak, by the way.

	(rad_check_realm): Use new realm functions.

	(read_realms_entry): Initialize realm->args
	(realm_strip_p,realm_get_quota): New functions.

	(struct realm): striprealm,maxlogins removed.
		args: New member.
		(realm_strip_p,realm_get_quota): New functions.

	Minor change

2003-10-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added placeholders for two new nodes.

	Minor change

	Reset regcomp_flags before parsing.

	Force using case-sensitive basic regexps.

	(check_ts): Return -1 if the NAS type is not known

2003-10-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(regex_pragma): More diagnostics.

	(sfn_exec_wait): Explicitely clean up reply pairs on error.

	Reverted changes

2003-10-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Implement pragmatic comments. Currently
	only `#pragma regex' is defined, allowing to alter the
	type of regular expressions used.
	(bi_field): Return null string on error.

	(radius_exec_program, filter_auth): Clean up the reply pairs
	on error.

	(sfn_exec_wait): Change to
	as_reject on failure, since filter and exec
	clean up the reply pairs on error.

2003-10-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Evaluate attributes immediately before
	sending the reply. Make sure no extra attributes remain
	in the reply in case subsequent states choose to reject
	it.

	(bi_qprn): New builtin function.

2003-10-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Update

	Minor change

	(scheme_auth): Decrypt passwords before passing them on to Scheme.

	(radius_decrypt_request_pairs,radius_destroy_pairs): New
	functions.

2003-10-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Minor fix

	Replaced with a reference to `info progname'

	Updated

	Updated

	(reload_data): Load rewrite right after dictionaries.
	Require explicit dependency of users,hints,huntgroups on it.

	[!MAINTAINER_MODE] (COMMON_MTX): Bugfix.

	(auth,acct): Enable trace-rules.

	(radius_respond): Call radius_trace_path().
	(radius_req_register_locus): Take into account .*_acct_trace_rules
	variables.
	(radius_trace_path): New functions.

	(auth_trace_rules,acct_trace_rules): External
	variables.
	(radius_trace_path): New function.

	Raised patchlevel to 91

	Updated

	Handle trace-rules statements.
	 (auth_trace_rules,acct_trace_rules): New functions.

	(match_user,hints_setup,huntgroup_access): Remember used
	files/locations.

	(rad_auth_init): Removed irrelevant comment

	(radreq_free): Deallocate locus list.

	(parse_client_config): Fixed declaration.

	(radius_req_register_locus): New function.

	(typedef struct radius_req.locus_list): New member.

	Provide samples of trace-rules statement.

2003-10-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Restored dump option

	(fix_reply_pairs): Call compile_pair(). Warn about eventual use
	of Add-Port-To-IP-Address.

	(huntgroups,hints): Changed from explicit lists to RAD_LIST.

	(format_pair): New argument typeflag.

	Updated calls to format_pair().

	(avl_fprint): Added new argument: typeflag

	(format_pair): Changed declaration.

	(struct matching_rule): Removed `next'

	Updated

	Warning comment before Add-Port-To-IP-Address

	Removed support for Add-Port-To-IP-Address

	Removed va_dcl stuff.

	Updated to reflect recent changes to vlog and install_pair.

	(struct matching_rule): Keep full source location information.

	(struct user_symbol): Keep full source
	location information.
	(fix_check_pairs,fix_reply_pairs): Changed declaration.

	(LOCUS): New datatype.
	(read_raddb_file,parse_file,install_pair)
	(vlog,_debug_print): Changed proto.
	(radlog_loc): New function.

2003-10-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added missing include.

	Fixed handling of generic Ascend-.*-Filter attributes.

2003-10-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(pair_list production): Bugfix.

	Fixed some wording

	Use radius_eval_avl().

	(radius_eval_avl): New function

2003-09-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Restored reload_rewrite case

	Handle dotted-quad IP as numbers.
	Some bugfixes.

	(pop_source): Bugfix

	(symtab_iterate): Bugfix

	(rad_create_pdu): Added support for sending
	USR VSA attributes.
	(rad_decode_pdu): Fixed bug in handling
	USR VSA attributes.

	(envar_parse_internal): Fixed memory leak

	Raised version number to 1.1.90.

2003-09-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	List particular radius utilities in the main Info directory.

	(rad_rewrite_execute_string): Use rewrite_interpret

	New command "rewrite-stack". Changed short command names.

	Compile the A/V pairs marked as eval_interpret

	(hints_setup,huntgroup_access): Use rewrite_eval

	(filter_xlate): Use rewrite_interpret().

	(compare): Use rewrite_invoke().

	Properly handle precompiled attributes with deferred evaluation.

	(install_pair): Properly fill eval_type.
	For IPADDR attributes whose value is of the form "IP+",
	use Rewrite expression instead of adding fake
	Add-Port-To-IP-Address attribute.

	Reflect the changes in VALUE_PAIR struct.

	(interpret): Removed.
	(rewrite_interpret,rewrite_eval)
	(rewrite_invoke,rewrite_compile)
	(rewrite_get_stack_size,rewrite_set_stack_size): New function

	(enum avp_eval_type): New type.
	(struct value_pair): Removed `eval'. Added new member
	`eval_type'.

	(cfg_get_number): New function.

2003-09-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	New replacement keyword @SOURCEDIR@

	"rewrite" section extended

	Considerably improved.

	Minor indentation fix.

	(input production): Allow expr as the only
	input (for interpret() call).
	(interpret): Rewritten.
	(configuration block): Rewritten. Allow new keywords "load" and
	"load-path". By default, if no "load" statements were given,
	attempt to load the legacy file $radius_dir/rewrite.

	(radiusd_setup): Call rewrite_init().

	(reload_data): Removed case reload_rewrite.

	(rewrite_init,rewrite_stmt_term): New functions.

	Updated.

2003-09-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Bugfix

2003-09-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(users_sync): Updated declaration

	Check the return from users_sync(). Set yychar if it returns <= 0.

	(users_sync): Return the last read character.
	(pop_source): Check for context_stack==NULL before closing
	yyin.

2003-09-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed a typo.

	(drv_dejagnu): Remove the redirection of the radtest stderr.

	Test for Status-Server request.

	(tempvar_free): Do nothing if var is NULL.
	(radtest_send): var may be NULL.

	Changed 4th argument to send to be optional.

	(hints_setup): Handle RT_AUTHENTICATION_REQUEST.

	(rad_pdu_finish): Handle RT_AUTHENTICATION_REQUEST.

	(struct keyword auth_codes): Added RT_STATUS_SERVER.

	(radius_status_server): Added support for Status-Server request.

	(RT_STATUS_SERVER): New define

2003-08-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed cross-references

	Provide a brief summary of configuration files.

2003-08-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(radconf-locate-block): Minor change

	Removed obsolete proxy statement

	Added Markus Zahn <markus.zahn@rz.uni-augsburg.de>

	Minor change to allow for safe concatenating
	with other rw files (for the testsuite purposes)

	(radwtmp): Likewise.

	(pipe_read): Bugfix.
	(sig_handler): Use rad_reset_signal().
	(rpp_request_handler): Use rad_set_signal().

	(radiusd_daemon)
	(radiusd_signal_init): Use rad_set_signal().
	(sig_handler): Call rad_reset_signal().

	(radius_req_free): Removed spurious diagnostics.

	(radius_exec_program): Use rad_set_signal().

	(finger_check): Use rad_set_signal().

	(rad_set_signal,rad_reset_signal): New functions.

	Provide a proto for strchrnul if necessary.

	(signal_handler_t): New datatype
	(rad_set_signal,rad_reset_signal): New functions.

	Force gnits option

	Raised version number to 1.1.1
	Check for sigaction.

2003-08-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(nextkn): Advance past the closing quote in strings.

2003-07-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Minor change

	Updated

	Updated

	Updated

2003-07-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Choose the strictest timeout value between
	the one imposed by Login-Time attribute and the one set using
	Session-Timeout attribute.

	Renamed LIST to RAD_LIST to eliminate
	possible name clashes with the other libraries (namely,
	libmysqlclient)

	Bugfix

	Updated.

	Added c3620.rw

	Added link to PDF copy.

	Generate PDF on make webdoc.

2003-07-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(tsh_help): Use gettext.

	Official translation

2003-07-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(radiusd_main_loop): Open L_MAIN log channel.

	[!WITH_READLINE]: Several bugfixes.

	Updated

	Fixed debugging levels for cache functions

	Updated

	Added Lewis Watson

	(hints_setup): Bugfix. Failed to update
	req->request. Thanks to Lewis Watson <watson@visionsix.com>
	for helping to trace the bug.

	Updated

	Updated

2003-07-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	(argcv_string): Quote arguments containing whitespace.

	Removed test_shell() stuff.

	Added tsh.c

	New file. The improved test shell.

	New option --without-readline

	Updated

	(radiusd_setup) [USE_SNMP]: Initialize default SNMP port.
	(test_shell): New command 't' tests timespan specifications.

	(backslash): Minor fix. Recognize '\a'

	Minor change.

	Lots of changes.

	Combine indices into one.

	(radtest_send): Added extra argument.
	(tempvar_free,var_free): New functions

	Syntax improvement. "Send" command allows to
	specify retransmit count, delay between the retransmissions,
	request ID and whether the authenticator should be retained
	between the retransmissions. This allows to imitate
	retransmissions.

	[STANDALONE]: Removed ifdef blocks

	(radiusd_sql_clear_cache): New function.
	(sql_cache_destroy): Check for NULL argument.

	Moved log_open invocation to snmp_decode().

	(struct request_class request_class): Updated.
	(request_retransmit): New function.
	(struct request_closure.rawdata, rawsize): New members
	(_request_iterator): Use request_retransmit().

	(radius_req_decode): Removed
	(radius_auth_req_decode,radius_acct_req_decode): New functions.
	(_extract_pairs): Bugfix.
	(test_shell): New command 't' tests timespan specifications.

	(hints_setup): Create Orig-User-Name using canonical way.

	(copy_string): Recognize character escapes in strings.

	(read_number): Removed. Use obstack_grow_backslash_num() instead.

	Check for invalid input value

	(rad_clt_send0): New function.
		(rad_clt_send): Rewritten.

	Fixed comment

	(radiusd_sql_clear_cache): New function

	(radius_req_decode): Removed
	(radius_auth_req_decode,radius_acct_req_decode): New functions.

	(obstack_grow_backslash_num)
	(obstack_grow_backslash,rad_clt_send0): New function.

2003-07-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Update for eventual 1.1

	Raised version number to 1.1

	Update

	Implemented caching for query results.

	(SQL_TUPLE,SQL_RESULT): New datatypes.
	(struct sql_connection): New members cache,head,tail

	(AF_LHS,AF_RHS,AP_USER_FLAG): Fixed overlap.

2003-07-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(radius_exec_program): Bugfix. Close stdout
	in child process. Thanks to Dale <lnxus@yahoo.com> for
	help in tracing the bug.

	(fix_check_pairs): Take into account
	eventual CHAP-Password for Auth-Type=Local. Thanks to Cornel
	Cristea for reporting.

2003-07-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(_get_value): Bugfix. Coerce CFG_NETWORK to CFG_IPADDR.

2003-07-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rad_decode_pair,rad_decode_pdu): Changed attrlen type from int
	to size_t
	(decode_vsa): Fixed a gross bug.

	Changed length type from int to size_t

	Added Anderson Nadal

	(_dict_attribute,attr_number_to_dict): Bugfix
	Check the range of the attribute before indexing the
	dict_attr_index array. Thanks to Anderson Nadal
	<security@onda.com.br> for reporting and helping to
	trace the bug.

	Raised version number to 1.0.1

2003-07-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(install-data-local): Use DESTDIR

	Bugfix. Removed leftover ETC_DIR

2003-07-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rad_decode_pdu): Do not stop decoding
	upon encountering of an unknown or malformed attribute.
	Thanks Christian Schrader <c.schrader@gkas.de> for
	giving access to his box.

	Changed handling of PS,GETOPT and M4 variables.

	Added Christian Schrader

2003-07-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Official translations

2003-06-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Minor change

	Spell check

	Updated

	Updated for 1.0

	Minor change

	Added copyleft header

	Added hints-0.96

	Documented new keywords.

	Raised version number to 1.0

	Updated

	Updated

	Fixed wording in diagnostics

2003-06-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Syntax cleanup.

	Updated

	(rad_sql_init): Allow server name to start with a / (means
	postgres socket).

	Use eval instead of eval_x

	Test for getopt_long_only: argp requires this

	Include <locale.h>

	Removed <malloc.h>

	Include <gettext.h>

	Update

	 Moved include <gettext.h> to radius.h

2003-06-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed superfluous declarations.

	Bugfix

	Added gettext.h

	Use gettext.h

	Updated

	Added to the repository

	Support for the obsolete statements.

	Added

	Removed

	Removed handling for queue and memory related OIDs. This should
	be revised in the future release.

	Fixed LIBLIST rule

	Minor change

	(cfg_ignore,cfg_obsolete): New functions

	Updated the FSF address

	Rewritten for the new database structure.

	Create naspools table. Changed structure of the ippool

2003-06-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Use @copying statement. Fixed the two-column output in
	"Published by"

	Added fdl.texi

	Updated FSF address

	(rad_odbc_column): Fixed type of the second parameter.

	(FILELIST): Modified

	(LIBLIST): Modified

2003-06-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Made configurable for postgres.

	Correctly handle zero returns from the initial reads.

	Comment on read/write timeouts.

	(COPY): Fixed macro

	Minor change

	Updated

	Fixed FILELIST rule

2003-06-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Impose timeouts on master I/O operations.

	Minor changes.

	(radiusd_write_timeout,radiusd_read_timeout):New variables.

	Use AC_HELP_STRING. Patch courtesy Wojciech Polak <polak@gnu.org>

2003-06-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Minor change.

	Fixed request-cleanup-delay formula

	(rad_sql_checkgroup): Do not print spurious diagnostics.

	Updated

	(request_handle): Use request_drop when the maximum number of
	children is reached.

	(rscm_server_init): New function

	Added new files

	Revised

	(catch_body): Call rscm_server_init
	(scheme_auth,scheme_acct): Emit a notice if the procedure had
	failed

	(sfn_scheme): Explicitly emit warning if the scheme procedure
	denies authentication.

	(radscm_datum_to_scm,(radscm_scm_to_ival,radscm_rewrite_execute):
	New declarations.

	Set privs for ippool

	Create ippool table

2003-06-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(attr_to_str): Do not recompute the string
	length on binary attributes.
	(obstack_grow_quoted): Quote unprintable characters.

	(terminate_subprocesses): Bugfix.
	(max_ttl): New function.
	(radiusd_flush_queue): Use max_ttl

	Marked several attributes as binary strings.

	Added gettext 0.12.1 files.

	Accept 'b' property to mark binary string attributes.

	(AP_BINARY_STRING): New flag.

	Switched to gettext 0.12.1. Raised patchlevel.

2003-06-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rpp_flush): Call user-supplied function at the end of each loop.
	(sig_handler): Exit on SIGALRM

	(radiusd_preconfig_hook): Rewritten.
	(radiusd_postconfig_hook): Do not check the number of open
	channels if not in daemon mode.
	(radiusd_suspend,radiusd_continue): Terminate subprocesses
	before proceeding.
	(radiusd_restart): Run the preconfig hooks before respawning.
	(radiusd_flush_queue): Do not wait for the subprocesses longer
	than the maximum ttl value.
	(option_stmt): New keyword process-idle-timeout.

	(input_select_channel): New function.

	(process_timeout): New global
	(input_select_channel): New function.
	(rpp_flush): Changed declaration

	Added process-idle-timeout

	Updated.

	Updated AUTOMAKE_OPTIONS

2003-06-11  Lisa M. Opus Goldstein  <opus@gnu.org>

	changed license.  Tried to format more contact info.

2003-06-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Bugfix

	(scheme_auth): Minor fix

	(attr_to_str): Do not recalculate string length to allow for
	passing binary strings.

	Added some automake options

2003-06-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(ttl-reply-string): Use (substring).

	(silent_close_port): Use eval_close_port() wrapper.

	Use typed avp_create functions.

	(radius_req_decode): If the NAS stored the
	CHAP challenge in the authenticator, create the CHAP-Challenge
	attribute.

	(menu_reply, menu_read_text): New functions.

	(avp_create_integer,avp_create_string,avp_create_binary):
	New functions.
	(avp_create): Changed semantics.

	Minor change

	Update

	(shmem_alloc): Bugfix.

	(rpp_request_handler): Use new reply structure.
	(rpp_update): New function.

	(request_free,request_xmit,request_forward,_request_iterator):
	Updated.

	(radius_req_xmit): Rewritten

	(proxy_retry): Rewritten

	(_parse_server): Bugfix.

	(struct request_class.xmit,radius_req_xmit, proxy_retry):
	Changed declaration.

2003-06-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated.

	(radiusd_main_loop): Reverted yesterday's change.

	(radius_req_update): Check if the request IDs match.

	(proxy_send_request): Send the update to the master before
	sending the request.

	(struct input_method.prio): New member.
	(input_register_method): Added prio parameter.
	(input_select): Handle descriptors according to their method's
	priorities.

	(struct request): Removed update and  update_size members.
	(RADIUSD_UPDATE.id): New member

	(list_insert_sorted): New function.

2003-06-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	New "storage" statements: file and perms.

	Updated

	(radiusd_main_loop): Put back the timeout. It is necessary for
	rpp channels.

2003-06-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	(scheme_auth,scheme_acct): Added diagnostics.

	(radius_req_failure,radius_respond): Update statistics.

	Minor change.

	(radius_exec_program): Removed unused last argument.

	Removed last argument in calls to radius_exec_program().

	Removed legacy handling of Service-Type=Authenticate-Only.

	(PROXY_STATE): Revised.
	(radius_exec_program): Removed unused last argument.

	Updated

	(rpp_count): New function.

	(request_xmit): Extra argument

	(radiusd_preconfig_hook): Send SIGKILL
	to those children that do not exit in 2 seconds.
	(radiusd_postconfig_hook): Warn if no radius sockets were
	opened.

	(input_iterate_channels): New function.

	(input_iterate_channels,rpp_count): New functions.

	Updated

	(radius_req_xmit): Take an argument. Call proxy_retry() when
	appropriate.

	(proxy_retry): Changed declaration.

	(struct request_class.xmit): Extra argument: the original
	request data.

	Updated

	A sample of storage statement.

	(storage_stmt): New declaration.

	Make stat_port_count and stat_nas_count configurable via the
	configuration block statement "storage"

	(snmp_stmt): Added "storage" block statement.

	(snmp_attach_nas_stat): Bugfix

	(snmpserv_after_config_hook): Call snmp_init_nas_stat()

	Do not use assert().

	Updated

	Use e- memory functions.

	(shmem_alloc): Fixed initial size of the statistics file.

	Removed proxy block

	Updated.

	New file.

	Removed. Autogenerated file.

	Minor bugfix.

	Use no-libtool for gettext, set default authentication port to
	1812. Create raddb/client.conf.

	Add -I$(top_srcdir)/include to intl/Makefile.in

	(radiusd_main_loop): Do not set timeout.

2003-06-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Removed mem.c, alloc.c

	 Added debugging calls

	(proxy_cmp): Compare only those requests that
	have Proxy-State attribute. The heuristic used so far for the
	requests lacking Proxy-State, caused normal requests to be
	interpreted as proxy ones at random intervals.

	Removed oids related to the previously used memory system.

	(string_replace): New implementation.

	(timespan_day): Fixed semantics of time spans that straddle the
	00:00 boundary.

2003-06-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(_acl_iterator): Fixed coredump on NULL communities.
	(snmp_agent_response): Fixed memory leaks on nonexisting OIDs.

2003-05-30  Lisa M. Opus Goldstein  <opus@gnu.org>

	edited command description

	edited function

	edited acknowledgement section

2003-05-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed copyleft statement.

	(Acknowledgements): New node.

	(Proxy-Replied): New node.

	Updated

	(proxy_send): Use avp_null_string().

	(paircmp): Added extra argument to return
	the stripped username.
	(hints_pairmatch,presuf_setup): Removed.
	(hints_setup): Use paircmp. Add Proxy-Replied attribute
	to the request if it was a proxy reply.

	(rad_auth_init): hints_setup moved to radius_respond().

	(rad_accounting): hints_setup moved to radius_respond().

	(Proxy-Replied): New attribute

	(avp_null_string): New function

	Minor change

	(radius_respond): Call hints_setup
	before any processing. Side effect: for proxy replies
	hints are processed twice.

2003-05-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed copyleft statement.

	Added new file.

	Document outfile statement.

	(hints_setup): Work even if the request lacks User-Name

	Removed the ComOS hack.

	New configuration keyword "outfile"

	Updated

	Override the default rule for radius.pdf.

	(stat_get_port_index): Bugfix.

	(pipe_write,pipe_read): Use simple write/read calls.
	(sig_handler): Use radiusd_exit0().

	radiusd_exit0): New function.

	Raised the patchlevel

2003-05-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	Minor change

2003-05-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Agregado al repositorio

2003-05-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Use @small... commands

	Rearranged chapters.

2003-05-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Downcase @var{} arguments. Provide a cross-reference to Guile
	format function.

	Minor change

2003-05-23  Lisa M. Opus Goldstein  <opus@gnu.org>

	last revisions

2003-05-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rpp_request_handler): Call scheme_redirect_output().

	(scheme_redirect_output): New function.

	Updated

	Minor change

	Corrections by Joe Fineman

	Flush

2003-05-21  Lisa M. Opus Goldstein  <opus@gnu.org>

	More files edited by Joe

	two more changes by joe

2003-05-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Corrections by Joe Fineman

	Flushed

2003-05-20  Lisa M. Opus Goldstein  <opus@gnu.org>

	uploading latest changes by Joe.

2003-05-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed node `Common Filters'

	Removed no longer relevant keywords print-tid and common.

	Minor changes in wording.

	Updated

	Corrections by Joe Fineman

	Flushed changes

2003-05-15  Lisa M. Opus Goldstein  <opus@gnu.org>

	edited version of files by Joe Fineman

2003-05-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	(radiusd_cleanup): Print the status of each(radiusd_cleanup):
	Print the status of each exited child.
	(radiusd_signal_init): Do not catch SIGTRAP

	(FILELIST:): Fixed.

	(rad_acct_system): Bugfix. Thanks Alex Deiter
	<tiamat@komi.mts.ru> for noticing. Strange it wasn't noticed
	so far, possibly no one is using ComOS now, I'd better remove this
	part of code?

	Bugfixes.

	(list_remove): Check for p==NULL

	Removed #undef DEBUG_ONLY

	New request state: RS_XMIT

	Raised version number.

2003-05-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Rewritten ACL subsystem using generic lists.

	(radiusd_preconfig_hook): Call input_close_channels() last.

	(channel_close): Free the memory

	Fixed iterators to correctly handle iterator_next() after removal
	of the current item

2003-04-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated copyleft headers.

	Do not use debug(). Under the new framework it causes infinite
	recursion.

	(radscm_rewrite_execute): Fixed improper return type.

	Use iterators

	Implemented list iterators.

	Added list.h

	Updated

	Protect SNMP-specific code by #ifdef

	Somewhat regretfully moved from K&R to ANSI syntax. Updated
	copyleft headers.

2003-04-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed slist.[ch]

	Reflect changes to the client sub-system.

	 Use lists from list.c.

	(list_remove_current, list_remove): Bugfix

2003-04-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed legacy PROXY_ID stuff.

	(reload_data): Removed call to proxy_cleanup().

	Removed deleted files.

	 (radmsgid_path): New variable.

	Get message IDs from the file on a per server basis

	(RADMSGID): New define.

	(PROXY_ID,proxy_cleanup): Removed.

	(SERVER_ID): New datatype.
	(RADIUS_SERVER): Added id_offset member.
	(RADIUS_SERVER_QUEUE): Removed messg_id.

2003-04-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(request_stat_list): New function.

	Reverted to mmapped memory approach.

	Re-introduced SNMP

	(read_naslist_file): Attach nas_stat data.

	Updated.

	(Server_stat,SNMP_REQ): Modified
	(stat_inc): Modified
	(server_stat): Pointer
	(request_stat_list): New function.
	(udp_open): Declaration changed.

	Add AC_FUNC_MMAP

2003-04-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	(simple_radius_test): Missed global declaration

	Minor compatibility fixes.

	Added back Scheme

	Include stdlib.h

	(radiusd_main,scheme_boot): New functions
	(rad_boot): Removed.

	Removed guile warning

	Updated

	(postgres_conninfo): Bugfix.

	(rpp_start_process): Raise ready flag
	(rpp_ready): Changed declaration
	(rpp_request_handler,rpp_input_handler): Changed reply algorithm

	Handle proxy requests.

	(spawn_flag): Removed `static' qualifier.
	(common_init): Register "rpp" method first (Note: very important
	for proxying).
	(proxy_stmt): Removed.

	(radius_req_cmp): Compare proxy requests.
	Updated return values.
	(radius_req_update): New function.

	Lots of changes.

	The order of input methods in the
	list defines the the order of polling the
	file descriptors.

	(R_PROXY): Removed
	(RS_PROXY): New request state.
	(RCMP_NE,RCMP_EQ,RCMP_PROXY): Request comparison results.
	(struct request): New member `orig'
	(struct request_class): New member `update'
	(RADIUS_UPDATE): New type
	(radius_req_update): New prototype
	(proxy_send,proxy_receive): Changed declaration

2003-04-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Not needed anymore

	support for the new multiprocess model

	Reverted to the multiprocess model

2003-02-24  Daniel Barowy  <dan@barowy.net>

	Updated ChangeLog.

	Some grammatical changes.

2003-02-11  Daniel Barowy  <dan@barowy.net>

	updated ChangeLog

2003-02-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Use @radiusd{} where appropriate.

	Removed stray @xref

	(rad_odbc_column): Bugfix.

	(filter_kill): Fixed indentation.

	(Ascend-CBCP-Enable,Ascend-CBCP-Mode): Added attributes and the
	corresponding values.

	Added debugmod.h to MAINTAINERCLEANFILES

2003-02-04  Daniel Barowy  <dan@barowy.net>

	changed macro @radius{} to @radiusd{} for clarity

	copyright holder change, grammar, spelling, rewording

	minor rewordings, copyright holder change

	copyright holder change, added high server load section

	removed redundant RADIUS info; grammar and rewording changes

2003-01-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed texinfo syntax

2003-01-31  Daniel Barowy  <dan@barowy.net>

	Modified the changelog

	grammar corrections and minor rewordings for clarification

2003-01-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Added to the repository

2003-01-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(snmp_session_create): Fixed memory leak.

	Define PAM_SM_SESSION

2003-01-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Removed

	Removed mktest.awk

2003-01-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	Removed autogenerated file

	Update

	(nas_port_fh): Bugfix.

	Initial implementation of session management

	Raised prerequisite autoconf version to 2.57
	AC_INIT: Let autoconf determine the package name.

2002-12-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Update

	(ref_ipp): New variable.

	(get_socket_addr): Use ref_ip if the socket was bound to
	INADDR_ANY.
	(proxy_compare_request): Compare request proxy id and remote
	server IP as well

	Reordered EXTRA_DIST to separate radius files  from those added
	by autopoint.

	Minor Updated

	(get_first_ip): New function. A more sophisticated  version
	of radiusd.c:getmyip().

	(ref_ip): New variable.

	Use -pthread instead of -lc_r on BSD systems.

2002-12-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Remove

	Deleted

2002-12-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Added comp.texi

2002-12-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Minor changes

	Replaced texi2html with texi2html.diff

	A patch to fix texi2html 1.64 to correctly handle @macro
	declarations.

	Removed

	Major changes

	Changed rules for creating web	documentation.

	Finished cleaning up

	AC_CONFIG_AUX_DIR([scripts])

	Updated

	Moved ylwrap to scripts

	Removed autogenerated file

	Updated for gettext 0.11.5

	Removed -I m4 from the autoreconf command line.

	Require gettext version 0.11.5

	Updated

	Deleted autogenerated files

	Changed the way of removing the
	handlers. rad_signal_remove() marks the handler with
	SH_DELETED, then it is actually deleted when signal
	thread awakes and processes the signal queue.

	(_signal_entry_runqueue): Remove deleted handlers.
	Do not stop when a handler returns success.

	(_signal_deliver): Reflect the above changes.

	(filter_runtime_data): New member 'stopped'
	(filter_close): Do not remove signal handler until SIGCHLD
	 arrives.
	(filter_kill): New function.
	(filter_open): Handle stopped filters. When using included
	libintl, use
	only intl/libgnuintl.h. Using system default libintl.h
	on systems with older libintls causes random coredumps.

	New signal handler state SH_DELETED.

	Require need-ngettext for AM_GNU_GETTEXT.

2002-12-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated.

	Removed radpaths.h

	Removed radpaths.h and radius_dir.

	Add radiusd.pid to distclean-local.

	(simple_radius_test): Output timestamp along with the diagnostics.

	Got rid of ETC_DIR. Usual sysconfdir is used

	Got rid of ETC_DIR. Usual sysconfdir is used instead

	Updated

	Removed stray backslash.

	Rewritten using pam_LTLIBRARIES.
	Pass -Bsymbolic to the loader in order to prevent the resulting
	module from resolving the references using the caller executable.

2002-12-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	Updated

	(sig_exit,sig_fatal,sig_hup,sig_dumpdb):  Reflect changes in
	include/radiusd.h.

	(exec_sigchld): Signal handler for exec-program. Removes the rests
	of the zombi process.
	(radius_exec_program): Install a handler for exec-program
	binaries.

	(_signal_entry_runqueue): Pass id to the handler.

	(rad_signal_t): Added extra argument: the identifier of this
	handler.

	Updated

	Include <config.h>

	updated

	(default_radiusd_stop): Call radius_exit; (simple_radius_test):
	New flag -prereq is used to specify  the prerequisite capabilities
	for the given test.

	(start_server): Removed -w0

	Removed RADIUS_MODULE_ define. Calling debugging functions from
	signal handlers is unsafe.

	Fixed comment.

	Removed --watcher mode. Install default SIGCHLD handler for
	waitpid to work.

	Simplified waiting for exec-program-wait

	Got rid of risky usage of longjmp from the signal handler.

	(sun_signal): Removed; (install_signal): New function.

	Removed RADIUSD_WATCHER_FILE

	Removed --enable-notify altogether. Added warning about
	--with-server-guile

	Merged news entries from 0.96 maintenance series.

2002-12-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added to the repository

	(send_challenge): Preserve Proxy-State	in challenges.

	(rad_create_pdu): Added debugging message

	(rad_srv_send_challenge): Honour radreq->reply_pairs.

	Raised version number to 0.99.98

2002-12-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	generated file

	Testsuite remade

	Removed debugging directives.
	(signal_thread0): Use pthread_cond_timedwait()

	Added testsuite

	Removed autogenerated file

	Require autoconf 2.54
	(AC_PROG_RANLIB): Removed.
	(AC_OUTPUT): Create radiusd/testsuite subdirs, do not create
	test

	Removed test subdirectory

	Updated

	added to the repository

	Added to the repository

	Added

	Moved from /test/raddb

	Removed in favor of /radiusd/testsuite

2002-12-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Use include/regexp1.h instead

	Updated

	(runtest): Fixed scanning for testcases.

	Allow to override AWK variable in the shel version of stress test.

	Handle [] in po files.

	Include <regex1.h>

	Use new signal handling functions.

	Changed SIGCHLD handling. This enables Exec-Program-Wait to work
	on non-posix systems.

	Added signal.c

	New file. Contains functions for the signal handling thread.

	Define WITH_INCLUDED_REGEX.

	Use AM_CPPFLAGS instead of CPPFLAGS.

	Use AM_LDFLAGS instead of LDFLAGS.

	(rad_sigid_t,rad_signal_t): New data types;
	(rad_signal_install,rad_signal_remove): New functions.

	Fixed inclusion of <../lib/argp.h> vs.	<argp.h>

	Added regex1.h

	New file. A dispatcher between system
	<regex.h> and included <rx.h> depending on configuration
	settings.

	Check for argp.h. If it is not present, force
	using included argp library.
	Fixed inclusion of libgnuintl.h vs. libintl.h

	autogen.sh: Use autoreconf

2002-12-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	New user.

	Added ascend.bin

	Added testcase for getting Ascend-Data-Filter attribute from
	exec-program-wait.

	(attr_to_str): Decode DA_CHAP_PASSWORD; Use %lu when printing
	numeric attributes.

	(userparse): Use install_pair

	(radius_exec_program): Call avl_free() after  merging the
	two lists.

	(Hint): Fixed syntax flags.

	Allow octal and hex char representations in strings.

	(rad_decode_pdu): Hack for non-compliant USR VSA

	(read_raddb_file): Fix counting of the input lines.

2002-09-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated.

	(sfn_exec_wait, sfn_exec_nowait): Allow multiple Exec-Program
	attributes.

	Always declare rad_scm_cell.

	Removed rad_scm_cell override.

	Override CPPFLAGS when checking for the headers.

2002-08-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed relaying of Access-Challenge requests

	Changed order of includes

	Test relaying of Access-Challenge requests.

	(radiusd_respond,rad_req_setup): Handle RT_ACCESS_CHALLENGE

	Handle RT_ACCESS_CHALLENGE.

	Marked menu-related attributes with propagation bit. Removed
	'c' bits.

	(rad_encode_pair): Bugfix: Was cutting off the
	last character from string attributes AUTH_STRING_LEN bytes
	long.
	(rad_decode_pair) Fixed attribute length check. It was not
	allowing
	attributes AUTH_STRING_LEN bytes long.

2002-08-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	file README.securid was initially added on branch v0_96p2.

2002-08-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	(filters -> acct): Fixed typo

	(main): Fixed bug: too few elements were allocated for x_argv.

	Change comment starter to --
	(to enable substitutions in #! lines).

	(rad_req_recode): New function. Recode
	all password attributes in the request.
	(rad_req_cmp): Rewritten again (ouff!)

2002-08-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Sample compare-atribute-flag statement

	(rad_req_cmp): Rewritten.
	Implemented {auth,acct}->compare-atribute-flag in config.

	Allow user-defined attribute properties.

	(avl_cmp): Take third argument: flags (attribute
	properties) that should be present in order for the attribute
	to take part in comparison.

	Removed unneded stuff

2002-08-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Namespace normalization in mem.c and radiusd.h

	Normalized namespace. Round the size argument to mem_alloc to
	the next nearest Align_t boundary.

2002-07-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	file sybase.c was initially added on branch v0_96p2.

	file securid.c was initially added on branch v0_96p2.

	Updated

	Provide "before" and "after" configuration hooks

	(reconfigure): rewritten

	Removed superfluous "ready" diagnostics.

	include/radiusd.h (config_hook_fp): new datatype.;
	(.*_config_hook): New functions

2002-07-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Restored state->next-1. Have to analyze it more carefully

	Fixed

	Updated

	Added radiusd/sockets.c

	Sample snmp.listen statement.

	Implement "listen" statement.

	Removed socket_list_.* functions

	Functions for handling socket lists.

	Added sockets.c

	(SOCKET_LIST, struct request_handler_tab): new types. (R_NONE):
	New define

	Raised patchlevel to 0.99.97

	Changed format to match GNU current practice.

	Updated

	Some fixes

	Correctly handle cases (for synthetic languages) in implicit
	coercion warning.

	(rad_sql_acct): Call radlog_req once at the end of the function.

	Added missed modules.

	Updated

2002-07-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	added support for recent changes in config. filter->auth and
	filter->acct are not handled yet.

	Added ru.po

2002-07-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Provide a wrapper for ngettext() in case when NLS is not desired.

	Correctly handle plurals in diagnostics.

2002-07-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	updated

	Changed run_rewrite invocations to conform to the new prototypes.

	Changed protos of rewrite interface functions to take RADIUS_REQ*
	instead of VALUE_PAIRS*. %[User-Password] returns password
	in cleartext.

	Cleaned up wording of the diagnostics

	(rad_cleanup_thread0): Call filter_cleanup().

	(filter_cleanup): Cleanup handler. When the thread is cancelled,
	closes any filters associated with it.

2002-07-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Mention pl.po

	Updated.

	(version): Do not mention "deny shell".

	(radius_exec_program): Fixed typo in diagnostics.

	(obsolete): Removed

	Added polish localization

	Added Krzysztof Kopera.

2002-07-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(parse_opt): Reverted the change from
	2002-05-17 which was actually introduction of a bug.

	Updated

	Updated.

	(mtx_bool): Fixed boolean shortcut optimization.

	(channel_syslog_handler): Bugfix. Thanks to Ilguiz Latypov
	<ilatypov@superbt.com>.

	Updated.

	Updated

	(radiusd_watcher): Use format_exit_status to output exit status
	diagnostics.
	(radiusd_exit,radiusd_restart): Protect radiusd_sql_shutdown()
	by #ifdef.
	Definition of timercmp moved to sysdep.h

	Use format_exit_status to output exit status diagnostics.

	(format_exit_status): New function. Properly format child
	exit status
	diagnostics.

	Add definition of timercmp (just on case).

2002-07-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Fix

	Pass -w0 to radiusd.

	Use radiusd_mutex_lock.

	Changes to watcher mode.

	Allow multiple Acct-Ext-Program attributes.

	 Use thread-safe functions.

	(unix_pass): Rewritten to be thread-safe.

	Do not use stream functions. Operate on file descriptors directly.

	Cancel-safety.

	 Added getgr.c and getpw_r.c.

	A thread-safe version of getpwnam.

	A thread-safe version of getgrnam.

	New defines RADIUSD_PID_FILE and RADIUSD_WATCHER_FILE.

	New request states RS_HUNG and RS_DEAD.

	Include pwd.h and grp.h. Added protos for getpw/getgr functions.

	Do not build server guile support by default. Sad.

2002-07-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	`common' keyword in `filter' block.

	Implemented per-thread filters.

	Updated

	New built-in functions: inet_ntoa, inet_aton, htonl, ntohl,
	htons, ntohs.

	(request_process_command,request_thread_command): eliminated
	sleep.

	Renamed reread_config -> reconfigure.

	Added filter.rw

	Provide a sample filter input generator for testing.

	Fixed obsolete debug level specification.

	Added `filters' block

	Added profiles for testing filter functionality

	Added filter.

	Sample filter

	(Filter): New test.

	(TOOLDIR): Clear the directory if it exists.

	Implemented reading filter accounting
	replies, use of rewrite functions as input generators, and
	redirection of a process stderr into a file (error-log
	statement).

2002-07-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(filter_auth, filter_acct): Check for sym==NULL after filter_open.

2002-07-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(sig_fatal): Restored diagnostics output.

	(request_flush_list): Take into account RS_WAITING requests.

	(filter_open): Return the filter unlocked.
	(filter_auth,filter_acct): Install cleanup handler before
	actually locking the filter.

2002-07-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(request_put): Bugfix in queue handling.

	(filter_close): Avoid closing the filter twice.
	(filter_open): Unlock the filter _after_ closing it.

	(flush_seg): Missed cast to u_char.

2002-07-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated syntax of filters block.

	Changed handling of fatal signals.
	(sig_fatal): Simply aborts. Calling radlog() seems to
	be unsafe in signal handler context.
	(sig_watcher): Print exit status of the watched process.

	filter_ functions rewritten to make sure there are no simultaneous
	accesses to a single filter.
	(radius_run_filter): Close all open descriptors.
	(struct filter_symbol): Introduced two wait_reply flags: for
	auth and
	for accounting processes.

2002-07-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	protect fgets with a cleanup handler

	Updated

	Synchronized with the recent bugfixes in 0.96 trunk.

	(request_thread_command): Changed while() loop to sleep() until
	I figure out what to do here.

	Support for Auth-Type = Ignore.

	Added new Auth-Type = Ignore. It means
	to ignore the request silently (no reply is sent to the
	NAS).

	(AUTH_IGNORE): New define.

	Changed declaration of install_pair. Removed local definition
	of it

	Changed declaration of install_pair.

	Updated

	Additional includes to compile on alpha.

	rad_common_argp_child was improperly declared.
	(main) Protect invocation of pthread_atfork with ifdef.
	This is temporary. Possibly I'll have to revive the
	%radius-sockets scheme hack.

	rad_common_argp_child was improperly declared

	Check for pthread_atfork and libintl.h.
	If BUILD_INCLUDED_LIBINTL os defined add -Iintl to
	the INCLUDEPATH.
	When compiling with --disable-nls provide an empty
	define for dgettext (needed for included argp stuff).

2002-07-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	Bugfix

	Updated

	Example of filters statement

	(rad_acct_ext): Interpret the value of
	Exec-Program-Wait attribute: if it starts with / it
	is a name and command line of an external program to run,
	if it starts with a |, it is the identifier of a filter
	program to use.

	(rad_acct_ext): Interpret the value of
	Acct-Ext-Program attribute: if it starts with / it
	is a name and command line of an external program to run,
	if it starts with a |, it is the identifier of a filter
	program to use.

	(install_pair): Allow Exec-Program attribute value to start with
	|, meaning filter-id.

	Added support for filter programs.

	Handle SIGCHLD.; (acct_stmt_begin): Bugfix.; Added "filters"
	statement.

	(snmp_stmt_begin): Bugfix; (snmp_add_acl): Bugfix: ntohl to
	ipaddr and netmask.

	(get_priority): Bugfix; (category_set_level): Clear debug levels
	before setting them.(category_set_level): Clear debug levels
	before setting them.

	(_dict_attribute): Bugfix, dict_attr_index[n] was set incorrectly
	for vendor-specific attributes.

	(snmp_stmt_begin): Bugfix
	(filters_stmt_term, filters_stmt): new externs.

2002-07-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Rewritten configuration file parser for radiusd. The new
	parser defines only basic configuration file synax. The
	complete syntax description is given to the main parser
	function cfg_parse() as an argument. Thus, the same function
	may be used for several configuration files. Hopefully, this
	will serve when I start unifying the confguration files.

	Added configuration-related data.

	Updated

	Completely rewritten.

	(rad_check_ts): checkrad_assume_logged is now global

	(request_put): max_requests is now global.

	(radius_exec_program): exec_user is now global.

	Removed config.kw and related rules.

	Include cfg.h. Replaced Config with three separage global
	variables.
	Removed HOSTDECL type. Added declarations for the new functions
	and
	variables.

	Removed struct {} Value.

	Added to repository.

	Add cfg.h

	Added more sample statements.

	Removed gperf-related issues

2002-07-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

2002-07-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed %radius-sockets hack introduced the day before.

	Install pre-fork child handler that closes all socket descriptors.
	This allows to remove %radius-sockets from scheme.c

	Updated

	(disp_sql_drop): Call disconnect only if (conn &&
	conn->connected).

	(sql_conn_destroy): Removed if (data) condition.
	The destructor gets called only if its associated pointer is
	non-null.
	(rad_sql_thread_cleanup): Bugfix: Do not free the connections.
	They will be freed by sql_conn_destroy.

	Updated

	(rad_sql_checkgroup): Install an additional cleanup handler.

	Bugfix.

	Additional checks on arguments

2002-07-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

2002-07-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed call to scheme_end_reconfig().

	Added Cornel Cristea

	(Expiration): Fixed properties.

	Provisions for Expiration test

	(Expiration): new test.

	(sfn_validate): Handle check_expiration() value.

	(scheme_before_reconfig,scheme_after_reconfig,
	socket_list_iterate): New function prototypes.

	Fork-safety: store fd's opened so far in a list named
	%radius-sockets
	so that close-all-ports-except works correctly. Added new function
	scheme_after_reconfig().

	(reread_config): Call scheme_before_reconfig()
	and scheme_after_reconfig() where appropriate.
	(socket_list_iterate): New function.

2002-07-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rad_decode_pdu): Add NAS-IP-Address to the packet if the NAS
	didn't send one.

2002-06-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	removed

	Updated

	added

	(rewrite target): Updated

	(boot_body): Bugfix.

	Initialize rewrite_stack_size.

	Removed config.syntax and rewrite.full

	raddb/config.syntax

	Added examples/

	Added

	Updated

	Example of rewrite statement.

	(request_stack_size): extern decl.

	New statements: rewrite, stack-size

	Rewritten to allow for simultaneous execution.

	Updated

2002-06-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Example of task-timeout statement.

	Updated.

	(scheme_task_timeout): extern declaration.

	(guile_def): new configuration statement `task-timeout'

	An attempt to work around the bottleneck problem (see comment
	at the top of the file).

2002-06-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated comment.

	Set SIGCHLD to SIG_DFL (needed by exec.c)

	Allow user to pass arbitrary A/V pairs from the command line.

2002-06-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Use Pthread_mutex_* functions

	Updated

	(rad_mysql_disconnect): set ->data to NULL.

	(disp_sql_disconnect): Check ->connected before proceeding.

	Use User-Password instead of obsolete Password.

	(rad_sql_shutdown_thread): Perform sql shutdown within a single
	thread.
	(rad_sql_shutdown): Implemented.
	(attach_sql_connection,detach_sql_connection): Removed unused
	second argument.

	(request_thread_command,request_process_command): New functions

	(rad_req_xmit): Cleaned wording in the comment.
	(rad_restart) Added call to rad_sql_shitdown.

	Cleaned wording in comment.

	(rad_acct_system): Removed empty else block.

	(Pthread_mutex_lock,Pthread_mutex_unlock): new macros, taken
	from request.c
	(request_thread_command_fp): New typedef.
	(request_thread_command): New function prototype.

2002-06-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(radius_exec_program): Handle eventual cancellation.

	(rad_check_multi): Fixed MPP validation.

2002-06-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	handle eventual cancellation.

	(rad_cleanup_thread0): decrement num_threads

	(rad_thread_init): start threads in deferred cancel mode.

	(disp_sql_drop): new function.

	new argument to disconnect()

	(SQL_DISPATCH_TAB): new argument to disconnect

2002-06-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Documented `delete' and `%[attr](n)'.

	Implemented `delete' and `%[attr](n)'.

	(avl_find_n, avl_delete_n): New functions.

2002-06-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	Added Jaime Tellez Sanchez

	Print tid in decimal

	(channel_name production): initialize `channel' with zeroes.

	Raised patchlevel

2002-06-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Update

	Always create the pidfile.

	Updated

	(rad_cleanup_thread0): a placeholder for the cleanup function.
	(request_put): Prevent successive invocations of pthread_cancel
	by updating the request timestamp to the current time.

	Do not panic if libmysqlclient_r wasn't found.

2002-06-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated

	When radiusd is started with the command line option --watcher, it
	creates a watcher process which wakes up periodically to
	check if the daemon is running. If it is not, the watcher
	restarts it.

	Oops, reverted...

	Updated

2002-06-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rad_thread_init): prototype declaration.

	(guile_boot0): use rad_thread_init().

	(request_thread0): use rad_thread_init().

	Changed signal blocking.
	(rad_thread_init): New function.

	(rad_check_password): Fixed bug introduced yesterday.

2002-06-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	removed

	Updated

	Changed declarations of varargs functions.

	Include <stdlib.h>

	Removed include <varargs.h>

	Removed include <log.h>

	(rad_rewrite_execute_string): Fixed \type' declaration.

	(output_hostname): Bugfix.

	(md5crypt): Fixed declaration.

	Proper prototypes for varargs functions

	Check STDC_HEADERS and include either stdarg.h or varargs.h.
	Define macro __PVAR for varargs prototyping.

	Added logging stuff from log.hAdded logging stuff from log.h

	Removed log.h

	Updated

	Do not use radreq->conn member. (rad_sql_need_reconnect): Removed.

	Updated.

	Rewritten CHAP part: it used to left garbage in `userpass',
	which then
	produced confusing log output.

	(request_put): Disabled pthread_cancel block.

	(rad_req_drop): Use radlog_req when printing duplicate request
	diagnostics.

	Lots of fixes. Do not use rad_sql_need_reconnect(). Fixed
	diagnostics.

	(disp_sql_query): Print diagnostics.

	(rad_sql_need_reconnect): Removed.

	(typedef struct radius_req): Removed conn member. Its use was
	not thread-safe.

	(--with-mysql): Try to link to libmysqlclient_r.
	If that fails, fall back to using (possibly non thread-safe)
	libmysqlclient.

	Removed legacy --enable-sql option.

2002-06-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed obsolete entries.

	Removed radwho.h

	not needed

	Include <stdio.h> when testing for strncasecmp delaration.

	Updated

	Linted

	Updated

	Check for declarations of (v)asprintf and getline

2002-06-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rscm_avl_match_p): Use avp_cmp().

	Mark attributes that can be used for comparisons.

	(read_naslist_entry): Allow two fields for compatibility with
	previous
	versions. Set default nas type to `true'

	New property flag 'c'. Sets AP_REQ_CMP bit

	(avp_cmp): New function. Compares two A/V pairs (a la eq?). Note:
	useless
	for comparing password attributes.
	(avl_cmp): New function. Compares two A/V lists using
	avp_cmp. Only attributes marked with AP_REQ_CMP are involved
	in comparison.

	New attribute property AP_REQ_CMP marks
	attributes that can be used in request comparisons to
	determine duplicate requests.

2002-06-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated.

2002-06-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed debugging output.

	Updated.

	(rad-electric-equal, rad-electric-comma): accept equal sign
	within a string attribute.

	Override a bug in autoconf's AC_PATH_PROG (see source for
	details).

2002-06-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Changed source IP to 127.0.0.1. Brought in sync with
	raddb/clients.

	Updated.

	Bugfix

	updated

	Added es

	added to repository

2002-06-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed unneeded bits

	forgotten to commit yesterday: guile-1.6 changes

	Brought in sync with the latest changes

	Use fuzzy translations.

	Removed rewrite.c

	Fixed diagnostic output.

	added support for guile 1.6

	*** empty log message ***

	Use functions, defined in guile 1.6 and compatibility wrappers.

	Removed display.h. Added radscm.h

	Moved from radscm/

	Moved to include/

	(auth_code_abbr): Bugfix

	use-modules format

	Changed invocation of the snarfers.

	 include <radscm.h>

	Additional checks for functions introduced in guile 1.6

	AC_SUBST(GUILE_SNARF_VERSION). The variable is used to determine
	which snarfer to use.

	Updated

	added to repository

	scripts/guile/guile-doc-snarf

2002-05-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated.

	Changed type of Ascend-.*-Filter attributes to abinary.

	Added Ascend-Call-Filter and Ascend-Data-Filter attributes.

	(format_string_visual): Bugfix. Characters > 128 were printed
	incorrectly.

	Handle `abinary' attribute type.

	Added ascend.c

	Implementation of ascend-specific filters.

	(DICT_ATTR): Added attr_parser_fp member.
	(dict_register_parser, ascend_parse_filter): New protos.

	Added forgotten copyright statement.

	Renamed setbit to radck_setbit: the name
	caused conflict on HP. Renamed bitisset for symmetry.

	*** empty log message ***

	Again fixed mem_lock/mem_unlock. Previous
	fix, dated 2002-03-17, seems to have been lost. Don't
	know how it came...

2002-05-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	file ascend.c was initially added on branch v0_96p2.

2002-05-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added radscm.h

	Removed extra colon from the diagnostic output.

	Use radlog_req where appropriate.

	Proto for rad_print_request.

	Proto for radlog_req and definition for MAXIDBUFSIZE (the latter
	should certainly be fixed).

	(rad_print_request): Format the request into
	given output buffer. NOTES: Format must be revised.
	(radlog_req): Output a diagnostic message along with the
	short request data.

	(auth_code_abbr): new function. Print abbreviated request type.

	(rad_pdu_finish): Bugfix: sealing of RT_ACCOUNTING_REQUESTs
	was incorrect.

2002-05-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Rewritten using new server/client functions.

	Use new server/client functions.

	Rewritten using new server/client functions.
	Implemented multiple servers per realm. Proposed by Rasmus
	Aveskogh <rasmus.aveskogh@utfors.se>.

	(auth_code_str): New function.

	Redesigned.

	Reflect changes to REALM structure.

	Reflect changes to REALM structure. Allow for multiple servers
	per line.

	Bugfix: count empty lines.

	Removed dubious assignment.

	(make_string): Handle NULL argument.

	(REALM): Redesigned the structure. Use a queue of servers
	instead of
	a single IP.
	(RADIUS_SERVER,RADIUS_SERVER_QUEUE): new structures.

	Removed radclient.h

	*** empty log message ***

	Added radpdu.c and radsrv.c.

	Added to repository

	Added no-exeext automake option.

	Added readme-alpha option.

2002-05-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(output_tab): bugfix

	removed generated files

	Updated

	Added utmp-related preprocessor stuff, takenAdded utmp-related
	preprocessor stuff, taken from include/sysdep.h

	(parse_opt): Bugfix.

	(snmp_req_drop): Changed prototype.

	(request_drop and dependents): Changed prototype to allow for
	re-transmitting of the original request (namely, for proxy
	requests).

	Retransmit proxy requests.

	(get_socket_addr): new function.
	(proxy_addinfo): Modified.
	(proxy_retry): New. Retransmit the request.

	Reflect changes to RADIUS_REQ

	(radreq_free): free remote_user. realm now points
	to a global list entry and should not be freed any more.

	 Use HAVE_DECL_ defines to guard extra prototypes. Removed
	 utmp-related stuff.

	(proxy_retry): added prototype.
	(snmp_req_drop): fixed prototype.

	(struct radius_req): Changed type of `realm' to REALM.
	Added new members: server_port and remote_user.

	Added comment to RA_CHECK_STRUCT_FIELD.

	Check declarations of strncasecmp, strtok_r, localtime_r

2002-05-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	moved to lib/

	generated file

	radlib/alloc.c

	Updated.

	Use new format syntax.

	Use functions from lib/printutmp.c; Provide several predefined
	formats.

	Added protos for functions from lib/printutmp.c

	Removed realm_find() proto.

	Added protos for realm_ functions

	Removed realm-related functions.

	Use realm_lookup_name()

	Renamed radlib/ to lib/

	moved from radlib

	moved form radlib

2002-05-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Changed semantics of radutmp.porttype

	Changed semantics of radutmp.porttype. Now it keeps the value
	of NAS-Port-Type verbatim.

	Updated

	A little housekeeping

	Fixed REVISION format.

	Cleaned up wording: Lesser GPL instead of Library GPL.

	Updated to LGPL 2.1

	Updated.

	Build pofilter if in maintainer mode

	A filter to ispell (vers. >= 3.2.06) for use with .po files.

	RA_MAINTAINER_MODE takes an argument.

	@tab after a newline confuses tex2html.

	Supply an argument to RA_MAINTAINER_MODE.

2002-05-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Mutual locking was badly broken. Fixed.
	Notice that this version does not support recursive invocation
	(rewrite -> guile -> rewrite will deadlock).

2002-05-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added dot.emacs

	added to repository

	changed diagnostics output

	New translations.

2002-05-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated.

	Expand \n to \r\n.

	Added NLS-related stuff

	added to repository

	Added to repository

	updated

	untabify

	Updated

	Added nls-related issues.

	Added nls-related files.

	Added @LTLIBINTL@

	Fixed nls-related  issues.

	Added intl

	Use ENABLE_NLS instead of HAVE_LIBINTL

	Fixed diagnostics.

	Removed \r from user reply messages.

	Fixed diagnostics

2002-05-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rad_send_reply): Always copy Proxy-State attributes to the reply.

	Removed proxy_pairs from AUTH_MACH.

2002-04-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(alloc_bucket): Fixed inconsistencies in computing
	class->allocated_cnt.

	Add extra diagnostics.

	Trivial update

	Be more careful with various *CLEANFILES

	Removed commented out statement.

	Added CLEANFILES.

	Add raddict.h radmibs.h to MAINTAINERCLEANFILES

	Add final newline.

	Add description string to AC_DEFINE_UNQUOTED.

	Updated

	Configuration rewritten for autoconf-2.53 / automake-1.6.

	Added to repository

	Updated

	Provide clear_debug() in the #else branch.

	(rad_send_reply): Fixed silly bug.

	(rad_check_password): Attempt to autodetect CHAP authentication.

	Protect #include <*.x> with #ifndef SCM_MAGIC_SNARFER.

	Changed CLEANFILES. Provided distclean-local.

	Changed DISTCLEANFILES.

	Changed CLEANFILES.

	Renamed RADSCM_BUILT_SOURCES to RADSCM_BUILT_SOURCES_LIST.
	Added new CLEANFILES and INCLUDES.

	Automake barks at RADIUSD_LDADD. Renamed to RADIUSD_LDADD_LIST.

	Changed rad_ prefix to RA_ for defuns and to ra_ for variables.

	Added CLEANFILES.

	Reluctantly added $(EXEEXT) to the .la target.

	Require automake 1.6. Override default distcheck rule since
	it requires _everything_ to be removed on uninstall, and we
	will not remove files from $sysconfdir.
	Similar considerations apply to distcleancheck_listfiles.

	changed to autoconf-2.53

2002-04-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(rad_send_reply): Cleaned up handling of
	reply attributes in authentication rejects.

2002-04-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	Added some more insists.

	update

	Updated

	Handle SIGHUP. Set spawn_flag=1

	Changed error control.
	(rad_send_reply): Append 'reply' back to radreq->request.
	This should be eliminated soon.

	(rad_acct_system): Ignore only requests without NAS-Port-Id or
	with Acct-Type!=System

2002-04-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	radius.c rewritten

	Updated to reflect changes in the AUTH_HDR structure.

	Cleaned up wording in the heading comment.

	(rad_utmp_putent): Fixed typo in error diagnostic string.

	(radreq_free): Free memory allocated for reply_.* members.

	(rad_req_xmit): New function. Retransmits
	previous replies for AUTH and ACCT requests.
	(request_class request_class): Use rad_req_xmit().

	Rewritten from scratch.

	(rad_acct_xmit): Removed.

	Removed proto of rad_acct_xmit().

	(typedef struct radius_req): New fields
	reply_code, reply_pairs and reply_msg. These are used
	to keep the reply values for already processed requests.
	These values are retransmitted when the need arises.

2002-04-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Framed-Protocol handling in radutmp-related code

	(nas-utmp-list): Use string protocol value.

	(s_rad_utmp_putent): Accept integer and string protocol values.

	Use dictionary to decode stored protocol value

	Store Framed-Attribute value in ut.proto verbatim.

	Removed P_ protocol defines.

2002-03-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed potentially dangerous commands: dumpdb and status.

	Updated.

	New option: --file. --log-directory retained for compatibility.

2002-03-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Switched to GNU argp functions for parsing command line options.

	Use rad_argp_parse().

	Added -I$(top_srcdir)/radlib

	Removed include <getopt1.h>

	Updated

	Added entry about Hurd

	Ignore SIGPIPE

	Removed not needed externs

	Changed version() to fit argp_program_version_hook declaration.

	Removed

	Removed getopt1.h, added radargp.h

	Added to the repository

	Check for argp stuff.

	Added new sources.

	Radius-specific command line handling.

	Replacement files for missing argp* calls

2002-03-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	/tmp/F

2002-03-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fixed

	Updated

	Do not overwrite existing dictionary

	Bugfix: Initialize server_stat.start_time with current time.

	Added Password for backward compatibility.

	According to RFC 2138, renamed Password attribute to
	User-Password.

2002-03-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	More elaborate checking for POSIX threads library: FreeBSD keeps
	posix_ functions in libc_r.

	Updated

	(avp_free): Be more safe: check for NULL.

	(rad_sql_retrieve_pairs): Honor additivity when moving pairs
	to the
	return_pairs. (Reported by Ciprian Nica <nimaci@pcnet.ro>).

	Updated

	(attach_sql_connection): Do not call time() twice.

	Ignore SIGPIPE

	Removed #if 0 blocks.

	Fixed wrong description of attrib.op usage.

	Install elisp files only if emacs is present on the system
	(bug reported by Andrey Lakhno <land@dnepr.net>).

	define lisp_LISP only if emacs was found on the system.

2002-03-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Close all inherited descriptors right after entering main.
	It is needed when linking against GNU pth.

	include <sys/types.h>

	Typo

	Updated

	Removed stray pth.h

	Renamed MACH to AUTH_MACH. It caused trouble on Hurd.

2002-03-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	More fixes...

	mem_lock/mem_unlock were completely broken.

	(radclient_send): Do not update number of retries if select
	returns -1.

	Removed obparse_stack_ready. (rad_sql_init): init the obstack
	and destroy it after finishing.

	 Do not call thread-related functions from the signal handlers.

	(proxy_send): Use avp_free instead of avl_free to free a single
	pair.

	(hints_setup): Use avp_free instead of avl_free to free a
	single pair.

2002-03-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fixed snmp_errno thread-safety.

	initialize snmp_errno on a per-thread basis.

	(struct snmp_def): Removed session_list, alloc and free members.
	Fixed rest of functions accordingly.

	Thread-safety fixes to libsnmp.

	(struct snmp_def): Removed session_list, alloc and free members.
	Fixed rest of functions accordingly.

	(snmp_poll, snmp_timeout, snmp_read): Changed declarations. All
	functions
	now take an explicit struct snmp_session * argument, meaning
	the session
	list to operate upon.

	(__snmp_alloc_fp, __snmp_free_fp): New globals. These keep
	appropriate
	function pointers, instead of snmp_def.alloc and
	snmp_def.free. This
	will come handy when snmp_def passes to thread-specific memory.

	(struct snmp_def): Removed session_list, alloc and free members.
	(__snmp_alloc_fp, __snmp_free_fp): externs.
	(snmp_fdset): prototype declaration.

	(snmp_poll, snmp_timeout): Changed prototypes.
	(snmp_read): Added prototype.

2002-03-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(request_put): Expire PS_WAITING requests
	(request_stat_list) Use new QUEUE_STAT structure.

	Handle new mibs. (snmp_port_index2) Fixed gross bug.

	Changed queue statistic variables.

	Changed definition of QUEUE_STAT.

	(enable-snmp): documented compat value.

	Updated

	(main): Initialize random number generator.

	(calc_acctdigest): Use REQ_AUTH macros.

	(write_detail): Use REQ_AUTH macros.

	Define macros for return value of calc_acctdigest().

	(random_vector): Removed superfluous call to srand().

	(random_vector): Removed superfluous call to srand().
	(radclient_build_request): Added handling of accounting request.

2002-03-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Thread-safety: signal handlers only set
	global flag, the main thread does the actual handling.

	Removed // comment.

	Updated

	(avp_dup): Duplicate string values of attributes with deferred
	evaluation.

	include <signal.h>

	(asn_decode_int): Removed count > intsize limitation: some hosts
	return 5 bytes of information (leading 0).

	Updated

	Reorganized inter-thread communication.

	(request_get): Mark retrieved record with RS_PENDING flag. Added
	debug logs.

	(rad_request_handle): Do not raise condition after starting a
	new thread.
	Added (a bit too extensive) debug logs.

2002-02-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	(request_thread0): Force async cancel type.
	(request_handle): Bugfix: set child_id.

	(rad_send_reply): Fixed memory leak on reject packets.

2002-02-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	(reread_config): Initialize socket_first to NULL.

	Updated

	(reread_config): Initialize socket_first to NULL.

	Updated

	Disable handling for USR1 and USR2.

	Thread safety: send_buffer is made local.

	Thread safety: mutexes around critical sections.

	(acct_def productions): Bugfix: R_AUTH was used instead of R_ACCT.

	(sfn_eval_reply): Free strvalue before assigning evaluated
	value. This caused memory leaks.

	Emit extra newline after calling guile-config.
	Needed for Sun's native sed (and possibly others).

2002-02-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(nas.scm): Fixed typo.

	(boot_body): Fixed info messages.

	(rad_request_handle): Bugfix: return 0 if new
	thread cannot be started. In this case, one of currently active
	threads will handle the request.

2002-02-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	More thread-safety fixes

	(guile): Sample gc-interval statement.

	Thread-safety: keep all private data in the thread-specific
	memory.

	New variable scheme_gc_interval.
	(boot_body): Run gc each `scheme_gc_interval.' seconds.

	Thread-safety: keep log-category in the thread-specific memory.

	Handle gc-interval statements.

	New keyword gc-interval

	added extern for scheme_gc_interval.

	More thread-safety fixes

	Use thread-safe md5init.

	Changed proto of md5crypt.

	(md5crypt): Made thread safe.

2002-02-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Number of bugfixes: child_id was used instead of status

	Updated

	Raised patchlevel

	Updated

	Enable proxy debug level.

	(request_thread0): Handle as many requests as possible before
	going to cond_wait.

	(rad_daemon): Restore sighup.

	Thread-safety fixes

	Thread-safety: mutex-protected string functions.

	(avl_dup): Bugfix: dup_string if eval flag is set. This caused
	difficult to trace coredumps.

	(hints_setup) Thread-safety: use local obstack.

	(sfn_eval_reply): Use datum.sval directly, instead of
	make_string() on it.

	(interpret): Thread-safety: always return allocated string value.

2002-02-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	(table passwd): Modified `active' column definition

	Fixed copyleft statement.

	Added LO_MSEC flag.

	(struct SQL_cfg): Removed max_connections.

	(log_to_channel): Handle LO_MSEC flag (print-milliseconds yes).

	Use generic request functions.

	Added more debug prints

	Fixed #ifdefs

	(rad_mysql_disconnect): reset conn->connected.

	Added more debugging levels

	Added debugging

	(disp_sql_reconnect): Disconnect if necessary

	Example of max-threads statement.

	Removed deprecated directives.

	Added required prototypes

	Handle max-threads keyword (`option' block).
	Handle print-millisecons (`channel' statement).

	new keyword: max-threads
	new keyword: print-milliseconds.

	Got rid of connection queue stuff: each tread now
	has (at most) two SQL connections associated with it. These are
	stored in thread specific memory.
	*  Parameters auth_max_connections and acct_max_connections are
	deprecated.

	Generic request handling functions.

	Added request.c

2002-02-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added to repository

2002-01-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed definition of rad_RESULT_ACTIONS.

	Untabify

	Updated

	Generated files

	Updated

	Recursive mutexes are not portable. Fixed.

	Ensure thread safety.

	Reentrant interfaces to gethostby.* functions
	are defined in at least 4 different ways on different platforms.
	Therefore, ignore them and provide our own versions
	unconditionally.

	Define _REENTRANT

	Sleep until daemon really starts up
	instead of sleeping an arbitrary amount of time.

	Make number of subtests in stress test
	configurable via environment variable STRESS_COUNT.

	(rad_daemon): Force the safe umask.

2002-01-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Removed stray `shmem.c' entry

	Added `resolve no'. Currently commented out.

	New option: --zero-logs to zero out the log files.

	Added stress test (authentication).

	Support for subtests.

	Added driver-dependent tests.

	Renamed do_not_resolve to resolve_hostnames, reversed its sense
	accordingly.
	(ip_iptostr): Fixed byte order dependency.

	Renamed do_not_resolve to resolve_hostnames.
	Bugfix: Create all threads with PTHREAD_CREATE_DETACHED bit on.
	Removed duplicate call to request_cleanup.

	Added sample `resolve' statement.

	Added new keyword `resolve [bool]'. It determines whether
	IP numbers
	should be resolved to hostnames for logging output.

	Renamed do_not_resolve to resolve_hostnames, reversed its sense
	accordingly.

2002-01-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Renamed IP-conversion functions:
		s/ip_hostname/ip_gethostname/
		s/get_ipaddr/ip_getaddr/
		s/ipaddr2str/ip_iptostr/
		s/ipstr2long/ip_strtoip/

	Updated

	Use thread-safe functions

	Provide declarations for gethost.*_r functions.

	 Changed proto of client_lookup_name.

	Changed protos of ip_hostname, ipaddr2str,
	nas_ip_to_name, nas_request_to_name. Removed format_ipaddr.

	Replace gethost.*_r and getline functions

	Added HAVE_HOSTENT_H_ADDR_LIST

	Added m4/common.m4

	Lock critical sections with mutexes

	Lock the mutex before calling localtime().

	Add gethost_r.c

2002-01-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Moved to POSIX threads. Tested basic functionality of
	the daemon. Still have to prove that some calls in radlib
	are thread-safe. radlib/mem.c surely isn't.

	(drv_dejagnu): Sleep 5 seconds before starting radtest,
	so that radiusd finishes configuring itself.

	Call scheme_add_load_path instead of rscm_add_load_path.

	Removed pth- and added libpthread-realted stuff.

	Removed pth.m4

	Fixed typo.

2002-01-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	(nextkn): Bugfix: do not require a '=' in A/V pairs to be
	surrounded by whitespace.

2002-01-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Collect port usage statistics.

	Added debugging prints.
	(walk_converse, run_walk): Do not allocate new objects for
	each query, rather insert the data into appropriate places,
	possibly reusing memory, allocated previously.

	New declarations: struct port_usage and port_session.

	(stat_get_next_port_no): Fixed erroneous conditional.

	(mib_data) Added server-specific oids.

	Removed auto argval.

2002-01-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added rudimental GetNext requests.

	Fixed handling of GetNext PDUs.

	Bugfix

	Updated

	Generate external declaractions, if SERVER is not defined.

	Restored T_USR2DELAY.

	Added to repository

	Started rewriting

	(oid_cmp): Added prototype.

	(oid_cmp): new function.

	Moved NITEMS to radiusd.h

	Removed usr2delay statement.

	*** empty log message ***

2002-01-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Inserted explicit cancellation points.

	Block asynchronous access to the request list.

	Changed RADSTAT, so we may coexist with the previous versions
	without
	clobbering their statfile.

	(typedef Config): Removed delayed_hup_wait member.
	(extern radius_pid): Removed.

	Removed T_USR2DELAY.

	(stat_init): Bugfix.

	Switched to the new MIB tree
	(.iso.org.dod.internet.private.enterprises.gnu.radius).

	Reflect SNMP_COMPAT_0_96 settings.

	undef SNMP_COMPAT_0_96.

	--enable-snmp=compat enables support for enterprises subtree
	compatible with
	version 0.96

	Updated

	Rewritten. The statistics is kept in a separate file, this file
	is read
	upon startup. While running, all the statistics is updated in
	memory. It
	gets dumped to the file just before shutdown.

	server_stat is a static structure, not a pointer.

	Removed call to stat_create().

	Removed shmem.c

	 Not needed in multi-thread version.

	(struct nas_stat): New field 'next'.

	Changes to Server_stat structure and accompanying macros.
	(extern server_stat): Static structure.
	(stat_.* functions): Protected by USE_SNMP
	Removed shmem_.* declarations.

2002-01-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Handle LOG_TID bit.

	New keyword 'print-tid'.

	New log option: LOG_TID -- print thread identifier.

	Fixed and tested thread termination routines

	(attach_sql_connection): Bugfix.

	(master_process): Removed.
	(sig_cleanup): Removed.

	Fixed thread termination routines.
	Removed some conflicting/unneeded signal handlers.
	(master_process): Removed.
	(rad_child_cleanup): Removed.

	Removed call to sig_cleanup.

	Fixed typo in raddb_subdirs (reported by Andrey Mironenko).

2002-01-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Use INADDR_LOOPBACK instead of hardcoded IP.

	Prepare for defining INADDR_LOOPBACK.

	Added inaddr.m4

	Check whether INADDR_LOOPBACK is defined.

	Forgotten changes

	Updated

	Added pth.m4

	Added to repository

	Updated

	Removed spawn statements.

	spawn statement is obsoleted.

	Use thread-safe functions.

	Use thread-safe format_pair().

	Added protos for strtok_r(), localtime_r()

	(struct sql_connection): Removed qid.
	New field 'owner' keeps pointer to RADIUS_REQ structure
	to which this connection is attached.
	(rad_sql_setup): Removed declaration.

	(SNMP_REQ): new field fd.

	Removed qid_t declaration: not needed any longer. Changed qid in
	struct radius_req to void *conn. This keeps pointer to the
	actually
	attached sql connection.
	Changed format_pair() proto.

	(format_pair): rewritten to be thread-safe.

	Major rewrite.

	(snmp_respond) spawn new thread to handle the request

	Replace strtok_r and localtime_r.

	Added Robert Abbate.

	Got rid of ifdef YACC_DEBUG blocks.

	Updated

	Removed --enable-yydebug.

	Removed YACC_DEBUG.

	Fixed typo.

	(read_naslist_file) removed superfluous if (master_process()).

	Marked code to be revised

	Got rid of #ifdef YACC_DEBUG blocks.

	Pass -t to yacc.

	Introduced threading support.

	include <pth.h>

	New field of RADIUS_REQ: fd keeps the socket descriptor to send
	the reply
	through.

	Added check for Pth. Removed --enable-yydebug. Yacc is always
	called with -t flag.

2002-01-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Bugfixes

	Check for fd==-1 after open().

	Maxstat was improperly initialized. This
	caused grief when the number of NASes grew beyond a
	certain limit.

	mmap returns -1 on failure. Change the condition accordingly.

	Define ENUM_T. Changed quoting.

	Use ENUM_T instead of enum.

2002-01-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Inserted release mark

2001-12-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Renamed static truncate to avoid name clash with the libc
	function.

2001-12-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated.

	Added descriptive comment.

	Minor fix.

	Version 0.96

	Added MACHINES.

	Added to repository

2001-12-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Indentation

	Use cat instead of echo. The latter handles escaped symbols
	inconsistently on different systems.

	Fixed to work on different architectures

	Pass environment variables to runtest.sh. Added *-stamp to
	DISTCLEANFILES.

	Typo

	Use server IP 127.0.0.1

	Added *-stamp to DISTCLEANFILES.

	Conditionally clear logs.

	Capitalized test descriptions, fixed a typo (een instead of en).

	Fixed bug: did not clear file->eof.

	Put int fields at the start of %union,
	otherwise they may be initialized improperly
	in config_kw.c:in_word_set:wordlist. Noticed on Spark.

	Added EXPERIMENTAL mark for untested features.

2001-12-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	Updated

	Simplified.

	Create radiusd and radiusd.proxy subdirs.

	Moved from ..

	Use QUOTE and ESC instead of implicit quotation marks and
	backslashes.

	Do not use eval, some m4's (namely, BSD's) do not implement
	it correctly.

	Added to repository

	Added test/shell/Makefile

	Use obstack instead of static array.

	Renamed libsnmp to libradsnmp to avoid conflicts with other
	snmp libraries.

	Use passwd.active in auth_query. Use %D instead ogf %G in
	acct_start_query.

	Added `active' field to `passwd' table. Proposed by Robert Abbate.

	Do not update statistics for DEFAULT NASes.

	Implemented DEFAULT keyword.

2001-12-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Synchronized with /raddb/sqlserver.

	Modified.

	Added proto.m4.

	(format_pair) Fixed a dumb error.

	Common m4 test suite defines.

2001-12-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Bugfix: continue in case context. Reported by Markus Sander.

	Modified (un)attach_sql_connection. The problem
	is that sql functions can be called before rad_sql_setup,
	therefore (un)attach_sql_connection must be prepared to create
	a connection on the fly and release it immediately after
	executing a query. This all connection stuff needs a good
	rewrite.

	Removed unnecessary kludge.

	Changed protos of rad_sql_cleanup, and rad_sql_setup.

	Updated

	Removed DA_QUEUE_ID-related code. Changed function declarations
	accordingly.

	Removed DA_QUEUE_ID creation. Use RADIUS_REQ->qid instead.

	Removed Queue-Id.

	Removed typedef qid_t.

	Added typedef qid_t. Added qid field to RADIUS_REQ.

	renamed username and password, they caused too much qu\oting in
	*.m4 files.

	renamed username and password, they caused too much quoting in
	*.m4 files.

2001-12-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	added *-stamp files

	Updated

	Added Vlad Lungu

	Modified

	Added ODBC-related stuff.

	Removed s. directories. Increased patchlevel.

	Removed s. directories

	Reorganised test suite.

	Initial commit

	*** empty log message ***

2001-12-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Bugfix: Create log files in log/ subdirectory

	Updated

	(obstack_grow_quoted) Extra precaution when
	 checking the signed value.

	(radreq_cmp) use sizeof insead of a hardcoded constant.

	Added to repository

	Added David Friedman

	Test suite for proxy server

	raddb for testing proxy server

	Added checks for proxy service.

	Added realms.

	Removed realms, added realms.in

	Fixed typo.

	Pass arguments of default_radiusd_start to the invocation of
	test.sh verbatim.

	Lots of changes to allow for proxy test suite.

	Removed obsolete fourth field.

	Honour checklist opcodes.

	More overflow checks.

	Allow to specify accounting port in
	a realms entry. Syntax is: hostname[:auth-port:[acct-port]].

	Fixed suspicious int -> void* casts. It upsets the gcc on alpha.

	Added include <string.h>

	Fixed relative paths.

	Lots of fixes to make it work on machines where
	sizeof(int) != sizeof(void*).

2001-12-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	(calc_acctdigest): Fixed possible buffer overflow.
	(radrecv): Fixed handling of Vendor-Specific attributes
	(a malformed attribute could have a length < 2).

	Updated.

	Print a reminder for first-time installers

	Fixed several typos.

	Updated

	Reflect new radtest syntax.

	Introduced positional parameters.
	Provided rudimentary default value substitution for
	variables and positional parameters.

	Introduced positional parameters.

	Introduced positional parameters. Changed
	invocation syntax: input filename must be specified with
	-f (--file) option. This also toggles shell mode. Any
	surplus words in the command line are assigned to positional
	parameters.

	free unused memory.

	Escape '\'', '"' and '\\' in radius_xlat.
	Thanks to Michael Samuel for noticing.

2001-12-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	print "expect failed" only if abort_on_failure is true.

	Use radtest.

	Combine all m4 defines into M4_DEFINES make variable.

	Changed quoting and comments to improve readability.

	*** empty log message ***

	Updated

	Removed -x option to radtest.

	Added '\' line continuation.

	Removed legacy "radtestrc" parsing. Added new option, -S
	(--shell),
	for use with '#! prog' shell mechanism.

	Changed declaration of radlient_alloc: first argument tells
	whether
	to read the configuration file, second one sets the default
	source IP,
	third is the buffer size.

	Updated.

2001-12-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Added radsession

	Raised patchlevel

	Updated.

	Updated to reflect introduction of radsession.

	Removed session.scm, added radsession.in.

	Source for radsession script (ex- session.scm).

	*** empty log message ***

	Updated.

	Changed radtest prompt to "radtest>".

	Give -n switch to radwho.

	Create dict and menu subdirs if necessary.

	Do not display --enable-notify with help output.

2001-12-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated.

	Fixed processing of @multitable (@item and @tab on a single
	line) and
	@example-like statements.

	Untabify.

	Added --directory switch for compatibility with other utilities.

2001-12-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated.

	(reread_config): Use rad_flush_queues() instead of
	flush_request_list().
	(rad_flush_queues): Call rad_child_cleanup() after each
	flush_request_list()
	to clean up the children remains.

2001-12-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	for i in dictionary.* ; do mv $i dict/`expr $i : '.*\.\(.*\)'`;
	done

	*** empty log message ***

	Move dictionary.* to dict/*

	Added sample acct/detail statement.

	handle detail statement in acct block.

	Do not do detailed accounting if acct_detail == 0.

	Declaration of acct_detail.

	new options: --with-log-dir and --with-pid-dir

	Added Dave Restall.

2001-12-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Template for creating online documentation page.

	Added rules for generating web documentation archive.

2001-12-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Correctly handle defattr macro.

	New macro defattr.

	Print integer attributes as unsigned.

2001-12-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed additivity of Pam-Auth and Auth-Data attributes: both must
	be '=' (replace)

	Restructured; Documented new attributes.

2001-12-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed declaration of set_debug_levels.

	Fixed invocation of debugmod.

2001-12-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Changed declaration of rewrite_parse to
	take the source file name as an argument.
	Fixed awful bug in `if' production: it did not generate
	the nop matrix for the jump from the true branch. This caused
	the jump target to remain unresolved. Strange no one has noticed
	it before.
	Another bug: when loading function arguments in interpret,
	parm was incremented instead of following the `next' link. As
	a result, interpret worked only for zero to single argument
	functions. Luckily, this can be noticed only when running a
	function from the test shell.

	New option to test_shell: 's' (source). Causes parsing of the
	specified
	rewrite source file.

	Changed proto of rewrite_parse().

2001-12-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added Stress.exp

	Added Stress.exp. Pass CMD to AWK when handling `all' goal.

	Split radius_test into two procedures. Proc default_radius_test
	returns
	the error code, proc radius_test calls it and prints diagnostics
	if necessary.

	Renamed avl-match to avl-match?.

	Renamed avl-match to avl-match?. Fixed memory leak in
	rscm_avl_delete.

	New macro @AVP{} for A/V pair.

	Fixed typo.

2001-12-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	Updated and restructured documentation

	initial commit

2001-11-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Changed to properly handle new texinfo macros.

	Namespace normalization.

	Added docs for huntgroups. Many formatting changes

2001-11-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Updated.

	Introduced 'quote=' flag for raddb/realms. Old quota syntax
	is retained
	for compatibility.

	Use envar_lookup_str() and envar_lookup_int().

	New functions: envar_lookup_str() and envar_lookup_int().

	Documented huntgroups.

	Documented broken_pass, huntgroups and realms.

	Pass the argument to rad_mainloop().
	scheme_end_reconfig(): new function. Call gc immediately after
	the reconfiguration.

	Removed extra_arg kludge. It is passed as argument now.

	Call scheme_end_reconfig() after reading the confguration.

	Instructions for remote testing of the package.

2001-11-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Interoperation between Guile and Rewrite. The support for
	it is split between two modules: radscm/rscm_rewrite.c
	contains Guile interface functions, radiusd/rewrite.y
	contains Rewrite internal functions.
	The interoperation is currently one-way: Guile programs
	may invoke Rewrite functions, but not vice-versa.

	Return Reply-Message if the account has expired.

	Added documentation strings.

	Allow for recursive invocations of
	run_init/va_run_init/interpret. Added Guile interface functions.

	Call scm_init_load_path() before calling radscm_init().
	New function scheme_read_eval_loop().

	test_shell: new command 'g': invoke guile read-eval-print loop.

	Interface for invoking Rewrite functions from within Guile.

	Use libservscm.a instead of libradlog.a. Added rscm_rewrite.c

	Use libservscm.a instead of libradlog.a

	Removed call to display

	Unified header comments

	Fixes to ttl.scm

	Use rad-log instead of display.

	Modified to delete from the input obsolete `notify' statements.

	Use rad-log instead of ttl-syslog.

	static parse_facility.

	New goal: libradlog.a. Contains scheme interfaces to server's
	logging functions.

	Scheme interfaces to server's logging functions.

	Call rscm_radlog_init().

	Added libradlog.a to LIBRADSCM.

	One more fix regarding GUILE_INCLUDES and GUILE_LIBS.

2001-11-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Provide basic support for computing the session timeout in real-
	time. This obsoletes old `ttl notification' support. Requires
	guile.
	Removed old `notify' support.
	Number of other changes (including spell-checking of ChangeLog :^)

	Check the argument before passing it to parse_facility().

	Added remote.exp.

	Added ttl.scm

	Fixed quoting bugs.

	Added rscm_add_load_path().

	Bugfix

	Display warning on encountering `notify' statements.
	Use rscm_add_load_path().

	Removed notify-related stuff.

	Removed notify.c

	superceded by radscm/ttl.scm

	Removed USE_NOTIFY

	Emit warning if --enable-notify is used.

	Support for real-time session timeout calculation.

	Added rscm_add_load_path() (from radiusd/scheme.c).
	Add DATADIR to load path by default.

	Removed scheme_load_path().

	Allow for multiple Match-Profile attributes.

	Use double backslash to escape a dot (inside a quoted string).

	Fixed bug: GUILE_INCLUDES and GUILE_LIBS were not set if the
	information
	was cached.

2001-11-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Bugfix

	updated

	Use rad_REPLACE_REGEX.

	Rewritten basing on Jim Meyering's jm_INCLUDED_REGEX.

	Control guile version. It should be >= 1.4

	*** empty log message ***

	Testsuite: added support for remote testing.

	awk invocation: pass $(srcdir) instead of \`pwd\`.

	Support for remote testing.

	Added explicit rules for creating site.exp and remote.exp.

	Added test.sh

	Added rule for building test.sh

	Source for test.sh

	Removed

	Removed radtest.

	RADTEST and TESTDIR are no longer relevant. Removed.

2001-11-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fixed trivial bug

	Updated

	Use $? instead of $<. (Sun make expands the latter to an empty
	string
	when it is used in an explicit rule).

	Use $? instead of $<. Add a space between -v and its argument
	in the
	invocation of awk (nawk silently ignores -vVAR assignment).

	Escape +, even when used at a start of a regexp (nawk bails out
	at it).

	Removed unneeded include.

	Remove typecast to __compar_fn_t, it may not be defined.

	Added --with-included-regex switch (Sun's regex is badly broken).

	Use $? instead of $<. (Sun make expands the latter to an empty
	string
	when used in an explicit rule).

	Updated

	Added built files.

	Removed unneeded files. Added goals for building needed ones.

	Avoid duplication of files in test/raddb. We leave here only
	the files that are special to testsuite, all the rest is copied/
	linked from /raddb. Thus we are always testing the actual
	configuration files (and save space in distribution tarball).

	Set up for Huntgroups.exp and Rewrite.exp.

	Added two new nases for testing huntgroups and rewriting rules.

	Added Huntgroups.exp and Rewrite.exp

	New tests

	Reordered includes. Previous version wouldn't compile on FreeBSD.

	Clean up reply_list and reply_code _before_ sending the request.
	This way the old replies won't be reused if send fails.

	Pass AWK envariable to guile_doc_snarf.

	Added '/' and '\' to the list of symbols, allowed in a username.

	Removed huntgroup_paircmp(). Use paircmp instead.

	Missed values for Strip-User-Name.

	Fixed inconsistency in description of Scheme-Acct-Procedure
	attribute.

2001-11-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added acct.scm

	Set up for Hint.exp

	Split long lines

	Provide default logging channel. Load acct.scm when in scheme
	mode.

	Added copyright statement and description.

	Fixed description line.

	proc radius_test: if -message is not specified, use command
	instead.

	Removed runtest flags.

	Syntax cleanup.

	Removed excessive debugging output.

	Be more verbose in diagnostics.

	Fixed invalid @ref usage.

	Use @ref for standalone references.

	Added acct.scm.in

	Source for acct.scm: procedure for testing scheme accounting.

	Added Hint.exp and Scheme-acct.exp.

	Check hints.

	Check scheme accounting.

	Updated

	radscm_list_to_avl(): Allow for SCM_EOL input parameter.

	avl-merge(): Allow both arguments to be empty lists.

	Changed NAS IPs to use.

	Pass --guile to test.sh invocation if radiusd supports server
	guile.

	--guile option.

	More tests.

	Added (conditional) guile block

	Added auth.scm

	Scheme script to test Scheme-Procedure attribute.

	Added Match.exp and Scheme.exp.

	Initial commit

2001-11-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Added radiusd.

	Fixed properties of Add-Port-To-IP-Address attribute.

	Added exec-program-user and debugging statements.

	Added username for testing.

	Added auth.bin, users.in. Removed users.

	Added users file.

	Test program for testing Exec-Program-Wait attribute.

	template for test suite users file.

	*** empty log message ***

	Added missing global to proc radiusd_version.

	Use s.radiusd instead of radiusd.

	Modified EXPR. Zero out logfiles before starting.

	Substitute %u in format string with user login name (useful for
	testing Exec-Program attributes).

	Temporarly commented out TESTS assignment.

	Modified.

	Initial commit

	*** empty log message ***

	Updated

	Initial commit

	Removed leading whitespace from the menu text. This makes it
	easier for testing.

	Rewritten.

	Further improvements

	Added radiusd to subdirs.

	New options --srcdir and builddir

	Added mktest.awk.

	Rename test modules so that they are
	e executed in proper order.

	Store strings as string objects, not as statically allocated
	arrays.
	Added n[attr*] notation to return the concatenated string value
	of all attributes of type attr in the packet.

	Store strings as string objects, not as statically allocated
	arrays.

	radclient_build_request(): Check the length of string value
	before writing it
	into packet.

	AC_OUTPUT test/dejagnu/radiusd/Makefile

2001-11-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Further changes to the dejagnu test suite

	radtest_send(): free previously allocated reply_pairs.
	Added compare_lists() and new global: reply_list.

	Initial commit

	Lots of changes.

	Fixed for use with both test suits.

	New globals: reply_list and abort_on_failure.

	Added EXIT keyword.

	Simplified syntax. Implemented full EXPECT command.

2001-11-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	AC_OUTPUT test/dejagnu/lib/Makefile

	Initial commit

	Specify tool explicitly.

	Print help/license on stdout, instead of stderr.

2001-11-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Incremented patchlevel.

	Updated

	*** empty log message ***

	Updated

	Expanded tabs

	Initial commit

	Initial setup

	Updated.

	Reflect changes in subdir layout.

	Removed radctl.rc.in, added client.conf.in.

	Added new subdirs: guile and dejagnu.
	Removed raddb/radctl.rc dependencies. Added those for
	raddb/client.conf.in.

	Moved from ..

	Added test/guile/Makefile and test/dejagnu/Makefile

	Updated

	Updated

	Removed TOPDIR. SKEL should always be passed as an absolute
	pathname.

	Added radtest.

	Added client.conf.

	A template for client.conf.

	Removed rules for client.conf.

	*** empty log message ***

	Removed parsing of client.conf

	radclient_alloc(): Read client.conf file.
	This allows the same configuration to be shared between all
	client programs.

	Inserted code from radtest.c. Implemented -t, -r and -s switches.

	Removed radtest.c

	*** empty log message ***

2001-11-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Resurrected radtest. It will be needed for planned DejaGNU
	testsuit and also as a check tool for those who have not
	Guile installed on their system.

	Initial commit

	radtest resurrected

	Updated. Added release marks.

	Fixed some overfill boxes in tex output.

	Removed obsolete attr_query. Added check_attr_query and
	reply_attr_query.

	Changed structure of attrib table to allow for retrieving the
	check pairs from it.

2001-11-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Renamed op_str() to op_to_str(). New function: str_to_op().

	New function rad_sql_retrieve_pairs(). Renamed
	rad_sql_attr_query()
	to rad_sql_reply_attr_query(). New function:
	rad_sql_check_attr_query().

	match_user(): Try to retrieve check pairs from the database.

	New member check_attr_query. Renamed attr_query to
	reply_attr_query.
	Renamed rad_.*query() functions for consistency.

	Added protos for op_to_str() and str_to_op().

	Fixed use of @deffn.

	Properly generate variable index. Placed Concept Index at the end.
	Added pagination directives.

	Fixed bug in handling --with-lib-path arguments.

2001-11-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Added clause about Password-Location attribute.

	Increased patchlevel

	Fixed a very gross bug in valnum_cmp: it was comparing names
	instead of
	values, which led to inpredictable coredumps.

2001-11-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	format_string_visual(): Format last segment printable no
	matter how
	many chars it contains. Otherwise strings shorter than runlen, get
	formatted in octal.
	format_pair(): Some NASes (most notably, Ascend) count
	terminating zero in the length of the string. Try to work
	around this.

2001-11-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Removed duplicate define

	Bugfixes

	rad_mysql_reconnect(): Be less verbose.

	rad_spawn_child(): Fixed bug in selecting a pretender for
	replacing.

2001-11-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Little fixes

	updated

	Syntax cleanup.

	Added README-alpha.

	Initial commit.

	Increased version patchlevel.

	Finally converted to human-readable form

	Name backup file dictionary~

	Added config-conv.

	Changed default channel to "radius.log", for compatibility.

	Removed usedbm and notify clauses.

	Reflect the new variable (arg).

	finger_check(): Get argument from the `arg' envar.

	Bugfix

2001-11-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed bug in yylex() which prevented binary % from being
	recognized.
	Thanks to Clement Gerouville.

2001-10-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Put a reminder before duping stdout to file. It shall go away
	soon.

	Use regular debug() instead of debug_pair()

	removed debug_pair().

	removed debug_pair().
	format_pair(): Use format_string_visual() to format string
	attributes (useful for Password). Changed size of buf2
	accordingly.
	pairstr_format(): Renamed to format_vendor_pair().

2001-10-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Typo in log_to_channel().

	Bugfix (forgotten to apply 2001-10-14)

2001-10-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	 Rule for generating postscript output.

2001-10-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Documented message statement.

	Declaration of format_string_visual().

	New function format_string_visual(): format a string of possibly
	intermixed printable and non-printable characters.
	pairstr_format(): Use format_string_visual() to format
	vendor-specific
	pairs.

2001-10-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed bug in req_decrypt_password (possible
		dereference of NULL pointer).

2001-10-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Configurable reply-messages.

	Updated

	Example of message statement.

	New atrribute Password-Expire-Days.

	Split off radius_xlate0 from radius_xlate.
	Fixed a couple of bugs.

	Provide defaults for the reply messages.

	Added new keywords.

	User-defined messages instead of hardcoded ones.

	rad_check_multi(): Return also number of concurrent logins.

	Added message identifiers, extern decl for message_text.
	Changed proto of rad_check_multi.

	Extern declaration for do_not_resolve.

2001-10-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Modifications par Clement.

	multiple free() dans certaines conditions (unsigned
		char hp->s.nref == 255, hp->s.nref++ :)
		cela est arrive en faisant un benchmark avec toujours
		le meme username.

	Ajout de l'option -N (do-not-resolve)
	Bugfix d'un potentiel probleme : 'unlinking' de la requette si
	le fork() faille.

	Un detail mise en configuration par defaut de : int auth_detail
	= 0;
	Ajout de l'option -N (do-not-resolve): no reverse DNS lookup.

	Un etrange Hack de la fonction rad_spawn_child():
	 Preferons remplacer une vieille requette (REQUEST * to_replace)
	 plutot que dropper la nouvelle en attendant que le
	 garbage-collector
	 libere de la place. On peut raisonnablement penser que la
	 reponse a
	 ete recue par le NAS. Ameliore sensiblement le nombre de
	 requettes/secondes du serveur.

2001-10-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Ignore trailing whitespace: fixed.

	Typo

	Updated

	Synchronized with namespace cleanup from 2001-10-16.

	Removed fcnt argument from the read_raddb_field calls.
	Added checks for maximum number of fields, where
	applicable. Possibly
	should use nfields() from fict.c for this.
	Use envar_parse_argcv instead of envar_parse.

	Removed fcnt argument from the read_raddb_file proto.

	New function envar_parse_argcv().

	Updated

	Use getline+argcv_get.

	Ignore trailing whitespace.

	Added getline.c

	Read line of arbitrary length from a stream.

	Updated

	Added html: rule

	Removed length limit on shared secret.

2001-10-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Handle broken passwords sent by MAX Ascend

	Use req_decrypt_password().

	New function req_decrypt_password(). Checks for 'broken_passwd'
	var in
	NAS environment variables and if this variable is set,
	decrypt_password_broken() is used for decrypting the password.

	Proto for req_decrypt_password().

	Use envar_t instead of RADCK_ARG in struct NAS. Added proto for
	nas_request_to_nas(), decrypt_password_broken().

	Removed RADCK_ARG-related stuff.

	Use envar_t instead of RADCK_ARG. New function
	nas_request_to_nas().

	Use envar_t instead of RADCK_ARG

	Added envar.h

	Added envar.c

	'Environment variable' functions.

	New function decrypt_password_broken() for decrypting long
	passwords (>16),
	sent by some brain-damaged termservers (MAX ascend in particular).

2001-10-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	one more fix to be on the safe side...

	Updated

	Null terminator was offset by one. Fixed.

	Added some debugging info.
	checkdbm(): use dynamically allocated buffer instead of static
	one.

	rad_check_password(): return AUTH_NOUSER if rad_sql_pass()
	returned
	NULL. Fixed bug in outputting 'SQL authentication not available'
	diagnostics (use of uninitialized var).

	Cleaned up to to make tex happy.

	Namespace cleanup. Data type defines are prefixed with TYPE_,
	request type defines -- with RT_, comparison operator
	defines -- with OPERATOR_.

	Namespace cleanup. Data type defines are prefixed with TYPE_,
	request type defines -- with RT_, comparison operator
	defines -- with OPERATOR_.
	radius_mode made global. reload_data() checks its value before
	determining whether to open users.

	Namespace cleanup. Data type defines are prefixed with TYPE_,
	request type defines -- with RT_, comparison operator
	defines -- with OPERATOR_.

2001-10-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated.

	decrypt_password(): Append terminating null

	Removed superfluous string[AUTH_STRING_LEN] = 0.

	Allow for teminating \0 in password buffer.

	Allow for teminating \0 in mach->userpass.

	Updated.

	Added default channel ang category statements.

	Fixed action for `level: T_STRING' to work with `upto' severity
	specs
	(e.g.: `category debug').

	Fixed bugs introduced yesterday.

	Removed superfluous backslashes in final AC_OUTPUT.

	Updated.

	A shell wrapper for config-conv.awk

	Bunch of fixes to handle correctly passwords longer than 16 bytes.
	Bugfix in files.c
	Reorganised structure of texinfo documents.

	Updated

2001-10-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	Reorganised structure.

	Fixed wild_match(): it returned 0 on partial matches.

	Reflect introduction of decrypt_password().

	auth_respond(): Free radreq if radrespond() failed.
	radrespond(): Return 1 if suspend flag is on. Call
	validate_client()
	early (see FIXME, though).

	Removed calc_digest(). Introduced validate_client(). Removed
	digest
	parameter from calc_acctdigest().

	Changes due to introduction of decrypt_password and to the changes
	in RADIUS_REQ structure.

	process_menu(): removed pw_digest parameter; the function uses
	decrypt_password().

	Changed rad_check_password(): removed pw_digest argument. The
	function
	uses decrypt_password().
	rad_auth_init(): Do not free radreq upon failure. It is
	responsibility of
	the caller. Removed calc_digest check.
	rad_authenticate(): Changed call to process_menu().

	Changed invocation of calc_acctdigest().

	Removed calc_digest() proto, changed calc_acctdigest(). Added
	proto for
	validate_client(). Changed process_menu() proto.

	Changes to struct radius_req: removed digest field, changed type
	of secret
	field (was char [], now char *). Secret now points to the
	shared secret
	from corresponding CLIENT structure (no free needed when freeing
	the request).
	Added protos for encrypt_password() and decrypt_password().

	Added cryptpass.c

	radclient_build_request(): Use encrypt_password().

	Functions for password encryption/decryption.

2001-10-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Changes for converting to html

	New rule for creating an html documentation file.

	Initial commit

	Added texi2html

	Added .tar.gz

2001-10-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated.

	Initial commit

2001-10-01  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated.

	Fixed permissions on installed files.

	Allow for colon-separated pathlists in --with-{include|lib}-path.

	Added alphadist rule. Put both alpha rules under MAINTAINER_MODE
	conditional.

	Updated.

	Added DA_PASSWORD_LOCATION to server_check_items.

		Changed semantics of Local and Crypt-Local auth-types. As
		before,
		Local means that the user's password is stored in
		cleantext and
		Crypt-Local means it is stored in a crypted form. The
		difference
		is that the value of password itself can be retrieved from
		different places, depending on the value of a new server
		attribute,
		Password-Location. The absense of this attribute
		means that
		the password is stored in Password or Crypt-Password
		attribute
		of the checklist in the users file. This provides backward
		compatibility with the previous implementations.
		Password-Location = SQL means that the password should
		be retrieved
		from SQL database using auth_query. More Password-Location
		values
		will be added as the need arises.

		Started rewriting documentation.

	Started rewriting documentation.

	Initial check-in

	*** empty log message ***

	Updated fix_check_pairs() to accord with the new semantics of
	Local auth-types.

	Made rad_check_password() static to the module. Removed unused
	activefd
	parameter from its declaration. The function is essentially
	rewritten to
	accept new semantics of Local and Crypt-Local auth-types.
	Added DA_PASSWORD_LOCATION to server_check_items.

	New attribute Password-Location describes where to get the
	password for
	Local and Crypt-Local auth-types. When absent, the password is
	read from
	Password or Crypt-Password attribute. When set to SQL, cleantext
	or hashed
	password is retrieved from the SQL database.

	rad_sql_pass() returns a ponter to retrieved user password. The
	storage is
	allocated dynamically and must be efree'd.

	Changed rad_sql_pass() proto: accept two arguments and return
	a character
	string.

	Removed rad_check_password proto.

	Fixed call to value_name_to_value.

	Options --with-include-path, --with-lib-path replace old
	--enable-add-.*-path
	options.

2001-09-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	Fixed invocation of value_name_to_value.

	Updated

	Preserve the order of entries in collision lists when rehashing.

	Use linked lists for dictionary values.
	This reverses some part of changes from 2001-08-07. Reason:
	symtab provides no convenient way for multiple key indexing.

	value_name_to_value(): second argument: the attribute name
	the value belongs to.
	value_lookup(): Changed accordingly.

	Forgotten defined(__sgi) :((

	DICT_VALUE contains a pointer to entire DICT_ATTR structure,
	not just
	the attribute name. This facilitates look-ups.

	Added alpha: rule

2001-09-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated

	radscm_cons_to_avp(): Initialize all VALUE_PAIR members.

	Minor changes.

	Append symbols to the end of collision list, so that duplicate
	ones appear
	in chronological order.

	Fixed avp_move: it always set new->next to NULL.

	Call radscm_init().

	sfn_scheme(): scan the copy of reply pairlist, not the list
	itself,
	since it can be modified by scheme_auth().

	Removed spurious block of code in add_user_entry (sym_install
	now does
	all the job).
	hints_setup(): fixed error: wrong scope for tmp variable.
	Use avl_merge instead of avl_add_list.

	Added missing parenthesis in radconf-keyword-dict.

	Added rscm_avl.c

	Scheme interface to some avl functions.

2001-09-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Allow usage of Fall-Through in raddb/hints

	Updated.

	Added Eric Salome

	Forgotten to commit on 2001-09-12.

	radius_xlate(): Allow for NULL req argument (for test_shell).

	Removed spurious 'Authentication OK' message. Fixed call to
	interpret to
	match its proto. Do not replace strvalue with computed pair
	result,
	assign it directly instead.

	Fixed interpret.

	Fixed some syntax flags.

2001-09-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated.

	Removed extra dependencies that prevented the package from
	compiling without guile.

	AC_SUBST for RADSCM_BUILT_SOURCES and GUILE_PROCEDURES_TXT.

2001-09-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	Enabled SNMP set-value requests for suspend,continue and shutdown

	Use auth.status for both AuthConfigReset and
	AcctConfigResetObjects.
	Make sure this variables always return RFC-prescribed values. GNU
	extensions are returned by radiusServerState variable.

	Hold previous value of server_stat->auth.status in a global;
	trigger
	corresponding actions when it changes.

2001-09-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Prefixed xmalloc,xrealloc with "rad": they are apt to conflict
	with other
	identifiers from other libs or programs (when used in
	pam_radius.so).
	Do not access hash_size with index < 0.

	Prefixed xmalloc,xrealloc with "rad": they are apt to conflict
	with other
	identifiers from other libs or programs (when used in
	pam_radius.so).

2001-09-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Local errno fix.

	Added Andrey Pavlenko.

	Local variable name "errno" caused grief on systems where errno
	is a
	define. Renamed.

	Updated.

	Pass an argument to rad_main(). It is needed for builddbm only.
	rad_main(): assign the argument given to extra_arg
	static. Actually,
	this is a kludge and should be cleaned up.
	rad_mainloop(): become daemon only if we really have to.

	Removes @GUILE_LIBS@ from radiusd_LDADD: taken care of in
	configure.in

	Fixed erroneous AC_ARG_WITH specification for
	--without-server-guile option.
	Add GUILE_LIBS to RADIUSD_LDADD if USE_SERVER_GUILE is set.

	Allow user to configure which characters are allowed in a
	username.
	Restore the dictionary functionality broken with the introduction
	of
	symbol tables instead of linked lists, namely, that the last
	defined
	symbolic value is used when printing detail files.
	A couple of other fixes.

	Removed superfluous quotes around SHIFT

	Reverse symtab for attribute values. This restores the
	functionality
	of the daemon broken on 2001-08-07 with the introduction of symbol
	tables instead of linked lists, namely, that the last defined
	symbolic
	value is used when printing detail files.

	Initialize %load-path. Fixed scheme_load_path, which was
	completely broken.

	Updated.

	Initialize username_valid_chars.

	Handle username-chars statement (in options block)

	Added username-chars keyword.

	Use global username_valid_chars instead of a static variable.
	username_valid_chars contains string object, consisting of
	characters
	allowed to appear in a username (alphanumeric chars are always
	allowed).

	Declaration for username_valid_chars.

2001-09-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	Small fixes to guile-related server code.

	Fixed bug in rad_sql_attr_query: did not
	unattach connection if disp_sql_exec() returned NULL.

	Fixed closure to eval_catch_body.

	static qualifiers to catname, priname.

	Further changes integrating Guile support.

	acct.c essentially rewritten.

	Recognize new keywords. Obsolete ones are retained for backward
	compatibility.

	Protos for scheme_.*() functions.

	Removed GUILE conditional

	Removed library-specific functions.

	Build libradscm.a.

	Changed USE_GUILE to USE_SERVER_GUILE. Removed library-specific
	functions.

	Changed USE_GUILE to USE_SERVER_GUILE.

	Added static qualifier to chanlist.

	Handle Scheme-Acct-Procedure attribute.

	Moved librad.a to the end of LDADD (needed for linking against
	libradscm.a)

	New attribute: Scheme-Acct-Procedure. Can be used in reply pairs
	of the
	hints profiles to trigger execution of the given Scheme
	procedure on
	accounting events. The procedure takes one argument: the request
	A/V pairs.
	Return value is #f if accounting fails and #t otherwise.

	More sophisticated checking for working Guile libraries.

	Reorganized subdirs.

	Added libradscm.a

	Scheme interface to radius [uw]tmp files.

	Scheme interface to syslog.

	libradscm basic functions.

	Scheme interface to radius dictionaries.

	Protos for libradscm functions.

2001-09-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Added more comments.

	Simplified a lot. There's no use checking for librx if we can
	just supply
	included rx.o

	Added guile.m4

	Test for working Guile libraries.

	Started integrating Guile support into the server.

	Reveal USE_GUILE option, when configured with it.

	Split main into several functions. Added use_guile global
	variable.

	Added guile-related rules.

	Added guile-related keywords.

	New state as_scheme gets triggered by the presense of
	Scheme-Attribute
	in the reply pairs.

	Added scheme.c. Added guile libraries and include paths.

	Scheme interface functions.

	Uncommented dir ../radlib.

	New attribute: Scheme-Procedure. When encountered
	in reply pairs triggers evaluation of the specified guile
	procedure.
	The procedure takes three arguments: request pairs, check pairs
	and reply pairs. It returns cons, whose car contains #f to deny
	access, or anything else to allow it and whose cdr contains
	a list of A/V pairs to be appended to the reply list.

	Sample guile configuration.

	Protos for guile interface functions.

	New options: --without-guile, --without-server-guile.

	New define: USE_GUILE

	Restored static qualifier before Channel channel (erroneously
	removed during previous commit).

	Updated.

	Emit 'channel default' and 'category \*' statements.

	Handle password-expire-warning statement; Fixed bug in handling
	syslog statement.

	Use asprintf for formatting Reply-Message.

	Removed unused config_init() function.

	Removed obsolete Server-Config attribute and its values.

	Sample password-expire-warning statement;

	New keyword: password-expire-warning.

2001-08-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Further changes to the logging subsystem. The only left-to-do is
		1. document changes.

	Fixed handling of NAS-supplied attribute length. (See 2001-08-27)

	Removed functions provided by logger.c

	Oops, forgotten to remove the comment.

	Recompute string length before adding string contents to the
	obstack.

	Reverted changes introduced 2001-08-27. They break proxy
	functionality.
	String attributes may contain arbitrary binary data, so strlen()
	is not
	appropriate.

	Fixed bug in max_fixup() function: too few arguments in call
	to max_decode_port.

	Implemented vlog().

	Added logger.c, applog.c.

	Logger system for rad.* applications. It is part of liblog
	library.

	Provide basic log functionality. It is part of librad
	library. Programs
	willing to use logger.c must define function vlog() which is
	suppsoed to
	do the actual formatting and outputting job.

	Removed.

2001-08-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fixes to radiusd/config.y

	Changed handling of 'category' statement.

	Removed unused RLOG_PID define.

	Fixes to radiusd/

	findportbyindex(): Check the validity of the argument before
	doing lookup.

	Fixed snmp_sort_nas_stat(): simple sorting of the nas_stat made
	the havoc in the statistics data.

	Do not display "Invalid user" diagnostics when print-auth is no.

	Updated.

	Do not trust attrlen when decoding string variables. Some NASes
	compute it
	including terminating zero byte.

	Added "port" to typestr. Fixed handling of obsolete level
	statements (auth).
	Fixed buglet in asgn (handling AT_PORT type).

	Use $withval when handling --with arguments

		More elaborate syntax checking of pairlist config files
		(raddb/users,
		raddb/hints and raddb/huntgroups). Each attribute has
		a set of
		properties describing it. A six-bit part of these
		properties
		describes in which list the attribute may appear in
		each of
		the above-mentioned files. The syntax of dictionary files
		is extended to hold the declaration of attribute
		properties.

		The declaration may contain the following flags:

			Flag	Meaning
			P	Propagate the attribute through the
			proxy chain
			=	Additivity = replace
			+	Additivity = append
			N	Additivity = none

		and a syntax specification. The simplest form of the
		latter is
		[] meaning default syntax spec (the attribute may appear
		in either
		list in any configuration file). More precise
		specification
		is the symbol 'C' when the attribute may be used in
		checkpairs,
		or the symbol 'R' when it may appear in replypairs
		(thus CR is
		equivalent to []). The most specific form of the syntax
		spec is

			[CRCRCR]

		where the CR pairs correspond to raddb/users, raddb/hints
		and
		raddb/groups. A dash indicates that the attribute
		cannot be
		used in the corresponding list.

	Updated.

	Delete obsolete exec-program-group statement.

		Parse extended attribute property specification.
		The specification may contain the following flags:

			Flag	Meaning
			P	Propagate the attribute through the
			proxy chain
			=	Additivity = replace
			+	Additivity = append
			N	Additivity = none

		and a syntax specification. The simplest form of the
		latter is
		[] meaning default syntax spec (the attribute may appear
		in either
		list in any configuration file). More precise
		specification
		is the symbol 'C' when the attribute may be used in
		checkpairs,
		or the symbol 'R' when it may appear in replypairs
		(thus CR is
		equivalent to []). The most specific form of the syntax
		spec is

			[CRCRCR]

		where the CR pairs correspond to raddb/users, raddb/hints
		and
		raddb/groups. A dash indicates that the attribute
		cannot be
		used in the corresponding list.

	Initialize myip with INADDR_ANY. Removed `mode' (local to
	main) and
	introduced static `radius_mode' with the same semantics.
	listen_.*() functions exit immediately if its value is not
	MODE_DAEMON.
	Reflect removal of config.exec_group.
	Use myip instead of INADDR_ANY in calls to open_socket wherever
	hostlist passed to listen_.*() functions is empty.

	Reflect changes of DICT_ATTR and VALUE_PAIR types.
	New function avl_move_pairs() moves pairs matching a given
	criterium
	between the two lists. The criterium is specified by supplying
	selection function and a closure to it.
	Implemented avl_move_attr() via avl_move_pairs().

	Reflect changes of DICT_ATTR and VALUE_PAIR types

	Use attribute property to determine whether an attribute is
	allowed to be
	used in either list of a profile.

	Removed allowed[] array: the AP_PROPAGATE bit of attribute
	properties is
	used to determine whether an attribute should be propagated back
	to the NAS.

	Changed calls to fix_{check,reply}_pairs: pass an extra argument,
	meaning which kind of file we are processing now.
	Extra member in struct temp_list (same semantics).
	Extra argument to file_read (same semantics).

	Set the group from pw_gid member of pwd.

	exec-program-group is obsolete.

	Removed exec_group member. Added protos for functions from radck.c

	Changed description of %s substitute.

	Changed flag field of ATTRIBUTE records to reflect the addition of
	AP_PROPAGATE property (P flag) and three levels of AF_.*LIST bits.

	Renamed AF_ADD_ constants to AP_ADD_.
	New AP_PROPAGATE: attributes with this bit set will be propagated
	through the proxy radius back to the NAS. Packed additivity into
	the prop bitmask. Introduced three sets of AF_CHECKLIST and
	AF_REPLYLIST flags.

	struct DICT_ATTR: merged flags and additivity into one member:
	prop
	struct VALUE_PAIR: Renamed additivity to prop.

	Fixed default password to match that of raddb/sqlserver

2001-08-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	Allow user to specify database user name and password.

	Use M4 variable. Allow user to define database access password
	in config.m4.

2001-08-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	Added to repository.

	Added scripts for automatic creation of authentication/accounting
	databases.
	(/db)

	Removed database description from the comment. Fixed sql queries
	to match new database structure.

	AC_OUTPUT db/Makefile.am

	Added db to SUBDIRS

	PostgreSQL-specific definitions.

	MySQL-specific definitions.

	Implementation-independent database structure template.

	Template for site-specific definitions.

	Changed distribution tehnique: removed dist-hook from the main
	Makefile.am
	and provided separate Makefile.am's for each directory in the
	distribution.

	Added @setfilename

	Updated.

	Fixed usage of in_category tie-in.

	Fixed wrong comparison in disp_sql_interface_index().

	Removed ROOT profile, not needed since the removal of cntl
	functionality.

	Removed sub-shell invocation, fixed paths.

	Added TESTS and TESTS_ENVIRONMENT (previously they were in the
	main Makefile.am).

	Use substitution in bin_PROGRAMS, provide EXTRA_PROGRAMS in case
	the former
	is empty. Do not distribute *.x and *.doc files. Moved MKDEP
	variable off
	the MAINTAINER_MODE conditional.

	Merged noinst_HEADERS statements.

	Added radius_TEXINFOS.

	Added *.man to EXTRA_DIST. Changed explicit rules to use $@
	and $<.

	Added rfc to SUBDIRS.

	Changed version number to pre-release 0.95.90.
	Added substitutions RADSCM and TESTDIR.
	AC_OUTPUT new makefiles.

	Removed conditional GUILE block. Removed subdirs from EXTRA_DIST:
	each
	subdir now has its own Makefile.am. Removed dist-hook. Removed
	TEST
	variables.

	Added Makefile, Makefile.in

	Added to repository

2001-08-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	Further changes to the logging subsystem. Almost finished
	rewriting it.
	Further changes due to the removal of cntl functionality.

	Updated.

	Removed cntl interface.

	Removed radctl.scm.

	Removed. It is useless once all cntl functionality has been
	passed to
	SNMP subsystem. See TODO.

	Convert raddb/config from version 0.95 to 0.96.

	Added strcspn.c to AC_REPLACE

	Added strcspn.c

	Provides a strcspn() function for systems lacking it.

	vlog(): use priname array instead of switch when printing
	priority name.

	log_release(): Do not delete channels marked with LO_PERSIST bit.
	log_set_to_console(): Mark "stdout" with LO_PERSIST bit.
	channel_free(): Fixed memory leak.

	New option LO_PERSIST for marking channels that should not be
	deleted by log_release().

2001-08-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Somewhat regretfully, removed radlib/radprintf.c, and
	switched to using snprintf functions instead of
	rad.*printf(). The latter were OK, but the only
	major advantage they provided was %I and %A specifiers,
	which are not such a big deal, after all. Besides, they
	make lint ang gcc -Wall angry...

	Removed -fAI from the lint invocation.

	Added snprintf.[ch]. Moved headers to noinst_HEADERS
	variable. Removed -fAI from the lint invocation.

	Removed radprintf-related entry.

	Changed rad.*printf calls to (v)snprintf calls, using format_pair
	and format_ipaddr where necessary

	Reverted previous change.

	Added debugmod.c

	Removed (generated file).

	Removed prototypes for rad.*printf() functions

	Removed not needed protos.

	debug_pair(), format_ipaddr(), format_pair() prototypes.

	debug_pair(), format_ipaddr(), format_pair() functions.

	(v)snprintf replacement for systems lacking it.

	Check for snprintf function.

2001-08-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	Removed (generated files)

	Reversed changes

	Added version.texi

	Removed (generated file)

	Further changes to log subsystem. This commit compiles and
	runs fine.
	The rewriting of the logging stuff is not finished, though. Things
	to
	be done are:
		1. Make radiusd/log.c part of liblog library,
		   split off application-dependent stuff from it.
		2. Preserve "stdout" channel until exit(). Now
		   it gets nuked by log_release().
		3. Get rid of radprintf.c, use GNU snprintf instead.
		4. Of course, document changes.

	Added stamp-vty

	Added version.texi to ifo_TEXINFOS

	Acct-Ext-Program and Log-Mode-Mask were assigned the same
	number. Fixed.

	Changed library linking order.

	Use radvsprintf() instead of vsprintf(). This is temporary. I
	guess,
	I'll have to get rid of radprintf.c and use GNU snprintf.c
	instead.

	Fixed attr_number_to_dict()

	Fixed to match new logging subsystem.

	rw_attrasgn(): Check for null return of avp_create() (happens
	only when
	raddb/dictionary and, consequently, include/raddict.h is
	malformed).

	Set default logging channel. Use log_close() where appropriate.

	Added log_open() and log_close().
	vlog(): Fixed bug: asprintf() was erroneously called instead
	of vasprintf().
	Fixed declarations of catname[] and priname[].
	Added _dolog() function and fixed _debug_print.
	New functions:
		channel_free()	--   free memory allocated for a channel
		channel_free_list() -- free channel list starting from
				the given channel.
		log_mark()	--   return the head of the chanlist.
		log_release()	--   release all channels starting
				from the given one. Do all the necessary
				housekeeping.
		log_set_to_console() -- Request logging to the console
				(stderr).
		log_set_default() -- install default logging channel.

	channel_lookup(): Changed semantics of `pri' argument.

	Changed category <name> syntax. <Name> can now be any of:
			CATEGORY
			SEVERITY
			CATEGORY '.' SEVERITY
	SEVERITY allows '=' and '!' prefixes to specify exact match
	and exclusion of the given severity level.

	Call to log_open().

	Use severity specifications in calls to radlog().

	Call to log_open(). Use severity specifications in calls to
	radlog().

	Added L_UPTO() and some prototypes.

2001-08-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	Changed L_DBG to L_DEBUG.

	Started rewriting log subsystem. Log channels will now be
	separated on categories (main,auth,acct,snmp,proxy) as well
	as severity levels. The internal mechanics resembles that
	of syslog utility.

	Removed debug_output(), debug_sprintf().

	Added log_mode definition.

	Changed logging declaration syntax.

	Removed S_ constants. Changed their occurences to corresponding L_
	constants from log.h.
	Added print-category keyword.

	Added RLOG_ constants and log_mode declaration.

	Removed L_CONS occurences.

	Add vasprintf.c

	GNU (v)asprintf function.

	Changed debugging conventions. Each module that calls debug()
	functions should define symbol RADIUS_MODULE_<modulename>
	before inclusion of config.h. When a new module is added
	which uses debug facility, make debugmod should be run to
	update include/debugmod.h and ./debugmod.c.

	Define RADIUS_MODULE_<modname> at the start.

	Use libsql_la_SOURCES instead of libsql_a_SOURCES.

	Added INCLUDES.

	Added debugmod.h

	Include <debugmod.h>

	Split invocation of debug.sh among several lines for readability

	Create a single header file instead of modifying each source.

2001-08-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	Modified SQL interface: radiusd can now be configured to use
	both mysql and postgres. Switching between the two is controlled
	by "interface" statement in raddb/sqlserver file.

	Added interface statement.

	Changed SQL-related members of compile_flag_str[].

	Prototypes for dispatching functions and data structures.

	Removed radctl.h.

	Added lib.m4

	rad_CHECK_LIB: checks several paths for the presence of a library.

	Changed SQL-related defuns. New options: --with-mysql and
	--with-postgres (can be used together). --enable-sql is retained
	for backward compatibility.

	rad_RESULT_ACTIONS (ported from GNU inetutils).

	Changed SQL-related defines.

	Added sql to SUBDIRS.

	Removed mysql.c and postgres.c

	Removed.

	removed

	Changed SQL-related stuff.

	Added "interface" keyword (raddb/sqlserver). Changed rad_sql_
	calls to appropriate disp_sql_ ones.

	(from radlib/): Postgres interface functions.

	(from radlib/): MySQL interface functions.

	SQL interface dispatcher.

	Initial checkin.

2001-08-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	Initial checkin.

	Added log and acct

	Updated.

	rad-client-set-server: removed CNTL-NUM.

	Restored functionality. rad-cntl uses signals instead of obsolete
	cntl interface.

	Removed @CNTL_PORT@

	Removed PORT_CNTL.

	Declaration for radpid_dir.

	Global variable radpid_dir.

	Unlink pidfile on shutdown.

2001-08-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Updated.

	Added config_tok.h y.output config_kw.c

	Updated.

	Set 'once' argument in calls to asgn() to 0,
	except when setting radlog_dir and radacct_dir. Possibly I can
	get rid of the fourth argument to asgn() altogether?

	read_naslist_file(): call snmp_sort_nas_stat().

	Implemented whole radiusServerMIB subtree.
	snmp_sort_nas_stat(): Sort nas_stat structures so that GET NEXT
	on .NASIndex.<IP> returns next lexicografically greater oid.

	mem_stat_enumerate() accepts extra argument

	Proto for snmp_sort_nas_stat().

	mem_stat_enumerate() accepts extra argument (closure)

	Graphical representation of radiusServerMIB subtree.

	New values for enum serv_stat: serv_suspended, serv_shutdown

	Updated.

	Updated.

	Changed proto for stat_request_list(). Added typedef QUEUE_STAT.

	MEM_STAT, CLASS_STAT, declarations for mem_get_stat(),
	mem_stat_enumerate()

	New functions mem_get_stat() and mem_stat_enumerate() instead
	of meminfo()

	Implemented radiusServerQueueTable subtree.

	sig_usr1(): reflect changes in the underlying library functions.

	Updated.

	Fixed bug in action for 'severity' rule.

	Implemented radiusServerUpTime and
	radiusServerResetTime. radiusServerState implemented partially
	(read-only)

	Added mibs from GNU-RADIUS-SERVER-MIB.

	MIBs describing internals of the radius daemon

2001-08-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	Updated. I should make it understandable to human beings when
	I'm through doing the changes.

	Updated.

	Removed cntl-specific functions. No replacement provided so far,
	so test.scm is temporarily non-operational.

	Removed cntl-specific huntgroups.

	Removed ROOT.

	Removed CNTL_PORT.

	realm_find(): do not return DEFAULT realm when asked for NOREALM

	Removed radctl.c

	Reflect changes in the syntax.

	Added xrealloc(), erealloc()

	Protos for [xe]realloc()

	Added declaration for HOSTDECL. Removed cntl_port.

	Removed cntl_port. Implemented listening to multiple interfaces.

	Added "listen" keyword.

	New keyword: "listen". Currently it is used in auth and acct
	statements.
	"cntl" statement is obsolete: retained for backward compatibility.

	Removed. All its functionality should be provided by snmp
	subsystem

2001-08-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	removed check for @ before calling proxy_send()

	Changes to realm processing

	updated

	Added Michael Smirnov.

	Fixup string length after stripping off LOCAL realm (Reported
	by Michael Smirnov). Handle NOREALM special realm.

	Do not add extra spaces after expanding %C{Password}

	struct NAS: changed last member

	update

	Removed duplication of nas_ functions.

	Added check for gperf.

	New option -stdout allows to run programs that send their output
	to stdout (e.g. gperf)

	removed query_buffer-size clause.

	Changed DICT_ATTR and DICT_VALUE to fit the new allocation
	mechanism (symtabs instead of slists).

	Changed return value of install/lookup functions from Symbol*
	to void* to eliminate superfluous typecasts.

	Use symtabs for attributes and values. Removed length limit on
	symbol names.

	(rom ../radiusd) Added re-hashing. Changed return value of
	install/lookup functions from Symbol* to void* to eliminate
	superfluous typecasts.

	Fixed bug in argcv_get: it was filling an extra argv slot.

	Moved to radlib.

	Execute group_query and attr_query only if doauth is yes

	Added rules for config.kw

	Split off keyword recognizer into a separate module.

	Keywords for config.y. To be processed by gperf

2001-08-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Restored changes accidentally overwritten by commiting the wrong
	file (rev. 1.21)

2001-07-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Bunch of changes to make %C{Password} substitution return
	plaintext
	password. In the meantime, unified calling conventions a bit.

	Fixed calls to radius_xlate(). Changed proto of
	rad_sql_attr_query().

	Changed proto of attr_to_str(), radius_xlate().

	Fixed call to user_find().

	Changed protos of user_find(), user_find_sym(), user_find_db(),
	match_user(), hints_setup().

	Changed prototype of radius_exec_program().

	Changed prototype of user_find_db().

	Fixed calls to hints_setup(), user_find(), radius_exec_program().

	Fixed calls to hints_setup() and radius_exec_program().

	Fixed protos for user_find(), hints_setup(),
	radius_exec_program(), radius_xlate().

	Added proto for rad_sql_attr_query().

	Fixed protos for user_find(), hints_setup(),
	radius_exec_program(), radius_xlate().

	Fixed erroneous #if directive.

	updated

	Fixed handling of NULL default value.

	synched declaration of max_decode_port() with that in the
	documentation.

	exec.c & argcv.c

	argcv_get(): terminate output array with a NULL entry

2001-07-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fixed setting SIGCHLD handler.

2001-07-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	removed MAXARGS

	removed debugging hook

	updated

	Changed formatting of time values. The previous version was
	affected by LC_TIME settings.

	avp_free(): free associated strvalue if p->eval is set.

	Removed query_buffer_size.

	Added Acct-Ext-Program attribute.

	added Acct-Ext-Program attribute to raddb/dictionary.

	 Changed proto for radius_xlate(). Removed typedef BUFFER

	removed buf member.

	/usr/home/gray/F

2001-07-16  Sergey Poznyakoff  <gray@gnu.org.ua>

	removed exit from AC_CHECK_LIB(pam..)

	changed handling of --with-client option

	substitution for libexec_SCRIPTS so the client can still be
	built when GUILE is not installed.

	fixed erroneous call to strtok().

	Substitution for pam_PROGRAMS.

	Remove conditional BUILD_CLIENT

	Changes to --with-client blocks

2001-07-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	Output "Report bugs to.."

	Deferred pair evaluation, etc.

	Changed version number.

	Added "Report bugs to.." to the --help output.

	Modified sed expr to change lines like `# line "lex.yy.c"' to
	`# line "sourcename.c"'

	Fixed inappropriate usage of nas_lookup_ip(), introduced
	2001-07-09.

	Print correctly pairs with deferred evaluation.

	Evaluate a/v pairs with eval flag set.

	Added eval member to VALUE_PAIR structure. Added proto for
	bug_report_address

	Modified interpret() to use argcv_ functions.

	Added argcv.h

	Added bug_report_address.

	Support for $INCLUDE and $DEBUG directives.

	Support for A/V pairs with deferred evaluation.

	Added argcv.c. Sorted SOURCES

	Split a string on whitespace and given delimiters.

2001-07-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	See ChangeLog for 2001-07-09

	namespace changes

	Namespace housekeeping: normalized nas database function names
	(nas_ and client_ ).

	Namespace housekeeping: normalized nas database
	function names (nas_ and client_ ).

	Protos for radck_ functions.

	Forgotten to commit on 2001-07-04

	changes due to introduction of radlib/nas.c

	Added RADCK_ARG functions (from radiusd/files.c)

	nas database functions

	Moved yacc- and lex-generated sources to MAINTAINERCLEANFILES

	Enable maintainer-specific definitions

	make cvs diff less verbose

	initial commit

	use rad_MAINTAINER_MODE

	added EXTRA_DIST

2001-07-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	Changes to radlast and client/pam_radius

	Assign a unique messg_id after creating radclient structure.
	This is needed if a client program calls pam_authenticate()
	several times.

	fixed bug in handling -n option: should be done after call to
	radpath_init()

	OpenBSD support

	Fixed typo in comment. Improved standalone mode

	OpenBSD support (thanks to Andrey Pavlenko)

2001-06-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	updated version based on the last snapshot from automake
	repository

	report CLID along with multiple logins diagnostics

	changes to radscm/session.scm

	rad-acct: added missing NAS-IP-Address attribute

2001-06-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Changed my username to real name

	fixed potential heap overrun in pushn(). Minor fix in interpret()

2001-06-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	fixed expiring of SQL connections (Peter Kazmier)

2001-05-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	update

	fixed trivial bugs in DEBUG macros

	added config.texi

	update

	finished namespace houskeeping. Added debugging hook

2001-05-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	fixed error reporting

2001-05-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	update

	make diff less verbose

	see ChangeLog

	fix to open rad?tmp readonly

2001-05-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	re-added config.syntax

	fixed is_log_mode

	removed obsolete directories: builddbm, checkrad, radctl

	see ChangeLog 2001-05-19 -- 2001-05-20

	updated

	fixed bug in fprint_attr_list (endless loop)

2001-05-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	restored old "-" reply semantics

2001-05-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	added backslash() function

	move backslash() to util.c and made it global

	accept \<newline> continuation sequence.

	renamed backslash() to rw_backslash() to prevent clash with the
	global function

	declaration of backslash()

2001-05-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	rad_sql_reconnect did not clear conn->connected on
	failure. Probably conn->connected is not needed after all:
	can just use conn->data != NULL instead

2001-05-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	spell check

2001-05-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	radwtmp_putent() proto

	removed extra newlines :)

	update

	rad_sql_attr_query(): retrieve arbitrary reply pairs from SQL
	database. Thanks to Michael Samuel.

	fixed port type assignment

	added attr_query

	check_unix(): accept radwho output format

	added attr_query member (see ChangeLog)

	global prototype for install_pair()

	updated

	debugged

2001-05-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	restored

	initial checkin

	added missing files

	updated

	use of _SCRIPTS instead of _PROGRAMS.

	Added rad-utmp-putent for dealing with rad[wu]tmp files.

	Added radwtmp_putent() function

	use rad?printf() functions instead of ?printf().

	return 0 ttl when the peer responds with -.
	Reported by Andrey Y. Mosienko <feo@ttn.ru>

	use radwtmp_putent()

	client programs

2001-05-08  Sergey Poznyakoff  <gray@gnu.org.ua>

	fixed spelling

	The original guile-doc-snarf distributed with guile up to
	version 1.4,
	passes guile-func-name-check to awk without absolute path
	spec. Consequently
	the script bails out unless guile-func-name-check is in the
	current directory.
	The directory scripts/guile contains scripts that bypass the bug.

	updated

	radscm.doc is generated automatically

	added generation of *.x *.doc files as proper

	changed reboot records conversion code

2001-05-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	removed bash-specific syntax

	see ChangeLog

	use rut_.*() functions to handle radutmp

	changed inclusion of users_gram.h

	added #include <ctype.h>

	create_dbm() in DBM_DBM mode used malformed filenames.

	use ylwrap instead of calling yacc/lex directly

	Changed #if conditionals.

	use rut_.*() functions to handle rad[wu]tmp

	Added rut_.*() protos (radutmp.c)

	Added client programs, modified for use with m4 directory

	Added client programs

2001-05-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	update

2001-04-28  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	updated

	fixed error in acct_stop_query and acct_keepalive_query

2001-04-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	removed checkrad.conf

2001-04-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	modified handling of __EXTENSIONS__ definition (do we need it
	after all?)

	added rad_sql_need_reconnect in critical places

	updated

	added AM_PROG_CC_STDC

	Make cvs diff less verbose

	added extra files

	Make diff less verbose

2001-04-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	updated

	removed superfluous defines

	fixed to work on AIX

	fixed to work with native AIX compiler

	added empty statement after default label

	fixed error in snm_var_encode that spoiled length word of variable
	name (assignment from uninitialized variable)

2001-04-18  Sergey Poznyakoff  <gray@gnu.org.ua>

	added missing \\

	brought up to date

2001-04-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	linted

	added eval-when-compile to make compilation less verbose

	improved check for getopt_long

2001-04-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	changed indentation functions

	added call to make-local-variable to radconf-mode

2001-04-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	README

	ChangeLog

	snmp_intern.h

	README

	Added keyword and argument completion, context-sesitive help

2001-04-11  Sergey Poznyakoff  <gray@gnu.org.ua>

	Initial commit

	added rad-{next,prev}-profile and rad-load-dictionary

	fixed bug that freed just obtained value of acct_keepalive_query
	instead of old one

2001-04-10  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	GNU-RADIUS-STAT-MIB.txt

	synchronized with GNU-RADIUS-STAT-MIB.txt

	README

	modified snmp_port_index[12] to handle sparse port tables
	correctly.

	made it react on interrupt correctly

2001-04-09  Sergey Poznyakoff  <gray@gnu.org.ua>

	Added possibility to page the output information

2001-04-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	Improved regular expressions

	Added check for emacs and its directories

	Initial revision

	added check for getopt.h

	changed c command in test_shell

	Added possibility to check for user's framed IP

	Initial revision

2001-04-04  Sergey Poznyakoff  <gray@gnu.org.ua>

	added possibility to query IP different from that of the NAS
	(host= argument)

2001-04-03  Sergey Poznyakoff  <gray@gnu.org.ua>

	added import from RFC155-SMI

2001-04-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	changed initialization of msg structure

2001-03-31  Sergey Poznyakoff  <gray@gnu.org.ua>

	Extended set of the characters allowed in a username. Make
	it configurable?

	*** empty log message ***

	Added insist() in critical places. Made it abort(), not just
	exit() on low memory condition

	Fixed bug thta caused some A/V pairs from the request to be
	freed twice

	Moved to enterprise number assigned by IANA

2001-03-30  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fixed stupid error in snmp_session_create (missing rteturn!) and
	fixed check for a valid file descriptor in snmp_session_open

2001-03-27  Sergey Poznyakoff  <gray@gnu.org.ua>

	removed unnecessary timestr() definition

	synched naming conventions with those of txt

	updated tree definition

	changed representation of ..Date oids

	fixed stat_get_port_index() to be consistent with other functions

	Introduced UnixTimestamp text convention. Fixed some bugs.

2001-03-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	fixed silly error in check_snmp(): snmp_oid freed twice

2001-03-25  Sergey Poznyakoff  <gray@gnu.org.ua>

	increment num_dup_req in request_xmit()

	increment num_challenges in send_challenge()

	increment num_accepts in sfn_ack()

	*** empty log message ***

	finished adding Stat MIBs

	added stat_get_port_index() and stat_get_next_port_no()

	fixed forgotten occurence of ipaddr_t

	fixed mib_get_next() and snmp_stat_nas()

2001-03-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Finally added all statistics OIDs

2001-03-23  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	NASTable in working order

	added missing backslash

	added acct server mibs. started adding stat mibs

	changed var_subid_cmd

	Added first node of statistics subtree.

	Added meta-nodes. Get,Set and GetNext tested.

	Added accounting subtree (compliance mibs still not supported).
	mib_get_next() now works properly. The revision is checked in
	for clarity: don't think mib_get_next() will be easy to understand
	when I add meta-nodes to it...

2001-03-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	Added snmp_var_dup_list()

	Slightly changed sprint_oid()

	Switched to new MIB handling. Most of the stuff gone :)

	Changed file format. This revision contains only auth subtree

	Handle new input file format

	Started rewriting. The basic MIB tree support is rewritten
	completely.
	This version has almost entire AuthMIB subtree (except compliance
	MIB)
	and is able to return `variable' MIB values. However the
	latter are
	not returned with GetNextPDU requests.

	Added snmp_mib.c

	Generalized MIB objects

	installed

2001-03-21  Sergey Poznyakoff  <gray@gnu.org.ua>

	changed ipaddr_t to ip_addr_t: solaris already defines one

2001-03-20  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	changed typedef ipaddr to ipaddr_t

	changed snmp_req_cmp to compare only PDUs IDs instead of comaring
	whole VarBindLists

	fixed inclusion of <time.h> and <sys/time.h>

	added chapter about config file logging statement

	fixed call to snmp_session_create

2001-03-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	Added support for Log-Mode-Mask attribute

	Added Log-Mode-Mask attribute

	fixed stupid error in snmp_strdup

	Fixed inclusion of string.h (reported by Leo Bistmans)

	changed snmp_def declaration; added snmp_init()

	changed memory allocation functions

	Removed snmp_strdup definition; added call to snmp_init()

	Added snmp_strdup() and snmp_init() protos

	added missing var->val_length assignment

	added #include <errno.h>

	*** empty log message ***

	changed to comply with new SNMP API

	Installed Radius SNMP headers

	Installed Radius SNMP sources

	Cleaned up for Radius SNMP

	Fixed bug that prevented `category *' from working

	Fixed memory leak in snmp_check()

2001-03-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	Added check to the length of Password attribute.

	Introduced getmaxfd() call instead of supposing an arbitrary
	number of open file descriptors.

	Moved system-dependent calls to radlib/sysdep.c. Introduced
	getmaxfd()
	call instead of supposing some arbitrary number of open file
	descriptors.

	This module is contains system-dependent functions.

	Removed unnecessary file radlog.h

2001-03-14  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	Added NULL pointer check to rad_pam_conv: Solaris does not pass
	appdata_ptr if the server is not running euid 0. Why?

	*** empty log message ***

	Added @ to the list of allowable characters in an username.
	Thanks to Jody Owens.

	Added ! to the list of allowable characters in an username.

2001-03-13  Sergey Poznyakoff  <gray@gnu.org.ua>

	Removed last references to snprintf.

2001-03-12  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	Added extra checks to test_shell().

	Moved log-dir and acct-dir to options block where they really
	belong.

	Fixed bug that caused fopen to be called upon a NULL pointer.

	*** empty log message ***

	This file contains information needed for querying various
	NAS types
	about activity of a particular user's session.

	Removed builddbm directory. The functionality of builddbm
	command is
	provided by -mb switch to radiusd and builddbm shell wrapper.

	This module contains functions for semantic checking of
	raddb/users file.
	It also determines any possible circular dependencies between
	the user
	profiles and deletes profiles involved in such dependencies.

	This module contains functions related to DBM files, except
	lowest-level
	ones which are defined in radlib/dbm.c. The functions for creating
	DBM files are also here, so builddbm program is not needed
	any more,
	as radiusd -mb does all the work.

	It is a shell wrapper which provides the functionality of
	`builddbm'
	program of other versions of radius. Actually radiusd itself
	does all
	the work.

	Added builddbm wrapper.

	Added some extra includes.

	Added BOGUS token for catching unterminated strings error.

	Improved handling of quoted strings in the input. Now they
	are allowed
	to contain backslash-escapes, escaped newlines and octal
	characters.
	Also allowed for trailing + in IP numbers: enclosing the whole
	stuff
	in double-quotes was a nuisance.

	The return value of rad.*printf functions is now consistent,
	but FIXME2
	comment is preserved just in case...

	Added copyright notice.

	Added symtab_iterate().

	Added sql_flush() function.

	Added builddbm mode. Other slight modifications.

	Rewritten completely.

	Changed log_stdout() and added log_disconnect(). This is needed
	so that
	messages from the radiusd are echoed on stdout until it detaches
	from
	there.

	Moved DBM functions from here to builddbm.c. Also removed
	auth_type_fixup
	calls as this functionality is now provided by fix_check_pairs();

	Got rid from umsg member of MACH structure. User messages are
	allocated
	dynamically. This is needed so that called functions may return
	whatever
	user reply messages they need. Currently pam_pass uses this.

	Renambed backslash() to backslashify() so it does not collide with
	backslash() from users.l

	Added builddbm.c and radck.c

	Commented out Include-Profile. It is currently unused but may come
	handy in the future.

	#include <sys/types.h>

	Added prototype for symtab_iterate

	User_symbol defined here. Changed prototype of pam_pass.

	Modified to reflect changes to radiusd etc.

	Modified to reflect changes to radiusd and builddbm

	Modified to reflect changes to builddbm

	Removed builddbm directory and DBM conditional. Moved
	--enable-add-libpath
	up the source so it takes effect before other checks are made.

	Removed builddbm directory and DBM conditional from the Makefile.

2001-03-07  Sergey Poznyakoff  <gray@gnu.org.ua>

	Fixed nasty bug in open_dbm.

	*** empty log message ***

	Fixed printing of VALUE_PAIRs with name field set to NULL. This
	is needed
	primarily for reply packets read from DBM database.

	Improved handling of password queries.

	Removed unused defines: DBM_ONLY,DBM_ALSO,DBM_NEVER

	Added rad_sql_shutdown().

	Added rad_sql_shutdown call to rad_exit.

	Removed support for simultaneous use of DBM and plaintext user
	databases.

	DBM functons rewritten to provide the same functionality as text
	files.

	Changed data representation in DBM files.

2001-03-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	/tmp/a

	Added extra argument to rad_sql_pass. It passes additional
	authentication data from Auth-Data attribute.

	removed unneeded argument in call to radlog

	fixed rad_sql_pass prototype

	Introduced Auth-Data attribute which makes it possible to pass
	additional data to authentication methods. Pam-Auth which does
	the same but only for PAM authentication is preserved for
	compatibility with other versions of radius.
	Also added User-GID attribute.

	Introduced Auth-Data attribute which makes it possible to pass
	additional data to authentication methods. Pam-Auth which does
	the same but only for PAM authentication is preserved for
	compatibility with other versions of radius.

	Moved DBM-specific calls to a separate module (radlib/dbm.c).

	Contains declarations for DBM wrappers from radlib/dbm.c

	Contains wrappers for common DBM functions used by programs of
	the package.

2001-03-05  Sergey Poznyakoff  <gray@gnu.org.ua>

	Introduced AUTH_XXX macros. Added check_user_name function.

	Introduced AUTH_XXX macros.

	Fixed error in paircmp (attempt to access string value of an
	integer attribute)

2001-03-02  Sergey Poznyakoff  <gray@gnu.org.ua>

	Linted and cleaned.

	Introduced HAVE_SETEUID switches.

	Changed setlinebuf() to setvbuf(). Needed primarily by HP-UX which
	does not have the former.

	Changed to reflect addition of the new query: group_query.

	rad_auth_init() adds an additional internal attribute (Queue-Id)
	to the incoming packet. The attribute is needed only when compiled
	with --enable-sql option. It preserves the SQL connection queue id
	so that functions in files.c and auth.c can fetch data from SQL
	database. This is a cludge but passing qid as a parameter would be
	a way too clumsy. Hope I'll find a better solution later.

	Improved groupcheck(): added possibility to fetch group name
	from SQL database.

2001-02-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Removed erroneous #undef's

	*** empty log message ***

	Changes to handle modified log.c interface.

	Rewritten completely

2001-02-19  Sergey Poznyakoff  <gray@gnu.org.ua>

	modified sfn_time to use new timestr functions

	rewritten timestr.c

	added

	completely rewritten

2001-02-17  Sergey Poznyakoff  <gray@gnu.org.ua>

	Integrated checkrad into radiusd.

2001-02-15  Sergey Poznyakoff  <gray@gnu.org.ua>

	version 0.94-beta

	version 0.94-beta

2001-02-06  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

2001-01-26  Sergey Poznyakoff  <gray@gnu.org.ua>

	*** empty log message ***

	Added radtest script

2001-01-24  Sergey Poznyakoff  <gray@gnu.org.ua>

	Rewrite language changes

2001-01-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Removed obsolete files

	Postgres support, etc.

2000-12-29  Sergey Poznyakoff  <gray@gnu.org.ua>

	Modified includes

	Addedd PostgreSQL support

2000-12-22  Sergey Poznyakoff  <gray@gnu.org.ua>

	Create the repository

	Initial revision

Local Variables:
mode: change-log
version-control: never
buffer-read-only: t
End:
